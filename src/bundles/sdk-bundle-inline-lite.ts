/**
 * This file is AUTO-GENERATED by esbuild.js
 * DO NOT EDIT MANUALLY
 *
 * Contains the bundled ABsmartly SDK (LITE) as a string constant
 * Built from dist/absmartly-sdk-lite.min.js
 * Includes: SDK + DOMChangesPlugin + CookiePlugin (NO WebVitals)
 * ~10KB smaller than full bundle for faster parsing
 */

const sdkBundleLite = "\"use strict\";(()=>{var cr=Object.defineProperty;var fr=(h,t)=>()=>(h&&(t=h(h=0)),t);var pr=(h,t)=>()=>(t||h((t={exports:{}}).exports,t),t.exports),dr=(h,t)=>{for(var i in t)cr(h,i,{get:t[i],enumerable:!0})};var Xt={};dr(Xt,{CLSThresholds:()=>ut,FCPThresholds:()=>at,INPThresholds:()=>ct,LCPThresholds:()=>pt,TTFBThresholds:()=>dt,onCLS:()=>Er,onFCP:()=>Jt,onINP:()=>Cr,onLCP:()=>Pr,onTTFB:()=>jr});function gt(h,t){return rt.get(h)||rt.set(h,new t),rt.get(h)}var Kt,we,ne,vt,ht,Pe,ie,rt,it,je,mt,be,Qt,qt,ot,qe,He,at,Jt,ut,Er,$t,nt,We,Ar,st,Ht,kr,Gt,lt,Yt,ct,Cr,ft,pt,Pr,dt,yt,jr,Zt=fr(()=>{Kt=-1,we=h=>{addEventListener(\"pageshow\",t=>{t.persisted&&(Kt=t.timeStamp,h(t))},!0)},ne=(h,t,i,u)=>{let n,r;return e=>{t.value>=0&&(e||u)&&(r=t.value-(n??0),(r||n===void 0)&&(n=t.value,t.delta=r,t.rating=((o,y)=>o>y[1]?\"poor\":o>y[0]?\"needs-improvement\":\"good\")(t.value,i),h(t)))}},vt=h=>{requestAnimationFrame(()=>requestAnimationFrame(()=>h()))},ht=()=>{let h=performance.getEntriesByType(\"navigation\")[0];if(h&&h.responseStart>0&&h.responseStart<performance.now())return h},Pe=()=>ht()?.activationStart??0,ie=(h,t=-1)=>{let i=ht(),u=\"navigate\";return Kt>=0?u=\"back-forward-cache\":i&&(document.prerendering||Pe()>0?u=\"prerender\":document.wasDiscarded?u=\"restore\":i.type&&(u=i.type.replace(/_/g,\"-\"))),{name:h,value:t,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:u}},rt=new WeakMap;it=class{t;i=0;o=[];h(t){if(t.hadRecentInput)return;let i=this.o[0],u=this.o.at(-1);this.i&&i&&u&&t.startTime-u.startTime<1e3&&t.startTime-i.startTime<5e3?(this.i+=t.value,this.o.push(t)):(this.i=t.value,this.o=[t]),this.t?.(t)}},je=(h,t,i={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(h)){let u=new PerformanceObserver(n=>{Promise.resolve().then(()=>{t(n.getEntries())})});return u.observe({type:h,buffered:!0,...i}),u}}catch{}},mt=h=>{let t=!1;return()=>{t||(h(),t=!0)}},be=-1,Qt=new Set,qt=()=>document.visibilityState!==\"hidden\"||document.prerendering?1/0:0,ot=h=>{if(document.visibilityState===\"hidden\"){if(h.type===\"visibilitychange\")for(let t of Qt)t();isFinite(be)||(be=h.type===\"visibilitychange\"?h.timeStamp:0,removeEventListener(\"prerenderingchange\",ot,!0))}},qe=()=>{if(be<0){let h=Pe();be=(document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter(i=>i.name===\"hidden\"&&i.startTime>h)[0]?.startTime)??qt(),addEventListener(\"visibilitychange\",ot,!0),addEventListener(\"prerenderingchange\",ot,!0),we(()=>{setTimeout(()=>{be=qt()})})}return{get firstHiddenTime(){return be},onHidden(h){Qt.add(h)}}},He=h=>{document.prerendering?addEventListener(\"prerenderingchange\",()=>h(),!0):h()},at=[1800,3e3],Jt=(h,t={})=>{He(()=>{let i=qe(),u,n=ie(\"FCP\"),r=je(\"paint\",e=>{for(let o of e)o.name===\"first-contentful-paint\"&&(r.disconnect(),o.startTime<i.firstHiddenTime&&(n.value=Math.max(o.startTime-Pe(),0),n.entries.push(o),u(!0)))});r&&(u=ne(h,n,at,t.reportAllChanges),we(e=>{n=ie(\"FCP\"),u=ne(h,n,at,t.reportAllChanges),vt(()=>{n.value=performance.now()-e.timeStamp,u(!0)})}))})},ut=[.1,.25],Er=(h,t={})=>{let i=qe();Jt(mt(()=>{let u,n=ie(\"CLS\",0),r=gt(t,it),e=y=>{for(let a of y)r.h(a);r.i>n.value&&(n.value=r.i,n.entries=r.o,u())},o=je(\"layout-shift\",e);o&&(u=ne(h,n,ut,t.reportAllChanges),i.onHidden(()=>{e(o.takeRecords()),u(!0)}),we(()=>{r.i=0,n=ie(\"CLS\",0),u=ne(h,n,ut,t.reportAllChanges),vt(()=>u())}),setTimeout(u))}))},$t=0,nt=1/0,We=0,Ar=h=>{for(let t of h)t.interactionId&&(nt=Math.min(nt,t.interactionId),We=Math.max(We,t.interactionId),$t=We?(We-nt)/7+1:0)},Ht=()=>st?$t:performance.interactionCount??0,kr=()=>{\"interactionCount\"in performance||st||(st=je(\"event\",Ar,{type:\"event\",buffered:!0,durationThreshold:0}))},Gt=0,lt=class{u=[];l=new Map;m;p;v(){Gt=Ht(),this.u.length=0,this.l.clear()}L(){let t=Math.min(this.u.length-1,Math.floor((Ht()-Gt)/50));return this.u[t]}h(t){if(this.m?.(t),!t.interactionId&&t.entryType!==\"first-input\")return;let i=this.u.at(-1),u=this.l.get(t.interactionId);if(u||this.u.length<10||t.duration>i.P){if(u?t.duration>u.P?(u.entries=[t],u.P=t.duration):t.duration===u.P&&t.startTime===u.entries[0].startTime&&u.entries.push(t):(u={id:t.interactionId,entries:[t],P:t.duration},this.l.set(u.id,u),this.u.push(u)),this.u.sort((n,r)=>r.P-n.P),this.u.length>10){let n=this.u.splice(10);for(let r of n)this.l.delete(r.id)}this.p?.(u)}}},Yt=h=>{let t=globalThis.requestIdleCallback||setTimeout;document.visibilityState===\"hidden\"?h():(h=mt(h),addEventListener(\"visibilitychange\",h,{once:!0,capture:!0}),t(()=>{h(),removeEventListener(\"visibilitychange\",h,{capture:!0})}))},ct=[200,500],Cr=(h,t={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;let i=qe();He(()=>{kr();let u,n=ie(\"INP\"),r=gt(t,lt),e=y=>{Yt(()=>{for(let f of y)r.h(f);let a=r.L();a&&a.P!==n.value&&(n.value=a.P,n.entries=a.entries,u())})},o=je(\"event\",e,{durationThreshold:t.durationThreshold??40});u=ne(h,n,ct,t.reportAllChanges),o&&(o.observe({type:\"first-input\",buffered:!0}),i.onHidden(()=>{e(o.takeRecords()),u(!0)}),we(()=>{r.v(),n=ie(\"INP\"),u=ne(h,n,ct,t.reportAllChanges)}))})},ft=class{m;h(t){this.m?.(t)}},pt=[2500,4e3],Pr=(h,t={})=>{He(()=>{let i=qe(),u,n=ie(\"LCP\"),r=gt(t,ft),e=y=>{t.reportAllChanges||(y=y.slice(-1));for(let a of y)r.h(a),a.startTime<i.firstHiddenTime&&(n.value=Math.max(a.startTime-Pe(),0),n.entries=[a],u())},o=je(\"largest-contentful-paint\",e);if(o){u=ne(h,n,pt,t.reportAllChanges);let y=mt(()=>{e(o.takeRecords()),o.disconnect(),u(!0)}),a=f=>{f.isTrusted&&(Yt(y),removeEventListener(f.type,a,{capture:!0}))};for(let f of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(f,a,{capture:!0});we(f=>{n=ie(\"LCP\"),u=ne(h,n,pt,t.reportAllChanges),vt(()=>{n.value=performance.now()-f.timeStamp,u(!0)})})}})},dt=[800,1800],yt=h=>{document.prerendering?He(()=>yt(h)):document.readyState!==\"complete\"?addEventListener(\"load\",()=>yt(h),!0):setTimeout(h)},jr=(h,t={})=>{let i=ie(\"TTFB\"),u=ne(h,i,dt,t.reportAllChanges);yt(()=>{let n=ht();n&&(i.value=Math.max(n.responseStart-Pe(),0),i.entries=[n],u(!0),we(()=>{i=ie(\"TTFB\",0),u=ne(h,i,dt,t.reportAllChanges),u(!0)}))})}});var ar=pr((Je,Ot)=>{(function(h,t){typeof Je==\"object\"&&typeof Ot==\"object\"?Ot.exports=t():typeof define==\"function\"&&define.amd?define([],t):typeof Je==\"object\"?Je.absmartly=t():h.absmartly=t()})(self,function(){return function(){var h={745:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){var p=typeof Symbol<\"u\"&&l[Symbol.iterator]||l[\"@@iterator\"];if(!p){if(Array.isArray(l)||(p=function(b,_){if(b){if(typeof b==\"string\")return a(b,_);var A=Object.prototype.toString.call(b).slice(8,-1);if(A===\"Object\"&&b.constructor&&(A=b.constructor.name),A===\"Map\"||A===\"Set\")return Array.from(b);if(A===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return a(b,_)}}(l))||s&&l&&typeof l.length==\"number\"){p&&(l=p);var v=0,x=function(){};return{s:x,n:function(){return v>=l.length?{done:!0}:{done:!1,value:l[v++]}},e:function(b){throw b},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w,O=!0,S=!1;return{s:function(){p=p.call(l)},n:function(){var b=p.next();return O=b.done,b},e:function(b){S=!0,w=b},f:function(){try{O||p.return==null||p.return()}finally{if(S)throw w}}}}function a(l,s){(s==null||s>l.length)&&(s=l.length);for(var p=0,v=new Array(s);p<s;p++)v[p]=l[p];return v}function f(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function g(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function m(l,s,p){return s&&g(l.prototype,s),p&&g(l,p),Object.defineProperty(l,\"prototype\",{writable:!1}),l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortController=r.AbortSignal=void 0;var d=function(){function l(){f(this,l),this.aborted=!1,this._events={}}return m(l,[{key:\"addEventListener\",value:function(s,p){var v=this._events[s];v||(v=[],this._events[s]=v),v.push(p)}},{key:\"removeEventListener\",value:function(s,p){var v=this._events[s];if(v){var x=v.findIndex(function(w){return w===p});x!==-1&&(v.splice(x,1),v.length===0&&delete this._events[s])}}},{key:\"dispatchEvent\",value:function(s){this[\"on\".concat(s.type)]&&this[\"on\".concat(s.type)](s);var p=this._events[s.type];if(p){var v,x=y(p);try{for(x.s();!(v=x.n()).done;)v.value.call(null,s)}catch(w){x.e(w)}finally{x.f()}}}},{key:\"toString\",value:function(){return\"[object AbortSignal]\"}}]),l}();r.AbortSignal=d;var c=function(){function l(){f(this,l),this.signal=new d}return m(l,[{key:\"abort\",value:function(){var s;try{s=new Event(\"abort\")}catch{s={type:\"abort\",bubbles:!1,cancelable:!1}}this.signal.aborted=!0,this.signal.dispatchEvent(s)}},{key:\"toString\",value:function(){return\"[object AbortController]\"}}]),l}();r.AbortController=c,typeof Symbol<\"u\"&&Symbol.toStringTag!==void 0&&(Object.defineProperty(d.prototype,Symbol.toStringTag,{configurable:!0,value:\"AbortSignal\"}),Object.defineProperty(c.prototype,Symbol.toStringTag,{configurable:!0,value:\"AbortController\"})),r.default=c},6354:function(n,r,e){\"use strict\";var o=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortController=void 0;var y=e(1231),a=o(e(745));r.AbortController=(0,y.isLongLivedApp)()&&window.AbortController?window.AbortController:(0,y.isWorker)()&&self.AbortController?self.AbortController:e.g&&e.g.AbortController?e.g.AbortController:a.default},982:function(n,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.insertUniqueSorted=void 0,r.insertUniqueSorted=function(e,o,y){for(var a=0,f=e.length-1;a<=f;){var g=Math.floor(a+(f-a)/2);if(y(e[g],o))a=g+1;else{if(!y(o,e[g]))return;f=g-1}}e.splice(a,0,o)}},2786:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(d){return typeof d}:function(d){return d&&typeof Symbol==\"function\"&&d.constructor===Symbol&&d!==Symbol.prototype?\"symbol\":typeof d},o(m)}function y(m,d){for(var c=0;c<d.length;c++){var l=d[c];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,p=void 0,p=function(v,x){if(o(v)!==\"object\"||v===null)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var O=w.call(v,x||\"default\");if(o(O)!==\"object\")return O;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(v)}(s,\"string\"),o(p)===\"symbol\"?p:String(p)),l)}var s,p}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.VariantAssigner=void 0;var a=e(1231),f=e(7433),g=function(){function m(s){(function(p,v){if(!(p instanceof v))throw new TypeError(\"Cannot call a class as a function\")})(this,m),this._unitHash=(0,f.murmur3_32)((0,a.stringToUint8Array)(s).buffer)}var d,c,l;return d=m,(c=[{key:\"assign\",value:function(s,p,v){var x=this._probability(p,v);return(0,a.chooseVariant)(s,x)}},{key:\"_probability\",value:function(s,p){var v=this._unitHash,x=new ArrayBuffer(12),w=new DataView(x);return w.setUint32(0,p,!0),w.setUint32(4,s,!0),w.setUint32(8,v,!0),(0,f.murmur3_32)(x)*(1/4294967295)}}])&&y(d.prototype,c),l&&y(d,l),Object.defineProperty(d,\"prototype\",{writable:!1}),m}();r.VariantAssigner=g},7578:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}e(9601),e(6078),e(9653);var a=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,\"__esModule\",{value:!0});var f=a(e(3651)),g=e(6354),m=e(2928),d=e(1231),c=function(){function l(x){(function(_,A){if(!(_ instanceof A))throw new TypeError(\"Cannot call a class as a function\")})(this,l),this._opts=Object.assign({agent:\"javascript-client\",apiKey:void 0,application:void 0,endpoint:void 0,environment:void 0,retries:5,timeout:3e3,keepalive:!0},x);for(var w=0,O=[\"agent\",\"application\",\"apiKey\",\"endpoint\",\"environment\"];w<O.length;w++){var S=O[w];if(!(S in this._opts)||this._opts[S]===void 0)throw new Error(\"Missing '\".concat(S,\"' in options argument\"));var b=this._opts[S];if(typeof b!=\"string\"||b.length===0){if(S===\"application\"&&b!==null&&o(b)===\"object\"&&\"name\"in b)continue;throw new Error(\"Invalid '\".concat(S,\"' in options argument\"))}}typeof this._opts.application==\"string\"&&(this._opts.application={name:this._opts.application,version:0}),this._delay=50}var s,p,v;return s=l,p=[{key:\"getContext\",value:function(x){return this.getUnauthed(Object.assign(Object.assign({},x),{path:\"/context\",query:{application:(0,d.getApplicationName)(this._opts.application),environment:this._opts.environment}}))}},{key:\"createContext\",value:function(x,w){var O={units:x.units};return this.post(Object.assign(Object.assign({},w),{path:\"/context\",body:O}))}},{key:\"publish\",value:function(x,w){var O={units:x.units,hashed:x.hashed,publishedAt:x.publishedAt||Date.now()};return Array.isArray(x.goals)&&x.goals.length>0&&(O.goals=x.goals),Array.isArray(x.exposures)&&x.exposures.length>0&&(O.exposures=x.exposures),Array.isArray(x.attributes)&&x.attributes.length>0&&(O.attributes=x.attributes),this.put(Object.assign(Object.assign({},w),{path:\"/context\",body:O}))}},{key:\"request\",value:function(x){var w,O,S=this,b=\"\".concat(this._opts.endpoint).concat(x.path);if(x.query){var _=Object.keys(x.query);if(_.length>0){var A=_.map(function(I){return x.query?\"\".concat(I,\"=\").concat(encodeURIComponent(x.query[I])):null}).join(\"&\");b=\"\".concat(b,\"?\").concat(A)}}var E=new g.AbortController,k=function(){var I={method:x.method,body:x.body!==void 0?JSON.stringify(x.body,null,0):void 0,signal:E.signal,keepalive:S._opts.keepalive};return x.auth&&(I.headers={\"Content-Type\":\"application/json\",\"X-API-Key\":S._opts.apiKey,\"X-Agent\":S._opts.agent,\"X-Environment\":S._opts.environment,\"X-Application\":(0,d.getApplicationName)(S._opts.application),\"X-Application-Version\":(0,d.getApplicationVersion)(S._opts.application)}),(0,f.default)(b,I).then(function(N){if(!N.ok){var B=N.status>=400&&N.status<500;return N.text().then(function(q){var F=new Error(q!==null&&q.length>0?q:N.statusText);return F._bail=B,Promise.reject(F)})}return N.json()})},P=function I(N){return new Promise(function(B,q){var F=setTimeout(function(){delete I.reject,B()},N);I.reject=function(V){clearTimeout(F),q(V)}})},j=function I(N,B){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return delete I.timedout,k().catch(function(V){if(console.warn(V),V._bail||N<=0)throw new Error(V.message);if(q>=N)throw new m.RetryError(q,V,b);if(F>=B||V.name===\"AbortError\")throw I.timedout?new m.TimeoutError(B):V;var W=(1<<q)*S._delay+.5*Math.random()*S._delay;return F+W>B&&(W=B-F),P(W).then(function(){return I(N,B,q+1,F+W)})})},T=function(){P.reject?P.reject(new m.AbortError):E.abort()};x.signal&&x.signal.addEventListener(\"abort\",T);var M=x.timeout||this._opts.timeout||0,R=M>0?setTimeout(function(){j.timedout=!0,T()},M):0,L=function(){clearTimeout(R),x.signal&&x.signal.removeEventListener(\"abort\",T)};return j((w=this._opts.retries)!==null&&w!==void 0?w:5,(O=this._opts.timeout)!==null&&O!==void 0?O:3e3).then(function(I){return L(),I}).catch(function(I){throw L(),I})}},{key:\"post\",value:function(x){return this.request(Object.assign(Object.assign({},x),{auth:!0,method:\"POST\"}))}},{key:\"put\",value:function(x){return this.request(Object.assign(Object.assign({},x),{auth:!0,method:\"PUT\"}))}},{key:\"getUnauthed\",value:function(x){return this.request(Object.assign(Object.assign({},x),{method:\"GET\"}))}}],p&&y(s.prototype,p),v&&y(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),l}();r.default=c},7468:function(n,r,e){\"use strict\";function o(m,d){return function(c){if(Array.isArray(c))return c}(m)||function(c,l){var s=c==null?null:typeof Symbol<\"u\"&&c[Symbol.iterator]||c[\"@@iterator\"];if(s!=null){var p,v,x,w,O=[],S=!0,b=!1;try{if(x=(s=s.call(c)).next,l===0){if(Object(s)!==s)return;S=!1}else for(;!(S=(p=x.call(s)).done)&&(O.push(p.value),O.length!==l);S=!0);}catch(_){b=!0,v=_}finally{try{if(!S&&s.return!=null&&(w=s.return(),Object(w)!==w))return}finally{if(b)throw v}}return O}}(m,d)||function(c,l){if(c){if(typeof c==\"string\")return y(c,l);var s=Object.prototype.toString.call(c).slice(8,-1);if(s===\"Object\"&&c.constructor&&(s=c.constructor.name),s===\"Map\"||s===\"Set\")return Array.from(c);if(s===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return y(c,l)}}(m,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y(m,d){(d==null||d>m.length)&&(d=m.length);for(var c=0,l=new Array(d);c<d;c++)l[c]=m[c];return l}e(9720);var a=function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.mergeConfig=void 0;var f=a(e(1697)),g=e(1231);r.mergeConfig=function(m,d){for(var c=(0,f.default)(d),l=m.variableKeys(),s=function(){for(var x=o(v[p],2),w=x[0],O=x[1],S=c,b=w.split(\".\"),_=function(){var E=b[A];if(\"_\".concat(E,\"_setter\")in S)return console.error(\"Config key '\".concat(b.slice(0,A+1).join(\".\"),\"' already set by experiment '\").concat(S[\"_\".concat(E,\"_setter\")],\"'.\")),S=void 0,\"break\";if(E in S&&A<b.length-1&&((0,g.isObject)(S[E])?S=S[E]:(console.warn(\"Config key '\".concat(w,\"' for experiment '\").concat(O,\"' is overriding non-object value at '\").concat(b.slice(0,A+1).join(\".\"),\"' with an object.\")),S=S[E]={})),A===b.length-1){var k=S[E];Object.defineProperty(S,\"_\".concat(E,\"_setter\"),{value:O,writable:!1}),Object.defineProperty(S,E,{get:function(){return m.variableValue(w,k)}})}},A=0;A<b.length&&_()!==\"break\";++A);},p=0,v=Object.entries(l);p<v.length;p++)s();return c}},7621:function(n,r,e){\"use strict\";function o(x,w){var O=typeof Symbol<\"u\"&&x[Symbol.iterator]||x[\"@@iterator\"];if(!O){if(Array.isArray(x)||(O=a(x))||w&&x&&typeof x.length==\"number\"){O&&(x=O);var S=0,b=function(){};return{s:b,n:function(){return S>=x.length?{done:!0}:{done:!1,value:x[S++]}},e:function(k){throw k},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,A=!0,E=!1;return{s:function(){O=O.call(x)},n:function(){var k=O.next();return A=k.done,k},e:function(k){E=!0,_=k},f:function(){try{A||O.return==null||O.return()}finally{if(E)throw _}}}}function y(x,w){return function(O){if(Array.isArray(O))return O}(x)||function(O,S){var b=O==null?null:typeof Symbol<\"u\"&&O[Symbol.iterator]||O[\"@@iterator\"];if(b!=null){var _,A,E,k,P=[],j=!0,T=!1;try{if(E=(b=b.call(O)).next,S===0){if(Object(b)!==b)return;j=!1}else for(;!(j=(_=E.call(b)).done)&&(P.push(_.value),P.length!==S);j=!0);}catch(M){T=!0,A=M}finally{try{if(!j&&b.return!=null&&(k=b.return(),Object(k)!==k))return}finally{if(T)throw A}}return P}}(x,w)||a(x,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(x,w){if(x){if(typeof x==\"string\")return f(x,w);var O=Object.prototype.toString.call(x).slice(8,-1);return O===\"Object\"&&x.constructor&&(O=x.constructor.name),O===\"Map\"||O===\"Set\"?Array.from(x):O===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?f(x,w):void 0}}function f(x,w){(w==null||w>x.length)&&(w=x.length);for(var O=0,S=new Array(w);O<w;O++)S[O]=x[O];return S}function g(x){return g=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(w){return typeof w}:function(w){return w&&typeof Symbol==\"function\"&&w.constructor===Symbol&&w!==Symbol.prototype?\"symbol\":typeof w},g(x)}function m(x,w){for(var O=0;O<w.length;O++){var S=w[O];S.enumerable=S.enumerable||!1,S.configurable=!0,\"value\"in S&&(S.writable=!0),Object.defineProperty(x,d(S.key),S)}}function d(x){var w=function(O,S){if(g(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(g(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\");return g(w)===\"symbol\"?w:String(w)}e(9720),e(9601),e(9826),e(9653),e(6078),Object.defineProperty(r,\"__esModule\",{value:!0});var c=e(1231),l=e(2786),s=e(7682),p=e(982),v=function(){function x(b,_,A,E){var k=this;(function(P,j){if(!(P instanceof j))throw new TypeError(\"Cannot call a class as a function\")})(this,x),this._sdk=b,this._publisher=_.publisher||this._sdk.getContextPublisher(),this._dataProvider=_.dataProvider||this._sdk.getContextDataProvider(),this._eventLogger=_.eventLogger||this._sdk.getEventLogger(),this._opts=_,this._pending=0,this._failed=!1,this._finalized=!1,this._attrs=[],this._goals=[],this._exposures=[],this._overrides={},this._cassignments={},this._units={},this._assigners={},this._audienceMatcher=new s.AudienceMatcher,A.units&&this.units(A.units),(0,c.isPromise)(E)?this._promise=E.then(function(P){k._init(P),delete k._promise,k._logEvent(\"ready\",P),k.pending()>0&&k._setTimeout()}).catch(function(P){k._init({}),k._failed=!0,delete k._promise,k._logError(P)}):(this._init(E),this._logEvent(\"ready\",E))}var w,O,S;return w=x,O=[{key:\"isReady\",value:function(){return this._promise===void 0}},{key:\"isFinalizing\",value:function(){return!this._finalized&&this._finalizing!=null}},{key:\"isFinalized\",value:function(){return this._finalized}},{key:\"isFailed\",value:function(){return this._failed}},{key:\"ready\",value:function(){var b=this;return this.isReady()?Promise.resolve(!0):new Promise(function(_){var A;(A=b._promise)===null||A===void 0||A.then(function(){return _(!0)}).catch(function(E){return _(E)})})}},{key:\"pending\",value:function(){return this._pending}},{key:\"data\",value:function(){return this._checkReady(),this._data}},{key:\"eventLogger\",value:function(){return this._eventLogger}},{key:\"publisher\",value:function(){return this._publisher}},{key:\"provider\",value:function(){return this._dataProvider}},{key:\"publish\",value:function(b){var _=this;return this._checkReady(!0),new Promise(function(A,E){_._flush(function(k){k?E(k):A()},b)})}},{key:\"refresh\",value:function(b){var _=this;return this._checkReady(!0),new Promise(function(A,E){_._refresh(function(k){k?E(k):A()},b)})}},{key:\"getUnit\",value:function(b){return this._units[b]}},{key:\"unit\",value:function(b,_){switch(this._checkNotFinalized(),g(_)){case\"string\":if((_=_.trim()).length===0)throw new Error(\"Unit '\".concat(b,\"' UID must not be blank.\"));break;case\"number\":break;default:throw new Error(\"Unit '\".concat(b,\"' must be a string or a number.\"))}var A=this._units[b];if(A!==void 0&&A!==_)throw new Error(\"Unit '\".concat(b,\"' UID already set.\"));this._units[b]=_}},{key:\"getUnits\",value:function(){return this._units}},{key:\"units\",value:function(b){var _=this;Object.entries(b).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.unit(k,P)})}},{key:\"getAttribute\",value:function(b){var _;return this._attrs.forEach(function(A){A.name===b&&(_=A.value)}),_}},{key:\"attribute\",value:function(b,_){this._checkNotFinalized(),this._attrs.push({name:b,value:_,setAt:Date.now()})}},{key:\"getAttributes\",value:function(){var b={};return this._attrs.map(function(_){return[_.name,_.value]}).forEach(function(_){var A=y(_,2),E=A[0],k=A[1];b[E]=k}),b}},{key:\"attributes\",value:function(b){var _=this;Object.entries(b).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.attribute(k,P)})}},{key:\"peek\",value:function(b){return this._checkReady(!0),this._peek(b).variant}},{key:\"treatment\",value:function(b){return this._checkReady(!0),this._treatment(b).variant}},{key:\"track\",value:function(b,_){return this._checkNotFinalized(),this._track(b,_)}},{key:\"finalize\",value:function(b){return this._finalize(b)}},{key:\"experiments\",value:function(){var b;return this._checkReady(),(b=this._data.experiments)===null||b===void 0?void 0:b.map(function(_){return _.name})}},{key:\"variableValue\",value:function(b,_){return this._checkReady(!0),this._variableValue(b,_)}},{key:\"peekVariableValue\",value:function(b,_){return this._checkReady(!0),this._peekVariable(b,_)}},{key:\"variableKeys\",value:function(){this._checkReady(!0);var b={};return Object.entries(this._indexVariables).forEach(function(_){var A=y(_,2),E=A[0];A[1].forEach(function(k){b[E]?b[E].push(k.data.name):b[E]=[k.data.name]})}),b}},{key:\"override\",value:function(b,_){var A,E,k;this._overrides=Object.assign(this._overrides,(A={},k=_,(E=d(E=b))in A?Object.defineProperty(A,E,{value:k,enumerable:!0,configurable:!0,writable:!0}):A[E]=k,A))}},{key:\"overrides\",value:function(b){var _=this;Object.entries(b).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.override(k,P)})}},{key:\"customAssignment\",value:function(b,_){this._checkNotFinalized(),this._cassignments[b]=_}},{key:\"customAssignments\",value:function(b){var _=this;Object.entries(b).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.customAssignment(k,P)})}},{key:\"_checkNotFinalized\",value:function(){if(this.isFinalized())throw new Error(\"ABSmartly Context is finalized.\");if(this.isFinalizing())throw new Error(\"ABSmartly Context is finalizing.\")}},{key:\"_checkReady\",value:function(b){if(!this.isReady())throw new Error(\"ABSmartly Context is not yet ready.\");b&&this._checkNotFinalized()}},{key:\"_assign\",value:function(b){var _=b in this._cassignments,A=b in this._overrides,E=b in this._index?this._index[b]:null;if(b in this._assignments){var k=this._assignments[b];if(A){if(k.overridden&&k.variant===this._overrides[b])return k}else if(E==null){if(!k.assigned)return k}else if((!_||this._cassignments[b]===k.variant)&&function(N,B){return N.id===B.id&&N.unitType===B.unitType&&N.iteration===B.iteration&&N.fullOnVariant===B.fullOnVariant&&(0,c.arrayEqualsShallow)(N.trafficSplit,B.trafficSplit)}(E.data,k))return k}var P={id:0,iteration:0,fullOnVariant:0,unitType:null,variant:0,overridden:!1,assigned:!1,exposed:!1,eligible:!0,fullOn:!1,custom:!1,audienceMismatch:!1};if(this._assignments[b]=P,A)E!=null&&(P.id=E.data.id,P.unitType=E.data.unitType),P.overridden=!0,P.variant=this._overrides[b];else if(E!=null){var j=E.data.unitType;if(E.data.audience&&E.data.audience.length>0){var T={};this._attrs.forEach(function(N){T[N.name]=N.value});var M=this._audienceMatcher.evaluate(E.data.audience,T);typeof M==\"boolean\"&&(P.audienceMismatch=!M)}if(E.data.audienceStrict&&P.audienceMismatch)P.variant=0;else if(E.data.fullOnVariant===0){if(j!==null&&j in this._units){var R=this._unitHash(j);if(R!==null){var L=j in this._assigners?this._assigners[j]:this._assigners[j]=new l.VariantAssigner(R),I=L.assign(E.data.trafficSplit,E.data.trafficSeedHi,E.data.trafficSeedLo)===1;P.assigned=!0,P.eligible=I,I?_?(P.variant=this._cassignments[b],P.custom=!0):P.variant=L.assign(E.data.split,E.data.seedHi,E.data.seedLo):P.variant=0}}}else P.assigned=!0,P.eligible=!0,P.variant=E.data.fullOnVariant,P.fullOn=!0;P.unitType=j,P.id=E.data.id,P.iteration=E.data.iteration,P.trafficSplit=E.data.trafficSplit,P.fullOnVariant=E.data.fullOnVariant}return E!=null&&P.variant<E.data.variants.length&&(P.variables=E.variables[P.variant]),P}},{key:\"_peek\",value:function(b){return this._assign(b)}},{key:\"_treatment\",value:function(b){var _=this._assign(b);return _.exposed||(_.exposed=!0,this._queueExposure(b,_)),_}},{key:\"_queueExposure\",value:function(b,_){var A={id:_.id,name:b,exposedAt:Date.now(),unit:_.unitType,variant:_.variant,assigned:_.assigned,eligible:_.eligible,overridden:_.overridden,fullOn:_.fullOn,custom:_.custom,audienceMismatch:_.audienceMismatch};this._logEvent(\"exposure\",A),this._exposures.push(A),this._pending++,this._setTimeout()}},{key:\"_customFieldKeys\",value:function(){var b=new Set;if(!this._data.experiments)return[];var _,A=o(this._data.experiments);try{for(A.s();!(_=A.n()).done;){var E=_.value;if(E.customFieldValues!=null){var k,P=o(E.customFieldValues);try{for(P.s();!(k=P.n()).done;){var j=k.value;b.add(j.name)}}catch(T){P.e(T)}finally{P.f()}}}}catch(T){A.e(T)}finally{A.f()}return Array.from(b)}},{key:\"customFieldKeys\",value:function(){return this._checkReady(!0),this._customFieldKeys()}},{key:\"_customFieldValue\",value:function(b,_){var A,E=this._index[b];if(E!=null){var k=(A=E.data.customFieldValues)===null||A===void 0?void 0:A.find(function(P){return P.name===_});if(k!=null)switch(k.type){case\"text\":case\"string\":return k.value;case\"number\":return Number(k.value);case\"json\":try{return k.value===\"null\"?null:k.value===\"\"?\"\":JSON.parse(k.value)}catch{return console.error(\"Failed to parse JSON custom field value '\".concat(_,\"' for experiment '\").concat(b,\"'\")),null}case\"boolean\":return k.value===\"true\";default:return console.error(\"Unknown custom field type '\".concat(k.type,\"' for experiment '\").concat(b,\"' and key '\").concat(_,\"' - you may need to upgrade to the latest SDK version\")),null}}return null}},{key:\"customFieldValue\",value:function(b,_){return this._checkReady(!0),this._customFieldValue(b,_)}},{key:\"_customFieldValueType\",value:function(b,_){var A,E=this._index[b];if(E!=null){var k=(A=E.data.customFieldValues)===null||A===void 0?void 0:A.find(function(P){return P.name===_});if(k!=null)return k.type}return null}},{key:\"customFieldValueType\",value:function(b,_){return this._checkReady(!0),this._customFieldValueType(b,_)}},{key:\"_variableValue\",value:function(b,_){for(var A in this._indexVariables[b]){var E=this._indexVariables[b][A].data.name,k=this._assign(E);if(k.variables!==void 0&&(k.exposed||(k.exposed=!0,this._queueExposure(E,k)),b in k.variables&&(k.assigned||k.overridden)))return k.variables[b]}return _}},{key:\"_peekVariable\",value:function(b,_){for(var A in this._indexVariables[b]){var E=this._indexVariables[b][A].data.name,k=this._assign(E);if(k.variables!==void 0&&b in k.variables&&(k.assigned||k.overridden))return k.variables[b]}return _}},{key:\"_validateGoal\",value:function(b,_){if(_!=null){if(!(0,c.isObject)(_))throw new Error(\"Goal '\".concat(b,\"' properties must be of type object.\"));return Object.assign({},_)}return null}},{key:\"_track\",value:function(b,_){var A={name:b,properties:this._validateGoal(b,_),achievedAt:Date.now()};this._logEvent(\"goal\",A),this._goals.push(A),this._pending++,this._setTimeout()}},{key:\"_setTimeout\",value:function(){var b=this;this.isReady()&&this._publishTimeout===void 0&&this._opts.publishDelay>=0&&(this._publishTimeout=setTimeout(function(){b._flush()},this._opts.publishDelay))}},{key:\"_flush\",value:function(b,_){var A=this;if(this._publishTimeout!==void 0&&(clearTimeout(this._publishTimeout),delete this._publishTimeout),this._pending===0)typeof b==\"function\"&&b();else{if(this._failed)typeof b==\"function\"&&b();else{var E={publishedAt:Date.now(),units:Object.entries(this._units).map(function(k){return{type:k[0],uid:A._unitHash(k[0])}}),hashed:!0};this._goals.length>0&&(E.goals=this._goals.map(function(k){return{name:k.name,achievedAt:k.achievedAt,properties:k.properties}})),this._exposures.length>0&&(E.exposures=this._exposures.map(function(k){return{id:k.id,name:k.name,unit:k.unit,exposedAt:k.exposedAt,variant:k.variant,assigned:k.assigned,eligible:k.eligible,overridden:k.overridden,fullOn:k.fullOn,custom:k.custom,audienceMismatch:k.audienceMismatch}})),this._attrs.length>0&&(E.attributes=this._attrs.map(function(k){return{name:k.name,value:k.value,setAt:k.setAt}})),this._publisher.publish(E,this._sdk,this,_).then(function(){A._logEvent(\"publish\",E),typeof b==\"function\"&&b()}).catch(function(k){A._logError(k),typeof b==\"function\"&&b(k)})}this._pending=0,this._exposures=[],this._goals=[]}}},{key:\"_refresh\",value:function(b,_){var A=this;this._failed?typeof b==\"function\"&&b():this._dataProvider.getContextData(this._sdk,_).then(function(E){A._init(E,A._assignments),A._logEvent(\"refresh\",E),typeof b==\"function\"&&b()}).catch(function(E){A._logError(E),typeof b==\"function\"&&b(E)})}},{key:\"_logEvent\",value:function(b,_){this._eventLogger&&this._eventLogger(this,b,_)}},{key:\"_logError\",value:function(b){this._eventLogger&&this._eventLogger(this,\"error\",b)}},{key:\"_unitHash\",value:function(b){if(this._hashes||(this._hashes={}),!(b in this._hashes)){var _=b in this._units?(0,c.hashUnit)(this._units[b]):null;return this._hashes[b]=_,_}return this._hashes[b]}},{key:\"_init\",value:function(b){var _=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._data=b;var E={},k={};(b.experiments||[]).forEach(function(P){var j=[],T={data:P,variables:j};E[P.name]=T,P.variants.forEach(function(M,R){var L=M.config,I=L!=null&&L.length>0?JSON.parse(L):{};Object.keys(I).forEach(function(N){var B=T;k[N]?(0,p.insertUniqueSorted)(k[N],B,function(q,F){return q.data.id<F.data.id}):k[N]=[B]}),j[R]=I})}),this._index=E,this._indexVariables=k,this._assignments=A,!this._failed&&this._opts.refreshPeriod>0&&!this._refreshInterval&&(this._refreshInterval=setInterval(function(){return _._refresh()},this._opts.refreshPeriod))}},{key:\"_finalize\",value:function(b){var _=this;return this._finalized?Promise.resolve():this._finalizing?this._finalizing:(this._refreshInterval!==void 0&&(clearInterval(this._refreshInterval),delete this._refreshInterval),this.pending()>0?(this._finalizing=new Promise(function(A,E){_._flush(function(k){_._finalizing=null,k?E(k):(_._finalized=!0,_._logEvent(\"finalize\"),A())},b)}),this._finalizing):(this._finalized=!0,this._logEvent(\"finalize\"),Promise.resolve()))}}],O&&m(w.prototype,O),S&&m(w,S),Object.defineProperty(w,\"prototype\",{writable:!1}),x}();r.default=v},2928:function(n,r,e){\"use strict\";function o(S){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(b){return typeof b}:function(b){return b&&typeof Symbol==\"function\"&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b},o(S)}function y(S,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,\"value\"in A&&(A.writable=!0),Object.defineProperty(S,(E=A.key,k=void 0,k=function(P,j){if(o(P)!==\"object\"||P===null)return P;var T=P[Symbol.toPrimitive];if(T!==void 0){var M=T.call(P,j||\"default\");if(o(M)!==\"object\")return M;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(j===\"string\"?String:Number)(P)}(E,\"string\"),o(k)===\"symbol\"?k:String(k)),A)}var E,k}function a(S,b,_){return b&&y(S.prototype,b),_&&y(S,_),Object.defineProperty(S,\"prototype\",{writable:!1}),S}function f(S,b){if(!(S instanceof b))throw new TypeError(\"Cannot call a class as a function\")}function g(S,b){if(typeof b!=\"function\"&&b!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),b&&p(S,b)}function m(S){var b=s();return function(){var _,A=v(S);if(b){var E=v(this).constructor;_=Reflect.construct(A,arguments,E)}else _=A.apply(this,arguments);return d(this,_)}}function d(S,b){if(b&&(o(b)===\"object\"||typeof b==\"function\"))return b;if(b!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(_){if(_===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return _}(S)}function c(S){var b=typeof Map==\"function\"?new Map:void 0;return c=function(_){if(_===null||(A=_,Function.toString.call(A).indexOf(\"[native code]\")===-1))return _;var A;if(typeof _!=\"function\")throw new TypeError(\"Super expression must either be null or a function\");if(b!==void 0){if(b.has(_))return b.get(_);b.set(_,E)}function E(){return l(_,arguments,v(this).constructor)}return E.prototype=Object.create(_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),p(E,_)},c(S)}function l(S,b,_){return l=s()?Reflect.construct.bind():function(A,E,k){var P=[null];P.push.apply(P,E);var j=new(Function.bind.apply(A,P));return k&&p(j,k.prototype),j},l.apply(null,arguments)}function s(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(S,b){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,A){return _.__proto__=A,_},p(S,b)}function v(S){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},v(S)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortError=r.RetryError=r.TimeoutError=void 0;var x=function(S){g(_,S);var b=m(_);function _(A){var E;return f(this,_),(E=b.call(this,\"Timeout exceeded.\")).name=\"TimeoutError\",E.timeout=A,E}return a(_)}(c(Error));r.TimeoutError=x;var w=function(S){g(_,S);var b=m(_);function _(A,E,k){var P;return f(this,_),(P=b.call(this,\"Retries exhausted. URL: \".concat(k,\" - Last Error: \").concat(E.message))).name=\"RetryError\",P.retries=A,P.exception=E,P}return a(_)}(c(Error));r.RetryError=w;var O=function(S){g(_,S);var b=m(_);function _(A){var E;return f(this,_),(E=b.call(this,A)).name=\"AbortError\",E}return a(_)}(c(Error));r.AbortError=O},5525:function(n,r,e){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.fetch=void 0;var o=e(2928);function y(a,f){return f=f||{},new Promise(function(g,m){var d=new XMLHttpRequest,c=[],l=[],s={},p=function(){d.abort()},v=f.signal?function(){var O;return(O=f.signal)===null||O===void 0?void 0:O.removeEventListener(\"abort\",p)}:function(){},x=function O(){return{ok:(d.status/100|0)==2,statusText:d.statusText,status:d.status,url:d.responseURL,text:function(){return Promise.resolve(d.responseText)},json:function(){return Promise.resolve(JSON.parse(d.responseText))},blob:function(){return Promise.resolve(new Blob([d.response]))},clone:O,headers:{keys:function(){return c},entries:function(){return l},get:function(S){return s[S.toLowerCase()]},has:function(S){return S.toLowerCase()in s}}}};for(var w in d.open(f.method||\"get\",a,!0),d.onload=function(){d.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(O,S,b){return c.push(S=S.toLowerCase()),l.push([S,b]),s[S]=s[S]?\"\".concat(s[S],\",\").concat(b):b,O}),v(),g(x())},f.signal&&f.signal.addEventListener(\"abort\",p),d.onerror=function(O){v(),m(O)},d.onabort=function(){v(),m(new o.AbortError(\"The user aborted a request.\"))},d.withCredentials=f.credentials===\"include\",f.headers)d.setRequestHeader(w,f.headers[w]);d.send(f.body||null)})}r.fetch=y,r.default=y},3651:function(n,r,e){\"use strict\";var o=Object.create?function(c,l,s,p){p===void 0&&(p=s);var v=Object.getOwnPropertyDescriptor(l,s);v&&!(\"get\"in v?!l.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return l[s]}}),Object.defineProperty(c,p,v)}:function(c,l,s,p){p===void 0&&(p=s),c[p]=l[s]},y=Object.create?function(c,l){Object.defineProperty(c,\"default\",{enumerable:!0,value:l})}:function(c,l){c.default=l},a=function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var s in c)s!==\"default\"&&Object.prototype.hasOwnProperty.call(c,s)&&o(l,c,s);return y(l,c),l},f=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,\"__esModule\",{value:!0});var g=e(1231),m=f(e(5525)),d=(0,g.isLongLivedApp)()?window.fetch?window.fetch.bind(window):m.default:(0,g.isWorker)()?self.fetch?self.fetch.bind(self):m.default:e.g?e.g.fetch?e.g.fetch.bind(e.g):function(c,l){return new Promise(function(s,p){Promise.resolve().then(function(){return a(e(3300))}).then(function(v){v.default(c.replace(/^\\/\\//g,\"https://\"),l).then(s).catch(p)}).catch(p)})}:void 0;r.default=d},2299:function(n,r,e){\"use strict\";function o(d){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(c){return typeof c}:function(c){return c&&typeof Symbol==\"function\"&&c.constructor===Symbol&&c!==Symbol.prototype?\"symbol\":typeof c},o(d)}function y(d,c){return function(l){if(Array.isArray(l))return l}(d)||function(l,s){var p=l==null?null:typeof Symbol<\"u\"&&l[Symbol.iterator]||l[\"@@iterator\"];if(p!=null){var v,x,w,O,S=[],b=!0,_=!1;try{if(w=(p=p.call(l)).next,s===0){if(Object(p)!==p)return;b=!1}else for(;!(b=(v=w.call(p)).done)&&(S.push(v.value),S.length!==s);b=!0);}catch(A){_=!0,x=A}finally{try{if(!b&&p.return!=null&&(O=p.return(),Object(O)!==O))return}finally{if(_)throw x}}return S}}(d,c)||function(l,s){if(l){if(typeof l==\"string\")return a(l,s);var p=Object.prototype.toString.call(l).slice(8,-1);if(p===\"Object\"&&l.constructor&&(p=l.constructor.name),p===\"Map\"||p===\"Set\")return Array.from(l);if(p===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return a(l,s)}}(d,c)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(d,c){(c==null||c>d.length)&&(c=d.length);for(var l=0,s=new Array(c);l<c;l++)s[l]=d[l];return s}function f(d,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(d,(p=s.key,v=void 0,v=function(x,w){if(o(x)!==\"object\"||x===null)return x;var O=x[Symbol.toPrimitive];if(O!==void 0){var S=O.call(x,w||\"default\");if(o(S)!==\"object\")return S;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(w===\"string\"?String:Number)(x)}(p,\"string\"),o(v)===\"symbol\"?v:String(v)),s)}var p,v}e(9720),e(5192),e(9653),e(6977),e(6078),Object.defineProperty(r,\"__esModule\",{value:!0}),r.Evaluator=void 0;var g=e(1231),m=function(){function d(p,v){(function(x,w){if(!(x instanceof w))throw new TypeError(\"Cannot call a class as a function\")})(this,d),this.operators=p,this.vars=v}var c,l,s;return c=d,(l=[{key:\"evaluate\",value:function(p){if(Array.isArray(p))return this.operators.and.evaluate(this,p);if((0,g.isObject)(p))for(var v=0,x=Object.entries(p);v<x.length;v++){var w=y(x[v],2),O=w[0],S=w[1],b=this.operators[O];if(b!==void 0)return b.evaluate(this,S);break}return null}},{key:\"booleanConvert\",value:function(p){switch(o(p)){case\"boolean\":return p;case\"number\":return p!==0;case\"string\":return p!==\"false\"&&p!==\"0\"&&p!==\"\";default:return p!=null}}},{key:\"numberConvert\",value:function(p){switch(o(p)){case\"number\":return p;case\"boolean\":return p?1:0;case\"string\":var v=parseFloat(p);return Number.isFinite(v)?v:null;default:return null}}},{key:\"stringConvert\",value:function(p){switch(o(p)){case\"string\":return p;case\"boolean\":return p.toString();case\"number\":return p.toFixed(15).replace(/\\.?0{0,15}$/,\"\");default:return null}}},{key:\"extractVar\",value:function(p){for(var v,x=p.split(\"/\"),w=(v=this.vars)!==null&&v!==void 0?v:{},O=0;O<x.length;++O){var S=w[x[O]];if(S===void 0)return null;w=S}return w}},{key:\"compare\",value:function(p,v){if(p===null)return v===null?0:null;if(v===null)return null;switch(o(p)){case\"number\":var x=this.numberConvert(v);if(x!==null)return p===x?0:p>x?1:-1;break;case\"string\":var w=this.stringConvert(v);if(w!==null)return p===w?0:p>w?1:-1;break;case\"boolean\":var O=this.booleanConvert(v);if(O!=null)return p===O?0:p>O?1:-1;break;default:if((0,g.isEqualsDeep)(p,v))return 0}return null}}])&&f(c.prototype,l),s&&f(c,s),Object.defineProperty(c,\"prototype\",{writable:!1}),d}();r.Evaluator=m},8728:function(n,r,e){\"use strict\";function o(A){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(E){return typeof E}:function(E){return E&&typeof Symbol==\"function\"&&E.constructor===Symbol&&E!==Symbol.prototype?\"symbol\":typeof E},o(A)}function y(A,E){for(var k=0;k<E.length;k++){var P=E[k];P.enumerable=P.enumerable||!1,P.configurable=!0,\"value\"in P&&(P.writable=!0),Object.defineProperty(A,(j=P.key,T=void 0,T=function(M,R){if(o(M)!==\"object\"||M===null)return M;var L=M[Symbol.toPrimitive];if(L!==void 0){var I=L.call(M,R||\"default\");if(o(I)!==\"object\")return I;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(R===\"string\"?String:Number)(M)}(j,\"string\"),o(T)===\"symbol\"?T:String(T)),P)}var j,T}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.JsonExpr=void 0;var a=e(9771),f=e(4652),g=e(6197),m=e(640),d=e(3251),c=e(8588),l=e(1501),s=e(9083),p=e(2299),v=e(4228),x=e(2682),w=e(4325),O=e(9188),S=e(8095),b={and:new f.AndCombinator,or:new g.OrCombinator,value:new a.ValueOperator,var:new m.VarOperator,null:new c.NullOperator,not:new d.NotOperator,in:new s.InOperator,match:new l.MatchOperator,eq:new v.EqualsOperator,gt:new x.GreaterThanOperator,gte:new w.GreaterThanOrEqualOperator,lt:new O.LessThanOperator,lte:new S.LessThanOrEqualOperator},_=function(){function A(){(function(j,T){if(!(j instanceof T))throw new TypeError(\"Cannot call a class as a function\")})(this,A)}var E,k,P;return E=A,(k=[{key:\"evaluateBooleanExpr\",value:function(j,T){var M=new p.Evaluator(b,T);return M.booleanConvert(M.evaluate(j))}},{key:\"evaluateExpr\",value:function(j,T){return new p.Evaluator(b,T).evaluate(j)}}])&&y(E.prototype,k),P&&y(E,P),Object.defineProperty(E,\"prototype\",{writable:!1}),A}();r.JsonExpr=_},4652:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(d){return typeof d}:function(d){return d&&typeof Symbol==\"function\"&&d.constructor===Symbol&&d!==Symbol.prototype?\"symbol\":typeof d},o(m)}function y(m,d){var c=typeof Symbol<\"u\"&&m[Symbol.iterator]||m[\"@@iterator\"];if(!c){if(Array.isArray(m)||(c=function(w,O){if(w){if(typeof w==\"string\")return a(w,O);var S=Object.prototype.toString.call(w).slice(8,-1);if(S===\"Object\"&&w.constructor&&(S=w.constructor.name),S===\"Map\"||S===\"Set\")return Array.from(w);if(S===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return a(w,O)}}(m))||d&&m&&typeof m.length==\"number\"){c&&(m=c);var l=0,s=function(){};return{s,n:function(){return l>=m.length?{done:!0}:{done:!1,value:m[l++]}},e:function(w){throw w},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p,v=!0,x=!1;return{s:function(){c=c.call(m)},n:function(){var w=c.next();return v=w.done,w},e:function(w){x=!0,p=w},f:function(){try{v||c.return==null||c.return()}finally{if(x)throw p}}}}function a(m,d){(d==null||d>m.length)&&(d=m.length);for(var c=0,l=new Array(d);c<d;c++)l[c]=m[c];return l}function f(m,d){for(var c=0;c<d.length;c++){var l=d[c];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,p=void 0,p=function(v,x){if(o(v)!==\"object\"||v===null)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var O=w.call(v,x||\"default\");if(o(O)!==\"object\")return O;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(v)}(s,\"string\"),o(p)===\"symbol\"?p:String(p)),l)}var s,p}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AndCombinator=void 0;var g=function(){function m(){(function(s,p){if(!(s instanceof p))throw new TypeError(\"Cannot call a class as a function\")})(this,m)}var d,c,l;return d=m,(c=[{key:\"evaluate\",value:function(s,p){if(Array.isArray(p)){var v,x=y(p);try{for(x.s();!(v=x.n()).done;){var w=v.value;if(!s.booleanConvert(s.evaluate(w)))return!1}}catch(O){x.e(O)}finally{x.f()}return!0}return null}}])&&f(d.prototype,c),l&&f(d,l),Object.defineProperty(d,\"prototype\",{writable:!1}),m}();r.AndCombinator=g},4915:function(n,r,e){\"use strict\";function o(f){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(f)}function y(f,g){for(var m=0;m<g.length;m++){var d=g[m];d.enumerable=d.enumerable||!1,d.configurable=!0,\"value\"in d&&(d.writable=!0),Object.defineProperty(f,(c=d.key,l=void 0,l=function(s,p){if(o(s)!==\"object\"||s===null)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,p||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(p===\"string\"?String:Number)(s)}(c,\"string\"),o(l)===\"symbol\"?l:String(l)),d)}var c,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.BinaryOperator=void 0;var a=function(){function f(){(function(c,l){if(!(c instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,f)}var g,m,d;return g=f,(m=[{key:\"evaluate\",value:function(c,l){if(Array.isArray(l)){var s=l.length>0?c.evaluate(l[0]):null;if(s!==null){var p=l.length>1?c.evaluate(l[1]):null;if(p!==null)return this.binary(c,s,p)}}return null}}])&&y(g.prototype,m),d&&y(g,d),Object.defineProperty(g,\"prototype\",{writable:!1}),f}();r.BinaryOperator=a},4228:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.EqualsOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){var _=O.compare(S,b);return _!==null?_===0:null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.EqualsOperator=c},2682:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.GreaterThanOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){var _=O.compare(S,b);return _!==null?_>0:null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.GreaterThanOperator=c},4325:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.GreaterThanOrEqualOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){var _=O.compare(S,b);return _!==null?_>=0:null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.GreaterThanOrEqualOperator=c},9083:function(n,r,e){\"use strict\";function o(x){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(w){return typeof w}:function(w){return w&&typeof Symbol==\"function\"&&w.constructor===Symbol&&w!==Symbol.prototype?\"symbol\":typeof w},o(x)}function y(x,w){var O=typeof Symbol<\"u\"&&x[Symbol.iterator]||x[\"@@iterator\"];if(!O){if(Array.isArray(x)||(O=function(k,P){if(k){if(typeof k==\"string\")return a(k,P);var j=Object.prototype.toString.call(k).slice(8,-1);if(j===\"Object\"&&k.constructor&&(j=k.constructor.name),j===\"Map\"||j===\"Set\")return Array.from(k);if(j===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return a(k,P)}}(x))||w&&x&&typeof x.length==\"number\"){O&&(x=O);var S=0,b=function(){};return{s:b,n:function(){return S>=x.length?{done:!0}:{done:!1,value:x[S++]}},e:function(k){throw k},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,A=!0,E=!1;return{s:function(){O=O.call(x)},n:function(){var k=O.next();return A=k.done,k},e:function(k){E=!0,_=k},f:function(){try{A||O.return==null||O.return()}finally{if(E)throw _}}}}function a(x,w){(w==null||w>x.length)&&(w=x.length);for(var O=0,S=new Array(w);O<w;O++)S[O]=x[O];return S}function f(x,w){if(!(x instanceof w))throw new TypeError(\"Cannot call a class as a function\")}function g(x,w){for(var O=0;O<w.length;O++){var S=w[O];S.enumerable=S.enumerable||!1,S.configurable=!0,\"value\"in S&&(S.writable=!0),Object.defineProperty(x,(b=S.key,_=void 0,_=function(A,E){if(o(A)!==\"object\"||A===null)return A;var k=A[Symbol.toPrimitive];if(k!==void 0){var P=k.call(A,E||\"default\");if(o(P)!==\"object\")return P;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(E===\"string\"?String:Number)(A)}(b,\"string\"),o(_)===\"symbol\"?_:String(_)),S)}var b,_}function m(x,w){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,S){return O.__proto__=S,O},m(x,w)}function d(x){var w=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,S=l(x);if(w){var b=l(this).constructor;O=Reflect.construct(S,arguments,b)}else O=S.apply(this,arguments);return c(this,O)}}function c(x,w){if(w&&(o(w)===\"object\"||typeof w==\"function\"))return w;if(w!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(O){if(O===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return O}(x)}function l(x){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},l(x)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.InOperator=void 0;var s=e(4915),p=e(1231),v=function(x){(function(A,E){if(typeof E!=\"function\"&&E!==null)throw new TypeError(\"Super expression must either be null or a function\");A.prototype=Object.create(E&&E.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,\"prototype\",{writable:!1}),E&&m(A,E)})(_,x);var w,O,S,b=d(_);function _(){return f(this,_),b.apply(this,arguments)}return w=_,(O=[{key:\"binary\",value:function(A,E,k){if(Array.isArray(E)){var P,j=y(E);try{for(j.s();!(P=j.n()).done;){var T=P.value;if(A.compare(T,k)===0)return!0}}catch(L){j.e(L)}finally{j.f()}return!1}if(typeof E==\"string\"){var M=A.stringConvert(k);return M!==null&&E.includes(M)}if((0,p.isObject)(E)){var R=A.stringConvert(k);return R!=null&&Object.prototype.hasOwnProperty.call(E,R)}return null}}])&&g(w.prototype,O),S&&g(w,S),Object.defineProperty(w,\"prototype\",{writable:!1}),_}(s.BinaryOperator);r.InOperator=v},9188:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.LessThanOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){var _=O.compare(S,b);return _!==null?_<0:null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.LessThanOperator=c},8095:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.LessThanOrEqualOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){var _=O.compare(S,b);return _!==null?_<=0:null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.LessThanOrEqualOperator=c},1501:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.MatchOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"binary\",value:function(O,S,b){if((S=O.stringConvert(S))!==null&&(b=O.stringConvert(b))!==null)try{return new RegExp(b).test(S)}catch{return null}return null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(4915).BinaryOperator);r.MatchOperator=c},3251:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.NotOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"unary\",value:function(O,S){return!O.booleanConvert(S)}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(7262).UnaryOperator);r.NotOperator=c},8588:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var p=0;p<s.length;p++){var v=s[p];v.enumerable=v.enumerable||!1,v.configurable=!0,\"value\"in v&&(v.writable=!0),Object.defineProperty(l,(x=v.key,w=void 0,w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\"),o(w)===\"symbol\"?w:String(w)),v)}var x,w}function f(l,s){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},f(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,v=d(l);if(s){var x=d(this).constructor;p=Reflect.construct(v,arguments,x)}else p=v.apply(this,arguments);return m(this,p)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(p){if(p===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return p}(l)}function d(l){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.NullOperator=void 0;var c=function(l){(function(O,S){if(typeof S!=\"function\"&&S!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),S&&f(O,S)})(w,l);var s,p,v,x=g(w);function w(){return y(this,w),x.apply(this,arguments)}return s=w,(p=[{key:\"unary\",value:function(O,S){return S===null}}])&&a(s.prototype,p),v&&a(s,v),Object.defineProperty(s,\"prototype\",{writable:!1}),w}(e(7262).UnaryOperator);r.NullOperator=c},6197:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(d){return typeof d}:function(d){return d&&typeof Symbol==\"function\"&&d.constructor===Symbol&&d!==Symbol.prototype?\"symbol\":typeof d},o(m)}function y(m,d){var c=typeof Symbol<\"u\"&&m[Symbol.iterator]||m[\"@@iterator\"];if(!c){if(Array.isArray(m)||(c=function(w,O){if(w){if(typeof w==\"string\")return a(w,O);var S=Object.prototype.toString.call(w).slice(8,-1);if(S===\"Object\"&&w.constructor&&(S=w.constructor.name),S===\"Map\"||S===\"Set\")return Array.from(w);if(S===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return a(w,O)}}(m))||d&&m&&typeof m.length==\"number\"){c&&(m=c);var l=0,s=function(){};return{s,n:function(){return l>=m.length?{done:!0}:{done:!1,value:m[l++]}},e:function(w){throw w},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p,v=!0,x=!1;return{s:function(){c=c.call(m)},n:function(){var w=c.next();return v=w.done,w},e:function(w){x=!0,p=w},f:function(){try{v||c.return==null||c.return()}finally{if(x)throw p}}}}function a(m,d){(d==null||d>m.length)&&(d=m.length);for(var c=0,l=new Array(d);c<d;c++)l[c]=m[c];return l}function f(m,d){for(var c=0;c<d.length;c++){var l=d[c];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,p=void 0,p=function(v,x){if(o(v)!==\"object\"||v===null)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var O=w.call(v,x||\"default\");if(o(O)!==\"object\")return O;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(v)}(s,\"string\"),o(p)===\"symbol\"?p:String(p)),l)}var s,p}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.OrCombinator=void 0;var g=function(){function m(){(function(s,p){if(!(s instanceof p))throw new TypeError(\"Cannot call a class as a function\")})(this,m)}var d,c,l;return d=m,(c=[{key:\"evaluate\",value:function(s,p){if(Array.isArray(p)){var v,x=y(p);try{for(x.s();!(v=x.n()).done;){var w=v.value;if(s.booleanConvert(s.evaluate(w)))return!0}}catch(O){x.e(O)}finally{x.f()}return p.length===0}return null}}])&&f(d.prototype,c),l&&f(d,l),Object.defineProperty(d,\"prototype\",{writable:!1}),m}();r.OrCombinator=g},7262:function(n,r,e){\"use strict\";function o(f){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(f)}function y(f,g){for(var m=0;m<g.length;m++){var d=g[m];d.enumerable=d.enumerable||!1,d.configurable=!0,\"value\"in d&&(d.writable=!0),Object.defineProperty(f,(c=d.key,l=void 0,l=function(s,p){if(o(s)!==\"object\"||s===null)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,p||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(p===\"string\"?String:Number)(s)}(c,\"string\"),o(l)===\"symbol\"?l:String(l)),d)}var c,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.UnaryOperator=void 0;var a=function(){function f(){(function(c,l){if(!(c instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,f)}var g,m,d;return g=f,(m=[{key:\"evaluate\",value:function(c,l){return l=c.evaluate(l),this.unary(c,l)}}])&&y(g.prototype,m),d&&y(g,d),Object.defineProperty(g,\"prototype\",{writable:!1}),f}();r.UnaryOperator=a},9771:function(n,r,e){\"use strict\";function o(f){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(f)}function y(f,g){for(var m=0;m<g.length;m++){var d=g[m];d.enumerable=d.enumerable||!1,d.configurable=!0,\"value\"in d&&(d.writable=!0),Object.defineProperty(f,(c=d.key,l=void 0,l=function(s,p){if(o(s)!==\"object\"||s===null)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,p||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(p===\"string\"?String:Number)(s)}(c,\"string\"),o(l)===\"symbol\"?l:String(l)),d)}var c,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ValueOperator=void 0;var a=function(){function f(){(function(c,l){if(!(c instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,f)}var g,m,d;return g=f,(m=[{key:\"evaluate\",value:function(c,l){return l}}])&&y(g.prototype,m),d&&y(g,d),Object.defineProperty(g,\"prototype\",{writable:!1}),f}();r.ValueOperator=a},640:function(n,r,e){\"use strict\";function o(g){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(m){return typeof m}:function(m){return m&&typeof Symbol==\"function\"&&m.constructor===Symbol&&m!==Symbol.prototype?\"symbol\":typeof m},o(g)}function y(g,m){for(var d=0;d<m.length;d++){var c=m[d];c.enumerable=c.enumerable||!1,c.configurable=!0,\"value\"in c&&(c.writable=!0),Object.defineProperty(g,(l=c.key,s=void 0,s=function(p,v){if(o(p)!==\"object\"||p===null)return p;var x=p[Symbol.toPrimitive];if(x!==void 0){var w=x.call(p,v||\"default\");if(o(w)!==\"object\")return w;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(v===\"string\"?String:Number)(p)}(l,\"string\"),o(s)===\"symbol\"?s:String(s)),c)}var l,s}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.VarOperator=void 0;var a=e(1231),f=function(){function g(){(function(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")})(this,g)}var m,d,c;return m=g,(d=[{key:\"evaluate\",value:function(l,s){return(0,a.isObject)(s)&&(s=s.path),typeof s==\"string\"?l.extractVar(s):null}}])&&y(m.prototype,d),c&&y(m,c),Object.defineProperty(m,\"prototype\",{writable:!1}),g}();r.VarOperator=f},7682:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(d){return typeof d}:function(d){return d&&typeof Symbol==\"function\"&&d.constructor===Symbol&&d!==Symbol.prototype?\"symbol\":typeof d},o(m)}function y(m,d){for(var c=0;c<d.length;c++){var l=d[c];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,p=void 0,p=function(v,x){if(o(v)!==\"object\"||v===null)return v;var w=v[Symbol.toPrimitive];if(w!==void 0){var O=w.call(v,x||\"default\");if(o(O)!==\"object\")return O;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(v)}(s,\"string\"),o(p)===\"symbol\"?p:String(p)),l)}var s,p}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AudienceMatcher=void 0;var a=e(1231),f=e(8728),g=function(){function m(){(function(s,p){if(!(s instanceof p))throw new TypeError(\"Cannot call a class as a function\")})(this,m),this._jsonExpr=new f.JsonExpr}var d,c,l;return d=m,(c=[{key:\"evaluate\",value:function(s,p){try{var v=JSON.parse(s);if(v&&v.filter&&(Array.isArray(v.filter)||(0,a.isObject)(v.filter)))return this._jsonExpr.evaluateBooleanExpr(v.filter,p)}catch(x){console.error(x)}return null}}])&&y(d.prototype,c),l&&y(d,l),Object.defineProperty(d,\"prototype\",{writable:!1}),m}();r.AudienceMatcher=g},4703:function(n,r,e){\"use strict\";function o(d,c,l,s,p,v){return((c=c+d+(s>>>0)+v)<<p|c>>>32-p)+l}function y(d,c,l,s,p,v,x){return o(c&l|~c&s,d,c,p,v,x)}function a(d,c,l,s,p,v,x){return o(c&s|l&~s,d,c,p,v,x)}function f(d,c,l,s,p,v,x){return o(c^l^s,d,c,p,v,x)}function g(d,c,l,s,p,v,x){return o(l^(c|~s),d,c,p,v,x)}function m(d,c){var l=d[0],s=d[1],p=d[2],v=d[3];l=y(l,s,p,v,c[0],7,-680876936),v=y(v,l,s,p,c[1],12,-389564586),p=y(p,v,l,s,c[2],17,606105819),s=y(s,p,v,l,c[3],22,-1044525330),l=y(l,s,p,v,c[4],7,-176418897),v=y(v,l,s,p,c[5],12,1200080426),p=y(p,v,l,s,c[6],17,-1473231341),s=y(s,p,v,l,c[7],22,-45705983),l=y(l,s,p,v,c[8],7,1770035416),v=y(v,l,s,p,c[9],12,-1958414417),p=y(p,v,l,s,c[10],17,-42063),s=y(s,p,v,l,c[11],22,-1990404162),l=y(l,s,p,v,c[12],7,1804603682),v=y(v,l,s,p,c[13],12,-40341101),p=y(p,v,l,s,c[14],17,-1502002290),l=a(l,s=y(s,p,v,l,c[15],22,1236535329),p,v,c[1],5,-165796510),v=a(v,l,s,p,c[6],9,-1069501632),p=a(p,v,l,s,c[11],14,643717713),s=a(s,p,v,l,c[0],20,-373897302),l=a(l,s,p,v,c[5],5,-701558691),v=a(v,l,s,p,c[10],9,38016083),p=a(p,v,l,s,c[15],14,-660478335),s=a(s,p,v,l,c[4],20,-405537848),l=a(l,s,p,v,c[9],5,568446438),v=a(v,l,s,p,c[14],9,-1019803690),p=a(p,v,l,s,c[3],14,-187363961),s=a(s,p,v,l,c[8],20,1163531501),l=a(l,s,p,v,c[13],5,-1444681467),v=a(v,l,s,p,c[2],9,-51403784),p=a(p,v,l,s,c[7],14,1735328473),l=f(l,s=a(s,p,v,l,c[12],20,-1926607734),p,v,c[5],4,-378558),v=f(v,l,s,p,c[8],11,-2022574463),p=f(p,v,l,s,c[11],16,1839030562),s=f(s,p,v,l,c[14],23,-35309556),l=f(l,s,p,v,c[1],4,-1530992060),v=f(v,l,s,p,c[4],11,1272893353),p=f(p,v,l,s,c[7],16,-155497632),s=f(s,p,v,l,c[10],23,-1094730640),l=f(l,s,p,v,c[13],4,681279174),v=f(v,l,s,p,c[0],11,-358537222),p=f(p,v,l,s,c[3],16,-722521979),s=f(s,p,v,l,c[6],23,76029189),l=f(l,s,p,v,c[9],4,-640364487),v=f(v,l,s,p,c[12],11,-421815835),p=f(p,v,l,s,c[15],16,530742520),l=g(l,s=f(s,p,v,l,c[2],23,-995338651),p,v,c[0],6,-198630844),v=g(v,l,s,p,c[7],10,1126891415),p=g(p,v,l,s,c[14],15,-1416354905),s=g(s,p,v,l,c[5],21,-57434055),l=g(l,s,p,v,c[12],6,1700485571),v=g(v,l,s,p,c[3],10,-1894986606),p=g(p,v,l,s,c[10],15,-1051523),s=g(s,p,v,l,c[1],21,-2054922799),l=g(l,s,p,v,c[8],6,1873313359),v=g(v,l,s,p,c[15],10,-30611744),p=g(p,v,l,s,c[6],15,-1560198380),s=g(s,p,v,l,c[13],21,1309151649),l=g(l,s,p,v,c[4],6,-145523070),v=g(v,l,s,p,c[11],10,-1120210379),p=g(p,v,l,s,c[2],15,718787259),s=g(s,p,v,l,c[9],21,-343485551),d[0]=l+d[0]>>>0,d[1]=s+d[1]>>>0,d[2]=p+d[2]>>>0,d[3]=v+d[3]>>>0}e(5206),Object.defineProperty(r,\"__esModule\",{value:!0}),r.md5=void 0,r.md5=function(d){var c,l=new DataView(d),s=l.byteLength,p=-64&s,v=new Uint32Array(16),x=Uint32Array.of(1732584193,-271733879,-1732584194,271733878);for(c=0;c<p;c+=64){for(var w=0;w<16;++w)v[w]=l.getUint32(c+(w<<2),!0);m(x,v)}for(var O=0,S=-4&s;c<S;c+=4)v[O++]=l.getUint32(c,!0);switch(3&s){case 3:v[O++]=2147483648|l.getUint8(c)|l.getUint8(c+1)<<8|l.getUint8(c+2)<<16;break;case 2:v[O++]=8388608|l.getUint8(c)|l.getUint8(c+1)<<8;break;case 1:v[O++]=32768|l.getUint8(c);break;default:v[O++]=128}if(O>14){for(;O<16;++O)v[O]=0;m(x,v),O=0}for(;O<16;++O)v[O]=0;return v[14]=s<<3,m(x,v),new Uint8Array(x.buffer)}},7433:function(n,r,e){\"use strict\";e(332),Object.defineProperty(r,\"__esModule\",{value:!0}),r.murmur3_32=void 0;var o=Math.imul;function y(f,g){return f<<g|f>>>32-g}function a(f){return o(y(o(f,3432918353),15),461845907)}r.murmur3_32=function(f,g){g=(g||0)>>>0;var m,d=new DataView(f),c=-4&d.byteLength;for(m=0;m<c;m+=4)g=y(g^=a(d.getUint32(m,!0)),13),g=o(g,5)+3864292196;var l,s=0;switch(3&d.byteLength){case 3:s^=d.getUint8(m+2)<<16;case 2:s^=d.getUint8(m+1)<<8;case 1:g^=a(s^=d.getUint8(m))}return g^=d.byteLength,l=g,l=o(l^=l>>>16,2246822507),l=o(l^=l>>>13,3266489909),(g=(l^=l>>>16)>>>0)>>>0}},9003:function(n,r,e){\"use strict\";function o(f){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(f)}function y(f,g){for(var m=0;m<g.length;m++){var d=g[m];d.enumerable=d.enumerable||!1,d.configurable=!0,\"value\"in d&&(d.writable=!0),Object.defineProperty(f,(c=d.key,l=void 0,l=function(s,p){if(o(s)!==\"object\"||s===null)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,p||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(p===\"string\"?String:Number)(s)}(c,\"string\"),o(l)===\"symbol\"?l:String(l)),d)}var c,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ContextDataProvider=void 0;var a=function(){function f(){(function(c,l){if(!(c instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,f)}var g,m,d;return g=f,(m=[{key:\"getContextData\",value:function(c,l){return c.getClient().getContext(l)}}])&&y(g.prototype,m),d&&y(g,d),Object.defineProperty(g,\"prototype\",{writable:!1}),f}();r.ContextDataProvider=a},9949:function(n,r,e){\"use strict\";function o(f){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(f)}function y(f,g){for(var m=0;m<g.length;m++){var d=g[m];d.enumerable=d.enumerable||!1,d.configurable=!0,\"value\"in d&&(d.writable=!0),Object.defineProperty(f,(c=d.key,l=void 0,l=function(s,p){if(o(s)!==\"object\"||s===null)return s;var v=s[Symbol.toPrimitive];if(v!==void 0){var x=v.call(s,p||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(p===\"string\"?String:Number)(s)}(c,\"string\"),o(l)===\"symbol\"?l:String(l)),d)}var c,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ContextPublisher=void 0;var a=function(){function f(){(function(c,l){if(!(c instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,f)}var g,m,d;return g=f,(m=[{key:\"publish\",value:function(c,l,s,p){return l.getClient().publish(c,p)}}])&&y(g.prototype,m),d&&y(g,d),Object.defineProperty(g,\"prototype\",{writable:!1}),f}();r.ContextPublisher=a},153:function(n,r,e){\"use strict\";function o(x){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(w){return typeof w}:function(w){return w&&typeof Symbol==\"function\"&&w.constructor===Symbol&&w!==Symbol.prototype?\"symbol\":typeof w},o(x)}function y(x){return function(w){if(Array.isArray(w))return a(w)}(x)||function(w){if(typeof Symbol<\"u\"&&w[Symbol.iterator]!=null||w[\"@@iterator\"]!=null)return Array.from(w)}(x)||function(w,O){if(w){if(typeof w==\"string\")return a(w,O);var S=Object.prototype.toString.call(w).slice(8,-1);if(S===\"Object\"&&w.constructor&&(S=w.constructor.name),S===\"Map\"||S===\"Set\")return Array.from(w);if(S===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return a(w,O)}}(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(x,w){(w==null||w>x.length)&&(w=x.length);for(var O=0,S=new Array(w);O<w;O++)S[O]=x[O];return S}function f(x,w){for(var O=0;O<w.length;O++){var S=w[O];S.enumerable=S.enumerable||!1,S.configurable=!0,\"value\"in S&&(S.writable=!0),Object.defineProperty(x,g(S.key),S)}}function g(x){var w=function(O,S){if(o(O)!==\"object\"||O===null)return O;var b=O[Symbol.toPrimitive];if(b!==void 0){var _=b.call(O,S||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(S===\"string\"?String:Number)(O)}(x,\"string\");return o(w)===\"symbol\"?w:String(w)}e(9601),e(9720),e(6078),e(9653);var m=function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(r,\"__esModule\",{value:!0});var d=m(e(7578)),c=m(e(7621)),l=e(9949),s=e(9003),p=e(1231),v=function(){function x(b){(function(A,E){if(!(A instanceof E))throw new TypeError(\"Cannot call a class as a function\")})(this,x);var _=Object.assign.apply(Object,[{agent:\"absmartly-javascript-sdk\"}].concat(y(Object.entries(b||{}).filter(function(A){return[\"application\",\"agent\",\"apiKey\",\"endpoint\",\"keepalive\",\"environment\",\"retries\",\"timeout\"].indexOf(A[0])!==-1}).map(function(A){return E={},k=A[0],P=A[1],(k=g(k))in E?Object.defineProperty(E,k,{value:P,enumerable:!0,configurable:!0,writable:!0}):E[k]=P,E;var E,k,P}))));b=Object.assign({},b),this._client=b.client||new d.default(_),this._eventLogger=b.eventLogger||x.defaultEventLogger,this._publisher=b.publisher||new l.ContextPublisher,this._provider=b.provider||new s.ContextDataProvider}var w,O,S;return w=x,S=[{key:\"_contextOptions\",value:function(b){return Object.assign({publishDelay:(0,p.isLongLivedApp)()?100:-1,refreshPeriod:0},b||{})}},{key:\"_validateParams\",value:function(b){Object.entries(b.units).forEach(function(_){var A=o(_[1]);if(A!==\"string\"&&A!==\"number\")throw new Error(\"Unit '\".concat(_[0],\"' UID is of unsupported type '\").concat(A,\"'. UID must be one of ['string', 'number']\"));if(typeof _[1]==\"string\"&&_[1].length===0)throw new Error(\"Unit '\".concat(_[0],\"' UID length must be >= 1\"))})}}],(O=[{key:\"getContextData\",value:function(b){return this._provider.getContextData(this,b)}},{key:\"createContext\",value:function(b,_,A){x._validateParams(b);var E=x._contextOptions(_),k=this._provider.getContextData(this,A);return new c.default(this,E,b,k)}},{key:\"setEventLogger\",value:function(b){this._eventLogger=b}},{key:\"getEventLogger\",value:function(){return this._eventLogger}},{key:\"setContextPublisher\",value:function(b){this._publisher=b}},{key:\"getContextPublisher\",value:function(){return this._publisher}},{key:\"setContextDataProvider\",value:function(b){this._provider=b}},{key:\"getContextDataProvider\",value:function(){return this._provider}},{key:\"getClient\",value:function(){return this._client}},{key:\"createContextWith\",value:function(b,_,A){x._validateParams(b);var E=x._contextOptions(A);return new c.default(this,E,b,_)}}])&&f(w.prototype,O),S&&f(w,S),Object.defineProperty(w,\"prototype\",{writable:!1}),x}();r.default=v,v.defaultEventLogger=function(x,w,O){w===\"error\"&&console.error(O)}},1231:function(n,r,e){\"use strict\";function o(d){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(c){return typeof c}:function(c){return c&&typeof Symbol==\"function\"&&c.constructor===Symbol&&c!==Symbol.prototype?\"symbol\":typeof c},o(d)}e(4048),e(9653),e(8145),e(6977),Object.defineProperty(r,\"__esModule\",{value:!0}),r.chooseVariant=r.hashUnit=r.base64UrlNoPadding=r.stringToUint8Array=r.arrayEqualsShallow=r.isEqualsDeep=r.isPromise=r.isObject=r.isNumeric=r.isWorker=r.isLongLivedApp=r.getApplicationVersion=r.getApplicationName=void 0;var y=e(4703);r.getApplicationName=function(d){return typeof d!=\"string\"?d.name:d};function a(d){if(!(d instanceof Object))return!1;var c=Object.getPrototypeOf(d);return c==null||c===Object.prototype}function f(d,c,l,s){if(d===c)return!0;if(o(d)!==o(c))return!1;switch(o(d)){case\"boolean\":case\"string\":return d===c;case\"number\":return Number.isNaN(d)?Number.isNaN(c):d===c;case\"object\":var p=Array.isArray(d);if(p&&!Array.isArray(c))return!1;var v=a(d);if(v&&!a(c)||!p&&!v)return!1;if(p&&Array.isArray(c)){if(d.length===c.length)return function(w,O){for(var S,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],A=(S=b?.length)!==null&&S!==void 0?S:0;A--;)if(b[A]===w)return _[A]===O;for(_=_??[],(b=b??[]).push(w),_.push(O),A=w.length;A--;)if(!f(w[A],O[A],b,_))return!1;return _.pop(),b.pop(),!0}(d,c,l,s)}else if(d&&c){var x=Object.keys(d);if(x.length===Object.keys(c).length)return function(w,O,S,b,_){for(var A,E=(A=b?.length)!==null&&A!==void 0?A:0;E--;)if(b&&b[E]===w)return _&&_[E]===O;for(_=_??[],(b=b??[]).push(w),_.push(O),E=S.length;E--;){var k=S[E];if(!Object.prototype.hasOwnProperty.call(O,k)||!f(w[k],O[k],b,_))return!1}return _.pop(),b.pop(),!0}(d,c,x,l,s)}}return!1}function g(d){for(var c=d.length,l=new Array(d.length),s=0,p=0;p<c;++p){var v=d.charCodeAt(p);v<128?l[s++]=v:v<2048?(l[s++]=v>>6|192,l[s++]=63&v|128):(l[s++]=v>>12|224,l[s++]=v>>6&63|128,l[s++]=63&v|128)}return Uint8Array.from(l)}r.getApplicationVersion=function(d){return typeof d!=\"string\"?d.version:0},r.isLongLivedApp=function(){return typeof window<\"u\"&&window.document!==void 0||typeof navigator<\"u\"&&navigator.product===\"ReactNative\"},r.isWorker=function(){return(typeof self>\"u\"?\"undefined\":o(self))===\"object\"&&self.constructor&&self.constructor.name===\"DedicatedWorkerGlobalScope\"},r.isNumeric=function(d){return typeof d==\"number\"},r.isObject=a,r.isPromise=function(d){return d!==null&&o(d)===\"object\"&&typeof d.then==\"function\"},r.isEqualsDeep=f,r.arrayEqualsShallow=function(d,c){return d===c||d?.length===c?.length&&!d?.some(function(l,s){return c&&l!==c[s]})},r.stringToUint8Array=g;function m(d){var c,l=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",s=d.byteLength%3,p=4*(d.byteLength/3|0)+(s===0?0:s===1?2:3),v=new Array(p),x=0,w=d.byteLength-s;for(c=0;c<w;c+=3){var O=d[c]<<16|d[c+1]<<8|d[c+2];v[x]=l[O>>18&63],v[x+1]=l[O>>12&63],v[x+2]=l[O>>6&63],v[x+3]=l[63&O],x+=4}switch(s){case 2:var S=d[c]<<16|d[c+1]<<8;v[x]=l[S>>18&63],v[x+1]=l[S>>12&63],v[x+2]=l[S>>6&63];break;case 1:var b=d[c]<<16;v[x]=l[b>>18&63],v[x+1]=l[b>>12&63]}return v.join(\"\")}r.base64UrlNoPadding=m,r.hashUnit=function(d){var c=typeof d==\"string\"?d:d.toFixed(0);return m((0,y.md5)(g(c).buffer))},r.chooseVariant=function(d,c){for(var l=0,s=0;s<d.length;++s)if(c<(l+=d[s]))return s;return d.length-1}},9662:function(n,r,e){var o=e(614),y=e(6330),a=TypeError;n.exports=function(f){if(o(f))return f;throw a(y(f)+\" is not a function\")}},9483:function(n,r,e){var o=e(4411),y=e(6330),a=TypeError;n.exports=function(f){if(o(f))return f;throw a(y(f)+\" is not a constructor\")}},6077:function(n,r,e){var o=e(614),y=String,a=TypeError;n.exports=function(f){if(typeof f==\"object\"||o(f))return f;throw a(\"Can't set \"+y(f)+\" as a prototype\")}},1223:function(n,r,e){var o=e(5112),y=e(30),a=e(3070).f,f=o(\"unscopables\"),g=Array.prototype;g[f]==null&&a(g,f,{configurable:!0,value:y(null)}),n.exports=function(m){g[f][m]=!0}},9670:function(n,r,e){var o=e(111),y=String,a=TypeError;n.exports=function(f){if(o(f))return f;throw a(y(f)+\" is not an object\")}},3013:function(n){n.exports=typeof ArrayBuffer<\"u\"&&typeof DataView<\"u\"},260:function(n,r,e){\"use strict\";var o,y,a,f=e(3013),g=e(9781),m=e(7854),d=e(614),c=e(111),l=e(2597),s=e(648),p=e(6330),v=e(8880),x=e(8052),w=e(3070).f,O=e(7976),S=e(9518),b=e(7674),_=e(5112),A=e(9711),E=e(9909),k=E.enforce,P=E.get,j=m.Int8Array,T=j&&j.prototype,M=m.Uint8ClampedArray,R=M&&M.prototype,L=j&&S(j),I=T&&S(T),N=Object.prototype,B=m.TypeError,q=_(\"toStringTag\"),F=A(\"TYPED_ARRAY_TAG\"),V=\"TypedArrayConstructor\",W=f&&!!b&&s(m.opera)!==\"Opera\",G=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$={BigInt64Array:8,BigUint64Array:8},ue=function(U){var D=S(U);if(c(D)){var K=P(D);return K&&l(K,V)?K[V]:ue(D)}},Q=function(U){if(!c(U))return!1;var D=s(U);return l(H,D)||l($,D)};for(o in H)(a=(y=m[o])&&y.prototype)?k(a)[V]=y:W=!1;for(o in $)(a=(y=m[o])&&y.prototype)&&(k(a)[V]=y);if((!W||!d(L)||L===Function.prototype)&&(L=function(){throw B(\"Incorrect invocation\")},W))for(o in H)m[o]&&b(m[o],L);if((!W||!I||I===N)&&(I=L.prototype,W))for(o in H)m[o]&&b(m[o].prototype,I);if(W&&S(R)!==I&&b(R,I),g&&!l(I,q))for(o in G=!0,w(I,q,{get:function(){return c(this)?this[F]:void 0}}),H)m[o]&&v(m[o],F,o);n.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:G&&F,aTypedArray:function(U){if(Q(U))return U;throw B(\"Target is not a typed array\")},aTypedArrayConstructor:function(U){if(d(U)&&(!b||O(L,U)))return U;throw B(p(U)+\" is not a typed array constructor\")},exportTypedArrayMethod:function(U,D,K,Y){if(g){if(K)for(var X in H){var J=m[X];if(J&&l(J.prototype,U))try{delete J.prototype[U]}catch{try{J.prototype[U]=D}catch{}}}I[U]&&!K||x(I,U,K?D:W&&T[U]||D,Y)}},exportTypedArrayStaticMethod:function(U,D,K){var Y,X;if(g){if(b){if(K){for(Y in H)if((X=m[Y])&&l(X,U))try{delete X[U]}catch{}}if(L[U]&&!K)return;try{return x(L,U,K?D:W&&L[U]||D)}catch{}}for(Y in H)!(X=m[Y])||X[U]&&!K||x(X,U,D)}},getTypedArrayConstructor:ue,isView:function(U){if(!c(U))return!1;var D=s(U);return D===\"DataView\"||l(H,D)||l($,D)},isTypedArray:Q,TypedArray:L,TypedArrayPrototype:I}},1318:function(n,r,e){var o=e(5656),y=e(1400),a=e(6244),f=function(g){return function(m,d,c){var l,s=o(m),p=a(s),v=y(c,p);if(g&&d!=d){for(;p>v;)if((l=s[v++])!=l)return!0}else for(;p>v;v++)if((g||v in s)&&s[v]===d)return g||v||0;return!g&&-1}};n.exports={includes:f(!0),indexOf:f(!1)}},2092:function(n,r,e){var o=e(9974),y=e(1702),a=e(8361),f=e(7908),g=e(6244),m=e(5417),d=y([].push),c=function(l){var s=l==1,p=l==2,v=l==3,x=l==4,w=l==6,O=l==7,S=l==5||w;return function(b,_,A,E){for(var k,P,j=f(b),T=a(j),M=o(_,A),R=g(T),L=0,I=E||m,N=s?I(b,R):p||O?I(b,0):void 0;R>L;L++)if((S||L in T)&&(P=M(k=T[L],L,j),l))if(s)N[L]=P;else if(P)switch(l){case 3:return!0;case 5:return k;case 6:return L;case 2:d(N,k)}else switch(l){case 4:return!1;case 7:d(N,k)}return w?-1:v||x?x:N}};n.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},7475:function(n,r,e){var o=e(3157),y=e(4411),a=e(111),f=e(5112)(\"species\"),g=Array;n.exports=function(m){var d;return o(m)&&(d=m.constructor,(y(d)&&(d===g||o(d.prototype))||a(d)&&(d=d[f])===null)&&(d=void 0)),d===void 0?g:d}},5417:function(n,r,e){var o=e(7475);n.exports=function(y,a){return new(o(y))(a===0?0:a)}},7072:function(n,r,e){var o=e(5112)(\"iterator\"),y=!1;try{var a=0,f={next:function(){return{done:!!a++}},return:function(){y=!0}};f[o]=function(){return this},Array.from(f,function(){throw 2})}catch{}n.exports=function(g,m){if(!m&&!y)return!1;var d=!1;try{var c={};c[o]=function(){return{next:function(){return{done:d=!0}}}},g(c)}catch{}return d}},4326:function(n,r,e){var o=e(1702),y=o({}.toString),a=o(\"\".slice);n.exports=function(f){return a(y(f),8,-1)}},648:function(n,r,e){var o=e(1694),y=e(614),a=e(4326),f=e(5112)(\"toStringTag\"),g=Object,m=a(function(){return arguments}())==\"Arguments\";n.exports=o?a:function(d){var c,l,s;return d===void 0?\"Undefined\":d===null?\"Null\":typeof(l=function(p,v){try{return p[v]}catch{}}(c=g(d),f))==\"string\"?l:m?a(c):(s=a(c))==\"Object\"&&y(c.callee)?\"Arguments\":s}},9920:function(n,r,e){var o=e(2597),y=e(3887),a=e(1236),f=e(3070);n.exports=function(g,m,d){for(var c=y(m),l=f.f,s=a.f,p=0;p<c.length;p++){var v=c[p];o(g,v)||d&&o(d,v)||l(g,v,s(m,v))}}},8544:function(n,r,e){var o=e(7293);n.exports=!o(function(){function y(){}return y.prototype.constructor=null,Object.getPrototypeOf(new y)!==y.prototype})},8880:function(n,r,e){var o=e(9781),y=e(3070),a=e(9114);n.exports=o?function(f,g,m){return y.f(f,g,a(1,m))}:function(f,g,m){return f[g]=m,f}},9114:function(n){n.exports=function(r,e){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:e}}},8709:function(n,r,e){\"use strict\";var o=e(9670),y=e(2140),a=TypeError;n.exports=function(f){if(o(this),f===\"string\"||f===\"default\")f=\"string\";else if(f!==\"number\")throw a(\"Incorrect hint\");return y(this,f)}},8052:function(n,r,e){var o=e(614),y=e(3070),a=e(6339),f=e(3072);n.exports=function(g,m,d,c){c||(c={});var l=c.enumerable,s=c.name!==void 0?c.name:m;if(o(d)&&a(d,s,c),c.global)l?g[m]=d:f(m,d);else{try{c.unsafe?g[m]&&(l=!0):delete g[m]}catch{}l?g[m]=d:y.f(g,m,{value:d,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return g}},3072:function(n,r,e){var o=e(7854),y=Object.defineProperty;n.exports=function(a,f){try{y(o,a,{value:f,configurable:!0,writable:!0})}catch{o[a]=f}return f}},9781:function(n,r,e){var o=e(7293);n.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},4154:function(n){var r=typeof document==\"object\"&&document.all,e=r===void 0&&r!==void 0;n.exports={all:r,IS_HTMLDDA:e}},317:function(n,r,e){var o=e(7854),y=e(111),a=o.document,f=y(a)&&y(a.createElement);n.exports=function(g){return f?a.createElement(g):{}}},8113:function(n,r,e){var o=e(5005);n.exports=o(\"navigator\",\"userAgent\")||\"\"},7392:function(n,r,e){var o,y,a=e(7854),f=e(8113),g=a.process,m=a.Deno,d=g&&g.versions||m&&m.version,c=d&&d.v8;c&&(y=(o=c.split(\".\"))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!y&&f&&(!(o=f.match(/Edge\\/(\\d+)/))||o[1]>=74)&&(o=f.match(/Chrome\\/(\\d+)/))&&(y=+o[1]),n.exports=y},748:function(n){n.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},2109:function(n,r,e){var o=e(7854),y=e(1236).f,a=e(8880),f=e(8052),g=e(3072),m=e(9920),d=e(4705);n.exports=function(c,l){var s,p,v,x,w,O=c.target,S=c.global,b=c.stat;if(s=S?o:b?o[O]||g(O,{}):(o[O]||{}).prototype)for(p in l){if(x=l[p],v=c.dontCallGetSet?(w=y(s,p))&&w.value:s[p],!d(S?p:O+(b?\".\":\"#\")+p,c.forced)&&v!==void 0){if(typeof x==typeof v)continue;m(x,v)}(c.sham||v&&v.sham)&&a(x,\"sham\",!0),f(s,p,x,c)}}},7293:function(n){n.exports=function(r){try{return!!r()}catch{return!0}}},9974:function(n,r,e){var o=e(1470),y=e(9662),a=e(4374),f=o(o.bind);n.exports=function(g,m){return y(g),m===void 0?g:a?f(g,m):function(){return g.apply(m,arguments)}}},4374:function(n,r,e){var o=e(7293);n.exports=!o(function(){var y=function(){}.bind();return typeof y!=\"function\"||y.hasOwnProperty(\"prototype\")})},6916:function(n,r,e){var o=e(4374),y=Function.prototype.call;n.exports=o?y.bind(y):function(){return y.apply(y,arguments)}},6530:function(n,r,e){var o=e(9781),y=e(2597),a=Function.prototype,f=o&&Object.getOwnPropertyDescriptor,g=y(a,\"name\"),m=g&&function(){}.name===\"something\",d=g&&(!o||o&&f(a,\"name\").configurable);n.exports={EXISTS:g,PROPER:m,CONFIGURABLE:d}},1470:function(n,r,e){var o=e(4326),y=e(1702);n.exports=function(a){if(o(a)===\"Function\")return y(a)}},1702:function(n,r,e){var o=e(4374),y=Function.prototype,a=y.call,f=o&&y.bind.bind(a,a);n.exports=o?f:function(g){return function(){return a.apply(g,arguments)}}},5005:function(n,r,e){var o=e(7854),y=e(614),a=function(f){return y(f)?f:void 0};n.exports=function(f,g){return arguments.length<2?a(o[f]):o[f]&&o[f][g]}},1246:function(n,r,e){var o=e(648),y=e(8173),a=e(8554),f=e(7497),g=e(5112)(\"iterator\");n.exports=function(m){if(!a(m))return y(m,g)||y(m,\"@@iterator\")||f[o(m)]}},4121:function(n,r,e){var o=e(6916),y=e(9662),a=e(9670),f=e(6330),g=e(1246),m=TypeError;n.exports=function(d,c){var l=arguments.length<2?g(d):c;if(y(l))return a(o(l,d));throw m(f(d)+\" is not iterable\")}},8173:function(n,r,e){var o=e(9662),y=e(8554);n.exports=function(a,f){var g=a[f];return y(g)?void 0:o(g)}},7854:function(n,r,e){var o=function(y){return y&&y.Math==Math&&y};n.exports=o(typeof globalThis==\"object\"&&globalThis)||o(typeof window==\"object\"&&window)||o(typeof self==\"object\"&&self)||o(typeof e.g==\"object\"&&e.g)||function(){return this}()||Function(\"return this\")()},2597:function(n,r,e){var o=e(1702),y=e(7908),a=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(f,g){return a(y(f),g)}},3501:function(n){n.exports={}},490:function(n,r,e){var o=e(5005);n.exports=o(\"document\",\"documentElement\")},4664:function(n,r,e){var o=e(9781),y=e(7293),a=e(317);n.exports=!o&&!y(function(){return Object.defineProperty(a(\"div\"),\"a\",{get:function(){return 7}}).a!=7})},8361:function(n,r,e){var o=e(1702),y=e(7293),a=e(4326),f=Object,g=o(\"\".split);n.exports=y(function(){return!f(\"z\").propertyIsEnumerable(0)})?function(m){return a(m)==\"String\"?g(m,\"\"):f(m)}:f},9587:function(n,r,e){var o=e(614),y=e(111),a=e(7674);n.exports=function(f,g,m){var d,c;return a&&o(d=g.constructor)&&d!==m&&y(c=d.prototype)&&c!==m.prototype&&a(f,c),f}},2788:function(n,r,e){var o=e(1702),y=e(614),a=e(5465),f=o(Function.toString);y(a.inspectSource)||(a.inspectSource=function(g){return f(g)}),n.exports=a.inspectSource},9909:function(n,r,e){var o,y,a,f=e(4811),g=e(7854),m=e(111),d=e(8880),c=e(2597),l=e(5465),s=e(6200),p=e(3501),v=\"Object already initialized\",x=g.TypeError,w=g.WeakMap;if(f||l.state){var O=l.state||(l.state=new w);O.get=O.get,O.has=O.has,O.set=O.set,o=function(b,_){if(O.has(b))throw x(v);return _.facade=b,O.set(b,_),_},y=function(b){return O.get(b)||{}},a=function(b){return O.has(b)}}else{var S=s(\"state\");p[S]=!0,o=function(b,_){if(c(b,S))throw x(v);return _.facade=b,d(b,S,_),_},y=function(b){return c(b,S)?b[S]:{}},a=function(b){return c(b,S)}}n.exports={set:o,get:y,has:a,enforce:function(b){return a(b)?y(b):o(b,{})},getterFor:function(b){return function(_){var A;if(!m(_)||(A=y(_)).type!==b)throw x(\"Incompatible receiver, \"+b+\" required\");return A}}}},7659:function(n,r,e){var o=e(5112),y=e(7497),a=o(\"iterator\"),f=Array.prototype;n.exports=function(g){return g!==void 0&&(y.Array===g||f[a]===g)}},3157:function(n,r,e){var o=e(4326);n.exports=Array.isArray||function(y){return o(y)==\"Array\"}},4067:function(n,r,e){var o=e(648),y=e(1702)(\"\".slice);n.exports=function(a){return y(o(a),0,3)===\"Big\"}},614:function(n,r,e){var o=e(4154),y=o.all;n.exports=o.IS_HTMLDDA?function(a){return typeof a==\"function\"||a===y}:function(a){return typeof a==\"function\"}},4411:function(n,r,e){var o=e(1702),y=e(7293),a=e(614),f=e(648),g=e(5005),m=e(2788),d=function(){},c=[],l=g(\"Reflect\",\"construct\"),s=/^\\s*(?:class|function)\\b/,p=o(s.exec),v=!s.exec(d),x=function(O){if(!a(O))return!1;try{return l(d,c,O),!0}catch{return!1}},w=function(O){if(!a(O))return!1;switch(f(O)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}try{return v||!!p(s,m(O))}catch{return!0}};w.sham=!0,n.exports=!l||y(function(){var O;return x(x.call)||!x(Object)||!x(function(){O=!0})||O})?w:x},4705:function(n,r,e){var o=e(7293),y=e(614),a=/#|\\.prototype\\./,f=function(l,s){var p=m[g(l)];return p==c||p!=d&&(y(s)?o(s):!!s)},g=f.normalize=function(l){return String(l).replace(a,\".\").toLowerCase()},m=f.data={},d=f.NATIVE=\"N\",c=f.POLYFILL=\"P\";n.exports=f},8554:function(n){n.exports=function(r){return r==null}},111:function(n,r,e){var o=e(614),y=e(4154),a=y.all;n.exports=y.IS_HTMLDDA?function(f){return typeof f==\"object\"?f!==null:o(f)||f===a}:function(f){return typeof f==\"object\"?f!==null:o(f)}},1913:function(n){n.exports=!1},2190:function(n,r,e){var o=e(5005),y=e(614),a=e(7976),f=e(3307),g=Object;n.exports=f?function(m){return typeof m==\"symbol\"}:function(m){var d=o(\"Symbol\");return y(d)&&a(d.prototype,g(m))}},7497:function(n){n.exports={}},6244:function(n,r,e){var o=e(7466);n.exports=function(y){return o(y.length)}},6339:function(n,r,e){var o=e(7293),y=e(614),a=e(2597),f=e(9781),g=e(6530).CONFIGURABLE,m=e(2788),d=e(9909),c=d.enforce,l=d.get,s=Object.defineProperty,p=f&&!o(function(){return s(function(){},\"length\",{value:8}).length!==8}),v=String(String).split(\"String\"),x=n.exports=function(w,O,S){String(O).slice(0,7)===\"Symbol(\"&&(O=\"[\"+String(O).replace(/^Symbol\\(([^)]*)\\)/,\"$1\")+\"]\"),S&&S.getter&&(O=\"get \"+O),S&&S.setter&&(O=\"set \"+O),(!a(w,\"name\")||g&&w.name!==O)&&(f?s(w,\"name\",{value:O,configurable:!0}):w.name=O),p&&S&&a(S,\"arity\")&&w.length!==S.arity&&s(w,\"length\",{value:S.arity});try{S&&a(S,\"constructor\")&&S.constructor?f&&s(w,\"prototype\",{writable:!1}):w.prototype&&(w.prototype=void 0)}catch{}var b=c(w);return a(b,\"source\")||(b.source=v.join(typeof O==\"string\"?O:\"\")),w};Function.prototype.toString=x(function(){return y(this)&&l(this).source||m(this)},\"toString\")},4758:function(n){var r=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(o){var y=+o;return(y>0?e:r)(y)}},7023:function(n,r,e){var o=e(7854).isFinite;n.exports=Number.isFinite||function(y){return typeof y==\"number\"&&o(y)}},1574:function(n,r,e){\"use strict\";var o=e(9781),y=e(1702),a=e(6916),f=e(7293),g=e(1956),m=e(5181),d=e(5296),c=e(7908),l=e(8361),s=Object.assign,p=Object.defineProperty,v=y([].concat);n.exports=!s||f(function(){if(o&&s({b:1},s(p({},\"a\",{enumerable:!0,get:function(){p(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var x={},w={},O=Symbol(),S=\"abcdefghijklmnopqrst\";return x[O]=7,S.split(\"\").forEach(function(b){w[b]=b}),s({},x)[O]!=7||g(s({},w)).join(\"\")!=S})?function(x,w){for(var O=c(x),S=arguments.length,b=1,_=m.f,A=d.f;S>b;)for(var E,k=l(arguments[b++]),P=_?v(g(k),_(k)):g(k),j=P.length,T=0;j>T;)E=P[T++],o&&!a(A,k,E)||(O[E]=k[E]);return O}:s},30:function(n,r,e){var o,y=e(9670),a=e(6048),f=e(748),g=e(3501),m=e(490),d=e(317),c=e(6200),l=\"prototype\",s=\"script\",p=c(\"IE_PROTO\"),v=function(){},x=function(S){return\"<\"+s+\">\"+S+\"</\"+s+\">\"},w=function(S){S.write(x(\"\")),S.close();var b=S.parentWindow.Object;return S=null,b},O=function(){try{o=new ActiveXObject(\"htmlfile\")}catch{}var S,b,_;O=typeof document<\"u\"?document.domain&&o?w(o):(b=d(\"iframe\"),_=\"java\"+s+\":\",b.style.display=\"none\",m.appendChild(b),b.src=String(_),(S=b.contentWindow.document).open(),S.write(x(\"document.F=Object\")),S.close(),S.F):w(o);for(var A=f.length;A--;)delete O[l][f[A]];return O()};g[p]=!0,n.exports=Object.create||function(S,b){var _;return S!==null?(v[l]=y(S),_=new v,v[l]=null,_[p]=S):_=O(),b===void 0?_:a.f(_,b)}},6048:function(n,r,e){var o=e(9781),y=e(3353),a=e(3070),f=e(9670),g=e(5656),m=e(1956);r.f=o&&!y?Object.defineProperties:function(d,c){f(d);for(var l,s=g(c),p=m(c),v=p.length,x=0;v>x;)a.f(d,l=p[x++],s[l]);return d}},3070:function(n,r,e){var o=e(9781),y=e(4664),a=e(3353),f=e(9670),g=e(4948),m=TypeError,d=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=\"enumerable\",s=\"configurable\",p=\"writable\";r.f=o?a?function(v,x,w){if(f(v),x=g(x),f(w),typeof v==\"function\"&&x===\"prototype\"&&\"value\"in w&&p in w&&!w[p]){var O=c(v,x);O&&O[p]&&(v[x]=w.value,w={configurable:s in w?w[s]:O[s],enumerable:l in w?w[l]:O[l],writable:!1})}return d(v,x,w)}:d:function(v,x,w){if(f(v),x=g(x),f(w),y)try{return d(v,x,w)}catch{}if(\"get\"in w||\"set\"in w)throw m(\"Accessors not supported\");return\"value\"in w&&(v[x]=w.value),v}},1236:function(n,r,e){var o=e(9781),y=e(6916),a=e(5296),f=e(9114),g=e(5656),m=e(4948),d=e(2597),c=e(4664),l=Object.getOwnPropertyDescriptor;r.f=o?l:function(s,p){if(s=g(s),p=m(p),c)try{return l(s,p)}catch{}if(d(s,p))return f(!y(a.f,s,p),s[p])}},8006:function(n,r,e){var o=e(6324),y=e(748).concat(\"length\",\"prototype\");r.f=Object.getOwnPropertyNames||function(a){return o(a,y)}},5181:function(n,r){r.f=Object.getOwnPropertySymbols},9518:function(n,r,e){var o=e(2597),y=e(614),a=e(7908),f=e(6200),g=e(8544),m=f(\"IE_PROTO\"),d=Object,c=d.prototype;n.exports=g?d.getPrototypeOf:function(l){var s=a(l);if(o(s,m))return s[m];var p=s.constructor;return y(p)&&s instanceof p?p.prototype:s instanceof d?c:null}},7976:function(n,r,e){var o=e(1702);n.exports=o({}.isPrototypeOf)},6324:function(n,r,e){var o=e(1702),y=e(2597),a=e(5656),f=e(1318).indexOf,g=e(3501),m=o([].push);n.exports=function(d,c){var l,s=a(d),p=0,v=[];for(l in s)!y(g,l)&&y(s,l)&&m(v,l);for(;c.length>p;)y(s,l=c[p++])&&(~f(v,l)||m(v,l));return v}},1956:function(n,r,e){var o=e(6324),y=e(748);n.exports=Object.keys||function(a){return o(a,y)}},5296:function(n,r){\"use strict\";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,y=o&&!e.call({1:2},1);r.f=y?function(a){var f=o(this,a);return!!f&&f.enumerable}:e},7674:function(n,r,e){var o=e(1702),y=e(9670),a=e(6077);n.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var f,g=!1,m={};try{(f=o(Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set))(m,[]),g=m instanceof Array}catch{}return function(d,c){return y(d),a(c),g?f(d,c):d.__proto__=c,d}}():void 0)},4699:function(n,r,e){var o=e(9781),y=e(1702),a=e(1956),f=e(5656),g=y(e(5296).f),m=y([].push),d=function(c){return function(l){for(var s,p=f(l),v=a(p),x=v.length,w=0,O=[];x>w;)s=v[w++],o&&!g(p,s)||m(O,c?[s,p[s]]:p[s]);return O}};n.exports={entries:d(!0),values:d(!1)}},2140:function(n,r,e){var o=e(6916),y=e(614),a=e(111),f=TypeError;n.exports=function(g,m){var d,c;if(m===\"string\"&&y(d=g.toString)&&!a(c=o(d,g))||y(d=g.valueOf)&&!a(c=o(d,g))||m!==\"string\"&&y(d=g.toString)&&!a(c=o(d,g)))return c;throw f(\"Can't convert object to primitive value\")}},3887:function(n,r,e){var o=e(5005),y=e(1702),a=e(8006),f=e(5181),g=e(9670),m=y([].concat);n.exports=o(\"Reflect\",\"ownKeys\")||function(d){var c=a.f(g(d)),l=f.f;return l?m(c,l(d)):c}},857:function(n,r,e){var o=e(7854);n.exports=o},4488:function(n,r,e){var o=e(8554),y=TypeError;n.exports=function(a){if(o(a))throw y(\"Can't call method on \"+a);return a}},6200:function(n,r,e){var o=e(2309),y=e(9711),a=o(\"keys\");n.exports=function(f){return a[f]||(a[f]=y(f))}},5465:function(n,r,e){var o=e(7854),y=e(3072),a=\"__core-js_shared__\",f=o[a]||y(a,{});n.exports=f},2309:function(n,r,e){var o=e(1913),y=e(5465);(n.exports=function(a,f){return y[a]||(y[a]=f!==void 0?f:{})})(\"versions\",[]).push({version:\"3.27.1\",mode:o?\"pure\":\"global\",copyright:\"\\xA9 2014-2022 Denis Pushkarev (zloirock.ru)\",license:\"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE\",source:\"https://github.com/zloirock/core-js\"})},8415:function(n,r,e){\"use strict\";var o=e(9303),y=e(1340),a=e(4488),f=RangeError;n.exports=function(g){var m=y(a(this)),d=\"\",c=o(g);if(c<0||c==1/0)throw f(\"Wrong number of repetitions\");for(;c>0;(c>>>=1)&&(m+=m))1&c&&(d+=m);return d}},3111:function(n,r,e){var o=e(1702),y=e(4488),a=e(1340),f=e(1361),g=o(\"\".replace),m=\"[\"+f+\"]\",d=RegExp(\"^\"+m+m+\"*\"),c=RegExp(m+m+\"*$\"),l=function(s){return function(p){var v=a(y(p));return 1&s&&(v=g(v,d,\"\")),2&s&&(v=g(v,c,\"\")),v}};n.exports={start:l(1),end:l(2),trim:l(3)}},6293:function(n,r,e){var o=e(7392),y=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!y(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&o&&o<41})},863:function(n,r,e){var o=e(1702);n.exports=o(1 .valueOf)},1400:function(n,r,e){var o=e(9303),y=Math.max,a=Math.min;n.exports=function(f,g){var m=o(f);return m<0?y(m+g,0):a(m,g)}},4599:function(n,r,e){var o=e(7593),y=TypeError;n.exports=function(a){var f=o(a,\"number\");if(typeof f==\"number\")throw y(\"Can't convert number to bigint\");return BigInt(f)}},5656:function(n,r,e){var o=e(8361),y=e(4488);n.exports=function(a){return o(y(a))}},9303:function(n,r,e){var o=e(4758);n.exports=function(y){var a=+y;return a!=a||a===0?0:o(a)}},7466:function(n,r,e){var o=e(9303),y=Math.min;n.exports=function(a){return a>0?y(o(a),9007199254740991):0}},7908:function(n,r,e){var o=e(4488),y=Object;n.exports=function(a){return y(o(a))}},7593:function(n,r,e){var o=e(6916),y=e(111),a=e(2190),f=e(8173),g=e(2140),m=e(5112),d=TypeError,c=m(\"toPrimitive\");n.exports=function(l,s){if(!y(l)||a(l))return l;var p,v=f(l,c);if(v){if(s===void 0&&(s=\"default\"),p=o(v,l,s),!y(p)||a(p))return p;throw d(\"Can't convert object to primitive value\")}return s===void 0&&(s=\"number\"),g(l,s)}},4948:function(n,r,e){var o=e(7593),y=e(2190);n.exports=function(a){var f=o(a,\"string\");return y(f)?f:f+\"\"}},1694:function(n,r,e){var o={};o[e(5112)(\"toStringTag\")]=\"z\",n.exports=String(o)===\"[object z]\"},1340:function(n,r,e){var o=e(648),y=String;n.exports=function(a){if(o(a)===\"Symbol\")throw TypeError(\"Cannot convert a Symbol value to a string\");return y(a)}},6330:function(n){var r=String;n.exports=function(e){try{return r(e)}catch{return\"Object\"}}},3832:function(n,r,e){var o=e(7854),y=e(7293),a=e(7072),f=e(260).NATIVE_ARRAY_BUFFER_VIEWS,g=o.ArrayBuffer,m=o.Int8Array;n.exports=!f||!y(function(){m(1)})||!y(function(){new m(-1)})||!a(function(d){new m,new m(null),new m(1.5),new m(d)},!0)||y(function(){return new m(new g(2),1,void 0).length!==1})},7321:function(n,r,e){var o=e(9974),y=e(6916),a=e(9483),f=e(7908),g=e(6244),m=e(4121),d=e(1246),c=e(7659),l=e(4067),s=e(260).aTypedArrayConstructor,p=e(4599);n.exports=function(v){var x,w,O,S,b,_,A,E,k=a(this),P=f(v),j=arguments.length,T=j>1?arguments[1]:void 0,M=T!==void 0,R=d(P);if(R&&!c(R))for(E=(A=m(P,R)).next,P=[];!(_=y(E,A)).done;)P.push(_.value);for(M&&j>2&&(T=o(T,arguments[2])),w=g(P),O=new(s(k))(w),S=l(O),x=0;w>x;x++)b=M?T(P[x],x):P[x],O[x]=S?p(b):+b;return O}},9711:function(n,r,e){var o=e(1702),y=0,a=Math.random(),f=o(1 .toString);n.exports=function(g){return\"Symbol(\"+(g===void 0?\"\":g)+\")_\"+f(++y+a,36)}},3307:function(n,r,e){var o=e(6293);n.exports=o&&!Symbol.sham&&typeof Symbol.iterator==\"symbol\"},3353:function(n,r,e){var o=e(9781),y=e(7293);n.exports=o&&y(function(){return Object.defineProperty(function(){},\"prototype\",{value:42,writable:!1}).prototype!=42})},4811:function(n,r,e){var o=e(7854),y=e(614),a=o.WeakMap;n.exports=y(a)&&/native code/.test(String(a))},5112:function(n,r,e){var o=e(7854),y=e(2309),a=e(2597),f=e(9711),g=e(6293),m=e(3307),d=y(\"wks\"),c=o.Symbol,l=c&&c.for,s=m?c:c&&c.withoutSetter||f;n.exports=function(p){if(!a(d,p)||!g&&typeof d[p]!=\"string\"){var v=\"Symbol.\"+p;g&&a(c,p)?d[p]=c[p]:d[p]=m&&l?l(v):s(v)}return d[p]}},1361:function(n){n.exports=`\t\n\\v\\f\\r \\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF`},9826:function(n,r,e){\"use strict\";var o=e(2109),y=e(2092).find,a=e(1223),f=\"find\",g=!0;f in[]&&Array(1)[f](function(){g=!1}),o({target:\"Array\",proto:!0,forced:g},{find:function(m){return y(this,m,arguments.length>1?arguments[1]:void 0)}}),a(f)},6078:function(n,r,e){var o=e(2597),y=e(8052),a=e(8709),f=e(5112)(\"toPrimitive\"),g=Date.prototype;o(g,f)||y(g,f,a)},332:function(n,r,e){var o=e(2109),y=e(7293),a=Math.imul;o({target:\"Math\",stat:!0,forced:y(function(){return a(4294967295,5)!=-5||a.length!=2})},{imul:function(f,g){var m=65535,d=+f,c=+g,l=m&d,s=m&c;return 0|l*s+((m&d>>>16)*s+l*(m&c>>>16)<<16>>>0)}})},9653:function(n,r,e){\"use strict\";var o=e(2109),y=e(1913),a=e(9781),f=e(7854),g=e(857),m=e(1702),d=e(4705),c=e(2597),l=e(9587),s=e(7976),p=e(2190),v=e(7593),x=e(7293),w=e(8006).f,O=e(1236).f,S=e(3070).f,b=e(863),_=e(3111).trim,A=\"Number\",E=f[A],k=g[A],P=E.prototype,j=f.TypeError,T=m(\"\".slice),M=m(\"\".charCodeAt),R=function(F){var V=v(F,\"number\");return typeof V==\"bigint\"?V:L(V)},L=function(F){var V,W,G,H,$,ue,Q,U,D=v(F,\"number\");if(p(D))throw j(\"Cannot convert a Symbol value to a number\");if(typeof D==\"string\"&&D.length>2){if(D=_(D),(V=M(D,0))===43||V===45){if((W=M(D,2))===88||W===120)return NaN}else if(V===48){switch(M(D,1)){case 66:case 98:G=2,H=49;break;case 79:case 111:G=8,H=55;break;default:return+D}for(ue=($=T(D,2)).length,Q=0;Q<ue;Q++)if((U=M($,Q))<48||U>H)return NaN;return parseInt($,G)}}return+D},I=d(A,!E(\" 0o1\")||!E(\"0b1\")||E(\"+0x1\")),N=function(F){return s(P,F)&&x(function(){b(F)})},B=function(F){var V=arguments.length<1?0:E(R(F));return N(this)?l(Object(V),this,B):V};B.prototype=P,I&&!y&&(P.constructor=B),o({global:!0,constructor:!0,wrap:!0,forced:I},{Number:B});var q=function(F,V){for(var W,G=a?w(V):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range\".split(\",\"),H=0;G.length>H;H++)c(V,W=G[H])&&!c(F,W)&&S(F,W,O(V,W))};y&&k&&q(g[A],k),(I||y)&&q(g[A],E)},5192:function(n,r,e){e(2109)({target:\"Number\",stat:!0},{isFinite:e(7023)})},4048:function(n,r,e){e(2109)({target:\"Number\",stat:!0},{isNaN:function(o){return o!=o}})},6977:function(n,r,e){\"use strict\";var o=e(2109),y=e(1702),a=e(9303),f=e(863),g=e(8415),m=e(7293),d=RangeError,c=String,l=Math.floor,s=y(g),p=y(\"\".slice),v=y(1 .toFixed),x=function(b,_,A){return _===0?A:_%2==1?x(b,_-1,A*b):x(b*b,_/2,A)},w=function(b,_,A){for(var E=-1,k=A;++E<6;)k+=_*b[E],b[E]=k%1e7,k=l(k/1e7)},O=function(b,_){for(var A=6,E=0;--A>=0;)E+=b[A],b[A]=l(E/_),E=E%_*1e7},S=function(b){for(var _=6,A=\"\";--_>=0;)if(A!==\"\"||_===0||b[_]!==0){var E=c(b[_]);A=A===\"\"?E:A+s(\"0\",7-E.length)+E}return A};o({target:\"Number\",proto:!0,forced:m(function(){return v(8e-5,3)!==\"0.000\"||v(.9,0)!==\"1\"||v(1.255,2)!==\"1.25\"||v(0xde0b6b3a7640080,0)!==\"1000000000000000128\"})||!m(function(){v({})})},{toFixed:function(b){var _,A,E,k,P=f(this),j=a(b),T=[0,0,0,0,0,0],M=\"\",R=\"0\";if(j<0||j>20)throw d(\"Incorrect fraction digits\");if(P!=P)return\"NaN\";if(P<=-1e21||P>=1e21)return c(P);if(P<0&&(M=\"-\",P=-P),P>1e-21)if(A=(_=function(L){for(var I=0,N=L;N>=4096;)I+=12,N/=4096;for(;N>=2;)I+=1,N/=2;return I}(P*x(2,69,1))-69)<0?P*x(2,-_,1):P/x(2,_,1),A*=4503599627370496,(_=52-_)>0){for(w(T,0,A),E=j;E>=7;)w(T,1e7,0),E-=7;for(w(T,x(10,E,1),0),E=_-1;E>=23;)O(T,8388608),E-=23;O(T,1<<E),w(T,1,1),O(T,2),R=S(T)}else w(T,0,A),w(T,1<<-_,0),R=S(T)+s(\"0\",j);return R=j>0?M+((k=R.length)<=j?\"0.\"+s(\"0\",j-k)+R:p(R,0,k-j)+\".\"+p(R,k-j)):M+R}})},9601:function(n,r,e){var o=e(2109),y=e(1574);o({target:\"Object\",stat:!0,arity:2,forced:Object.assign!==y},{assign:y})},9720:function(n,r,e){var o=e(2109),y=e(4699).entries;o({target:\"Object\",stat:!0},{entries:function(a){return y(a)}})},8145:function(n,r,e){\"use strict\";var o=e(3832);(0,e(260).exportTypedArrayStaticMethod)(\"from\",e(7321),o)},5206:function(n,r,e){\"use strict\";var o=e(260),y=e(3832),a=o.aTypedArrayConstructor;(0,o.exportTypedArrayStaticMethod)(\"of\",function(){for(var f=0,g=arguments.length,m=new(a(this))(g);g>f;)m[f]=arguments[f++];return m},y)},3300:function(n,r,e){\"use strict\";var o=function(){if(typeof self<\"u\")return self;if(typeof window<\"u\")return window;if(e.g!==void 0)return e.g;throw new Error(\"unable to locate global object\")}();n.exports=r=o.fetch,o.fetch&&(r.default=o.fetch.bind(e.g)),r.Headers=o.Headers,r.Request=o.Request,r.Response=o.Response},1697:function(n,r,e){\"use strict\";n.exports=e(3188)()},3188:function(n){\"use strict\";function r(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}n.exports=function(e){return(e=e||{}).circles?function(y){var a=[],f=[];return y.proto?function m(d){if(typeof d!=\"object\"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return g(d,m);if(d instanceof Map)return new Map(g(Array.from(d),m));if(d instanceof Set)return new Set(g(Array.from(d),m));var c={};for(var l in a.push(d),f.push(c),d){var s=d[l];if(typeof s!=\"object\"||s===null)c[l]=s;else if(s instanceof Date)c[l]=new Date(s);else if(s instanceof Map)c[l]=new Map(g(Array.from(s),m));else if(s instanceof Set)c[l]=new Set(g(Array.from(s),m));else if(ArrayBuffer.isView(s))c[l]=r(s);else{var p=a.indexOf(s);c[l]=p!==-1?f[p]:m(s)}}return a.pop(),f.pop(),c}:function m(d){if(typeof d!=\"object\"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return g(d,m);if(d instanceof Map)return new Map(g(Array.from(d),m));if(d instanceof Set)return new Set(g(Array.from(d),m));var c={};for(var l in a.push(d),f.push(c),d)if(Object.hasOwnProperty.call(d,l)!==!1){var s=d[l];if(typeof s!=\"object\"||s===null)c[l]=s;else if(s instanceof Date)c[l]=new Date(s);else if(s instanceof Map)c[l]=new Map(g(Array.from(s),m));else if(s instanceof Set)c[l]=new Set(g(Array.from(s),m));else if(ArrayBuffer.isView(s))c[l]=r(s);else{var p=a.indexOf(s);c[l]=p!==-1?f[p]:m(s)}}return a.pop(),f.pop(),c};function g(m,d){for(var c=Object.keys(m),l=new Array(c.length),s=0;s<c.length;s++){var p=c[s],v=m[p];if(typeof v!=\"object\"||v===null)l[p]=v;else if(v instanceof Date)l[p]=new Date(v);else if(ArrayBuffer.isView(v))l[p]=r(v);else{var x=a.indexOf(v);l[p]=x!==-1?f[x]:d(v)}}return l}}(e):e.proto?function y(a){if(typeof a!=\"object\"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return o(a,y);if(a instanceof Map)return new Map(o(Array.from(a),y));if(a instanceof Set)return new Set(o(Array.from(a),y));var f={};for(var g in a){var m=a[g];typeof m!=\"object\"||m===null?f[g]=m:m instanceof Date?f[g]=new Date(m):m instanceof Map?f[g]=new Map(o(Array.from(m),y)):m instanceof Set?f[g]=new Set(o(Array.from(m),y)):ArrayBuffer.isView(m)?f[g]=r(m):f[g]=y(m)}return f}:function y(a){if(typeof a!=\"object\"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return o(a,y);if(a instanceof Map)return new Map(o(Array.from(a),y));if(a instanceof Set)return new Set(o(Array.from(a),y));var f={};for(var g in a)if(Object.hasOwnProperty.call(a,g)!==!1){var m=a[g];typeof m!=\"object\"||m===null?f[g]=m:m instanceof Date?f[g]=new Date(m):m instanceof Map?f[g]=new Map(o(Array.from(m),y)):m instanceof Set?f[g]=new Set(o(Array.from(m),y)):ArrayBuffer.isView(m)?f[g]=r(m):f[g]=y(m)}return f};function o(y,a){for(var f=Object.keys(y),g=new Array(f.length),m=0;m<f.length;m++){var d=f[m],c=y[d];typeof c!=\"object\"||c===null?g[d]=c:c instanceof Date?g[d]=new Date(c):ArrayBuffer.isView(c)?g[d]=r(c):g[d]=a(c)}return g}}}},t={};function i(n){var r=t[n];if(r!==void 0)return r.exports;var e=t[n]={exports:{}};return h[n](e,e.exports,i),e.exports}i.g=function(){if(typeof globalThis==\"object\")return globalThis;try{return this||new Function(\"return this\")()}catch{if(typeof window==\"object\")return window}}();var u={};return function(){\"use strict\";var n=u,r=function(m){return m&&m.__esModule?m:{default:m}},e=r(i(7621)),o=r(i(153)),y=i(7468),a=i(9003),f=i(9949),g=i(6354);n.default={mergeConfig:y.mergeConfig,AbortController:g.AbortController,Context:e.default,ContextDataProvider:a.ContextDataProvider,ContextPublisher:f.ContextPublisher,SDK:o.default}}(),u=u.default}()})});var Se={UNIT_ID:\"abs\",PUBLIC_ID:\"abs_public\",EXPIRY:\"abs_expiry\",UTM_PARAMS:\"abs_utm_params\",LANDING_PAGE:\"abs_landing_page\",OVERRIDES:\"abs_overrides\"},St={MAX_AGE_DAYS:730,PATH:\"/\",SAME_SITE:\"Lax\"};var $e=function(){return $e=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},$e.apply(this,arguments)},_t=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},yr=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},ye=typeof __DEBUG__<\"u\"?__DEBUG__:!0;function C(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];if(ye)if(h.length===2&&typeof h[0]==\"string\"&&typeof h[1]==\"object\"){var i=_t(h,2),u=i[0],n=i[1];if(u.includes(\"Original state already stored\")||u.includes(\"State store operation\")||u.includes(\"Performance:\")&&n?.duration&&n.duration<5||u.includes(\"Message sent:\")||u.includes(\"Message received:\"))return;var r=new Date().toISOString(),e=\"[ABsmartly Debug]\";console.log(\"\".concat(e,\" [\").concat(r,\"] \").concat(u),n)}else if(h.length===1&&typeof h[0]==\"string\"){var u=h[0];if(u.includes(\"Original state already stored\")||u.includes(\"State store operation\")||u.includes(\"Message sent:\")||u.includes(\"Message received:\"))return;var r=new Date().toISOString(),e=\"[ABsmartly Debug]\";console.log(\"\".concat(e,\" [\").concat(r,\"] \").concat(u))}else console.log.apply(console,yr([],_t(h),!1))}function _e(h,t,i,u,n){if(ye){var r=n?\"\\u2713\":\"\\u2717\",e=\"\".concat(r,\" Applied \").concat(i,\" change to \").concat(u,\" element(s)\");C(e,{experimentName:h,selector:t,changeType:i,elementsCount:u,success:n})}}function Et(h,t,i,u){if(ye){var n='Experiment \"'.concat(h,'\" summary');C(n,{experimentName:h,totalChanges:t,successfulChanges:i,pendingChanges:u,successRate:t>0?\"\".concat(Math.round(i/t*100),\"%\"):\"N/A\"})}}function Le(h,t,i){if(ye){var u=\"Performance: \".concat(h,\" took \").concat(t,\"ms\");C(u,$e({operation:h,duration:t,performance:!0},i))}}var ve=function(){return ve=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},ve.apply(this,arguments)},Z=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},At=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},kt=function(){function h(t,i){i===void 0&&(i=!1),this.applyFn=t,this.pending=new Map,this.observers=new Map,this.appliedSelectors=new Set,this.batchTimer=null,this.batchedWork=new Set,this.debug=i}return h.prototype.addPending=function(t){var i=t.change,u=t.observerRoot,n=u;u&&!document.querySelector(u)&&(this.debug&&C(\"[ABsmartly] Observer root not found, using document:\",u),n=void 0);var r=\"\".concat(i.selector,\"-\").concat(n||\"document\");this.debug&&C(\"[ABsmartly] Adding pending change for selector:\",i.selector);var e=this.getObserverRoot(n),o=e.querySelector(i.selector);if(o){this.applyChange(o,ve(ve({},t),{observerRoot:n}));return}var y=this.pending.get(r)||[];y.push(ve(ve({},t),{observerRoot:n})),this.pending.set(r,y),this.ensureObserver(n)},h.prototype.removePending=function(t,i,u){var n=\"\".concat(t,\"-\").concat(u||\"document\"),r=this.pending.get(n);if(r){var e=r.filter(function(o){return o.experimentName!==i});e.length===0?this.pending.delete(n):this.pending.set(n,e)}this.checkObserverCleanup(u)},h.prototype.removeAllPending=function(t){var i,u;try{for(var n=Z(this.pending.entries()),r=n.next();!r.done;r=n.next()){var e=At(r.value,2),o=e[0],y=e[1],a=y.filter(function(f){return f.experimentName!==t});a.length===0?this.pending.delete(o):this.pending.set(o,a)}}catch(f){i={error:f}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}this.cleanupObservers()},h.prototype.ensureObserver=function(t){var i=this,u=t||\"document\";if(!this.observers.has(u)){var n=this.getObserverRoot(t),r=new MutationObserver(function(e){i.handleMutations(e,t)});r.observe(n,{childList:!0,subtree:!0}),this.observers.set(u,r),this.debug&&C(\"[ABsmartly] Started observer for root:\",u)}},h.prototype.handleMutations=function(t,i){var u,n,r,e,o=this,y=[];try{for(var a=Z(t),f=a.next();!f.done;f=a.next()){var g=f.value,m=function(p){var v,x,w,O;if(!(p instanceof Element))return\"continue\";var S=i||\"document\";try{for(var b=(v=void 0,Z(d.pending.entries())),_=b.next();!_.done;_=b.next()){var A=At(_.value,2),E=A[0],k=A[1];if(E.endsWith(\"-\".concat(S))){var P=function(R){var L=R.change;if(p.matches(L.selector))return y.push(function(){return o.applyChange(p,R)}),\"continue\";var I=p.querySelectorAll(L.selector);I.forEach(function(N){y.push(function(){return o.applyChange(N,R)})})};try{for(var j=(w=void 0,Z(k)),T=j.next();!T.done;T=j.next()){var M=T.value;P(M)}}catch(R){w={error:R}}finally{try{T&&!T.done&&(O=j.return)&&O.call(j)}finally{if(w)throw w.error}}}}}catch(R){v={error:R}}finally{try{_&&!_.done&&(x=b.return)&&x.call(b)}finally{if(v)throw v.error}}},d=this;try{for(var c=(r=void 0,Z(g.addedNodes)),l=c.next();!l.done;l=c.next()){var s=l.value;m(s)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(r)throw r.error}}}}catch(p){u={error:p}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(u)throw u.error}}y.length>0&&this.batchWork(y)},h.prototype.batchWork=function(t){var i=this;t.forEach(function(u){return i.batchedWork.add(u)}),this.batchTimer&&clearTimeout(this.batchTimer),this.batchTimer=setTimeout(function(){i.processBatchedWork()},32)},h.prototype.processBatchedWork=function(){var t=Array.from(this.batchedWork);this.batchedWork.clear(),this.batchTimer=null,this.debug&&t.length>0&&C(\"[ABsmartly] Processing batched work:\",t.length,\"items\"),t.forEach(function(i){return i()})},h.prototype.applyChange=function(t,i){var u=i.change,n=i.experimentName,r=i.observerRoot,e=\"\".concat(u.selector,\"-\").concat(r||\"document\",\"-\").concat(n);if(!this.appliedSelectors.has(e)){this.debug&&C(\"[ABsmartly] Applying pending change to element:\",u.selector);var o=this.applyFn(u,n,t);if(o){this.appliedSelectors.add(e);var y=\"\".concat(u.selector,\"-\").concat(r||\"document\"),a=this.pending.get(y);if(a){var f=a.filter(function(g){return g.experimentName!==n||g.change.selector!==u.selector});f.length===0?this.pending.delete(y):this.pending.set(y,f)}this.checkObserverCleanup(r)}}},h.prototype.getObserverRoot=function(t){if(!t)return document.documentElement;var i=document.querySelector(t);return i||document.documentElement},h.prototype.checkObserverCleanup=function(t){var i,u,n=t||\"document\",r=!1;try{for(var e=Z(this.pending.keys()),o=e.next();!o.done;o=e.next()){var y=o.value;if(y.endsWith(\"-\".concat(n))){r=!0;break}}}catch(f){i={error:f}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}if(!r){var a=this.observers.get(n);a&&(a.disconnect(),this.observers.delete(n),this.debug&&C(\"[ABsmartly] Disconnected observer for root:\",n))}},h.prototype.cleanupObservers=function(){var t,i,u,n,r=this,e=[];try{for(var o=Z(this.observers.keys()),y=o.next();!y.done;y=o.next()){var a=y.value,f=!1;try{for(var g=(u=void 0,Z(this.pending.keys())),m=g.next();!m.done;m=g.next()){var d=m.value;if(d.endsWith(\"-\".concat(a))){f=!0;break}}}catch(c){u={error:c}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(u)throw u.error}}f||e.push(a)}}catch(c){t={error:c}}finally{try{y&&!y.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.forEach(function(c){var l=r.observers.get(c);l&&(l.disconnect(),r.observers.delete(c),r.debug&&C(\"[ABsmartly] Cleaned up observer for root:\",c))})},h.prototype.destroy=function(){var t,i;this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null);try{for(var u=Z(this.observers.values()),n=u.next();!n.done;n=u.next()){var r=n.value;r.disconnect()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}this.observers.clear(),this.pending.clear(),this.appliedSelectors.clear(),this.batchedWork.clear(),this.debug&&C(\"[ABsmartly] PendingChangeManager destroyed\")},h.prototype.getPendingCount=function(){var t,i,u=0;try{for(var n=Z(this.pending.values()),r=n.next();!r.done;r=n.next()){var e=r.value;u+=e.length}}catch(o){t={error:o}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u},h.prototype.getAppliedCount=function(){return this.appliedSelectors.size},h.prototype.hasPendingForExperiment=function(t){var i,u;try{for(var n=Z(this.pending.values()),r=n.next();!r.done;r=n.next()){var e=r.value;if(e.some(function(o){return o.experimentName===t}))return!0}}catch(o){i={error:o}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}return!1},h}();var vr=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ne=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Ct=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},Pt=function(){function h(t,i){t===void 0&&(t=!1);var u=this;this.appliedChanges=new Map,this.debug=t,this.plugin=i,this.pendingManager=new kt(function(n,r,e){return e?u.applyChangeToSpecificElement(n,r,e):u.applyChange(n,r)},t)}return h.prototype.applyChange=function(t,i){var u=this,n,r;if(!t.enabled&&t.enabled!==void 0)return C(\"Skipping disabled change for experiment: \".concat(i),{experimentName:i,selector:t.selector,changeType:t.type}),!1;var e=!!this.plugin.reapplyingElements&&Array.from(this.plugin.reapplyingElements).length>0;this.debug&&C(\"[DOM-APPLY] \".concat(e?\"RE-APPLYING\":\"APPLYING\",\" change\"),{experimentName:i,selector:t.selector,type:t.type,timestamp:Date.now(),callStack:(n=new Error().stack)===null||n===void 0?void 0:n.split(`\n`).slice(2,4).join(`\n`)});try{if(t.type===\"styleRules\")return this.applyStyleRules(t,i);if(t.type===\"create\"){if(t.element&&t.targetSelector){var o=this.createElement(t,i);if(o)return this.trackAppliedChange(i,t),_e(i,t.targetSelector,t.type,1,!0),!0}return!1}var y=document.querySelectorAll(t.selector),a=[];if(y.length===0){var f=t.waitForElement||((r=this.plugin.config)===null||r===void 0?void 0:r.spa);return f?(this.debug&&C(\"[ABsmartly] Element not found, adding to pending: \".concat(t.selector)),this.pendingManager.addPending({change:t,experimentName:i,observerRoot:t.observerRoot}),!0):(this.debug&&C(\"[ABsmartly] No elements found for selector: \".concat(t.selector)),C(\"No elements found for selector\",{experimentName:i,selector:t.selector,changeType:t.type}),!1)}if(y.forEach(function(m){var d,c;if(u.debug&&t.type===\"style\"){var l={};t.value&&typeof t.value==\"object\"&&Object.keys(t.value).forEach(function(S){var b=S.replace(/([A-Z])/g,\"-$1\").toLowerCase();l[b]=m.style.getPropertyValue(b)}),C(\"[DOM-BEFORE-APPLY] Element styles before change\",{experimentName:i,selector:t.selector,element:m.tagName,oldStyles:l,newStyles:t.value})}if(u.applyChangeToElement(m,t),u.debug&&t.type===\"style\"){var s={};t.value&&typeof t.value==\"object\"&&Object.keys(t.value).forEach(function(S){var b=S.replace(/([A-Z])/g,\"-$1\").toLowerCase();s[b]=m.style.getPropertyValue(b)}),C(\"[DOM-AFTER-APPLY] Element styles after change\",{experimentName:i,selector:t.selector,element:m.tagName,appliedStyles:s})}if(t.type===\"javascript\"){if(t.value)try{var p=new Function(\"element\",String(t.value));p(m),a.push(m)}catch(S){C(\"[ABsmartly] JavaScript execution error:\",S)}}else if(t.type===\"move\"){var v=t.targetSelector||(t.value&&typeof t.value==\"object\"?t.value.targetSelector:null),x=t.position||(t.value&&typeof t.value==\"object\"?t.value.position:null);if(v){var w=document.querySelector(v);w?(u.moveElement(m,w,x),a.push(m)):u.debug&&C(\"[ABsmartly] Move target not found: \".concat(v))}}else a.push(m);var O=t.type===\"style\"&&t.persistStyle||((d=u.plugin.config)===null||d===void 0?void 0:d.spa);O?u.plugin.watchElement(m,i,t):t.type===\"style\"&&u.debug&&C(\"[WATCH-SKIP] NOT watching element - persistStyle and SPA both disabled\",{experimentName:i,selector:t.selector,element:m.tagName,persistStyle:t.persistStyle,spaMode:(c=u.plugin.config)===null||c===void 0?void 0:c.spa})}),a.length>0){this.trackAppliedChange(i,t),t.waitForElement&&this.pendingManager.removePending(t.selector,i,t.observerRoot);var g=a.some(function(m){var d;return(d=u.plugin.reapplyingElements)===null||d===void 0?void 0:d.has(m)});return g||_e(i,t.selector,t.type,a.length,!0),!0}return _e(i,t.selector,t.type,0,!1),!1}catch(m){return this.debug&&C(\"[ABsmartly] Error applying DOM change:\",m,t),C(\"Error applying DOM change\",{experimentName:i,selector:t.selector,changeType:t.type,error:m instanceof Error?m.message:\"Unknown error\"}),!1}},h.prototype.moveElement=function(t,i,u){var n,r,e;switch(u){case\"before\":(n=i.parentElement)===null||n===void 0||n.insertBefore(t,i);break;case\"after\":i.nextSibling?(r=i.parentElement)===null||r===void 0||r.insertBefore(t,i.nextSibling):(e=i.parentElement)===null||e===void 0||e.appendChild(t);break;case\"firstChild\":i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t);break;case\"lastChild\":default:i.appendChild(t);break}},h.prototype.createElement=function(t,i){var u,n;if(!t.element||!t.targetSelector)return null;var r=document.querySelector(t.targetSelector);if(!r)return this.debug&&C(\"[ABsmartly] Create target not found: \".concat(t.targetSelector)),null;var e=document.createElement(\"div\");e.innerHTML=t.element;var o=Array.from(e.children);if(o.length===0)return null;try{for(var y=vr(o),a=y.next();!a.done;a=y.next()){var f=a.value;this.moveElement(f,r,t.position)}}catch(g){u={error:g}}finally{try{a&&!a.done&&(n=y.return)&&n.call(y)}finally{if(u)throw u.error}}return o[0]},h.prototype.applyStyleRules=function(t,i){try{var u=this.plugin.getStyleManager(i),n=\"\".concat(t.selector,\"::states\"),r=void 0;if(typeof t.value==\"string\"&&t.value.trim())r=t.value;else if(t.states)r=this.plugin.buildStateRules(t.selector,t.states,t.important!==!1);else return!1;return u.setRule(n,r),this.debug&&(C(\"[ABsmartly] Applied style rule: \".concat(n)),C(\"[ABsmartly] CSS: \".concat(r))),this.trackAppliedChange(i,t),_e(i,t.selector,\"styleRules\",1,!0),!0}catch(e){return this.debug&&C(\"[ABsmartly] Error applying style rules:\",e),!1}},h.prototype.applyChangeToElement=function(t,i){var u,n;switch(i.type){case\"text\":i.value!==void 0&&(t.textContent=String(i.value));break;case\"html\":i.value!==void 0&&(t.innerHTML=String(i.value));break;case\"style\":i.value&&typeof i.value==\"object\"&&Object.entries(i.value).forEach(function(o){var y=Ne(o,2),a=y[0],f=y[1],g=a.replace(/([A-Z])/g,\"-$1\").toLowerCase(),m=i.important===!0?\"important\":\"\";t.style.setProperty(g,String(f),m)});break;case\"class\":i.add&&Array.isArray(i.add)&&(u=t.classList).add.apply(u,Ct([],Ne(i.add),!1)),i.remove&&Array.isArray(i.remove)&&(n=t.classList).remove.apply(n,Ct([],Ne(i.remove),!1));break;case\"attribute\":i.value&&typeof i.value==\"object\"&&Object.entries(i.value).forEach(function(o){var y=Ne(o,2),a=y[0],f=y[1];f==null?t.removeAttribute(a):t.setAttribute(a,String(f))});break;case\"move\":if(i.value&&typeof i.value==\"object\"){var r=i.value,e=document.querySelector(r.targetSelector);e?this.moveElement(t,e,r.position):this.debug&&C(\"[ABsmartly] Move target not found: \".concat(r.targetSelector))}break;case\"delete\":t.remove();break}},h.prototype.applyChangeToSpecificElement=function(t,i,u){var n;try{if(this.applyChangeToElement(u,t),t.type===\"javascript\"&&t.value)try{var r=new Function(\"element\",String(t.value));r(u)}catch(f){return C(\"[ABsmartly] JavaScript execution error:\",f),!1}else if(t.type===\"move\"){var e=t.targetSelector||(t.value&&typeof t.value==\"object\"?t.value.targetSelector:null),o=t.position||(t.value&&typeof t.value==\"object\"?t.value.position:null);if(e){var y=document.querySelector(e);if(y)this.moveElement(u,y,o);else return!1}}var a=t.type===\"style\"&&t.persistStyle||((n=this.plugin.config)===null||n===void 0?void 0:n.spa);return a&&this.plugin.watchElement(u,i,t),!0}catch(f){return this.debug&&C(\"[ABsmartly] Error applying change to specific element:\",f),!1}},h.prototype.trackAppliedChange=function(t,i){var u=this.appliedChanges.get(t);u||(u=new Set,this.appliedChanges.set(t,u));var n=\"\".concat(i.selector,\"-\").concat(i.type);u.add(n)},h.prototype.hasChanges=function(t){return this.appliedChanges.has(t)},h.prototype.clearTracking=function(t){t?this.appliedChanges.delete(t):this.appliedChanges.clear()},h.prototype.removeAllPending=function(t){this.pendingManager.removeAllPending(t)},h.prototype.destroy=function(){this.pendingManager.destroy(),this.appliedChanges.clear()},h}();var le=function(){function h(){}return h.matches=function(t,i){i===void 0&&(i=window.location.href);var u=this.normalizeFilter(t),n=this.extractURLPart(i,u.matchType);return u.exclude&&this.matchesPatterns(u.exclude,n,u.mode)?!1:u.include?u.include.length===0?!1:this.matchesPatterns(u.include,n,u.mode):!0},h.extractURLPart=function(t,i){i===void 0&&(i=\"path\");try{var u=new URL(t);switch(i){case\"full-url\":return u.href;case\"path\":return u.pathname+u.hash;case\"domain\":return u.hostname;case\"query\":return u.search;case\"hash\":return u.hash;default:return u.pathname+u.hash}}catch(n){return console.error(\"[ABsmartly] Failed to parse URL: \".concat(t),n),t}},h.matchesPatterns=function(t,i,u){var n=this;return u===void 0&&(u=\"simple\"),t.some(function(r){if(u===\"regex\")try{return new RegExp(r).test(i)}catch(e){return console.error(\"[ABsmartly] Invalid regex pattern: \".concat(r),e),!1}return n.matchSimplePattern(r,i)})},h.matchSimplePattern=function(t,i){var u=t.replace(/[.+^${}()|[\\]\\\\]/g,\"\\\\$&\").replace(/\\*/g,\".*\").replace(/\\?/g,\".\");try{return new RegExp(\"^\".concat(u,\"$\")).test(i)}catch(n){return console.error(\"[ABsmartly] Invalid pattern: \".concat(t),n),!1}},h.normalizeFilter=function(t){return typeof t==\"string\"?{include:[t],exclude:[],mode:\"simple\",matchType:\"path\"}:Array.isArray(t)?{include:t.length>0?t:void 0,exclude:[],mode:\"simple\",matchType:\"path\"}:{include:t.include,exclude:t.exclude||[],mode:t.mode||\"simple\",matchType:t.matchType||\"path\"}},h}();var hr=function(h,t){var i={};for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&t.indexOf(u)<0&&(i[u]=h[u]);if(h!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var n=0,u=Object.getOwnPropertySymbols(h);n<u.length;n++)t.indexOf(u[n])<0&&Object.prototype.propertyIsEnumerable.call(h,u[n])&&(i[u[n]]=h[u[n]]);return i},Be=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ue=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},jt=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},Tt=function(){function h(t,i,u){i===void 0&&(i=\"__dom_changes\"),u===void 0&&(u=!1),this.cachedAllChanges=null,this.context=t,this.variableName=i,this.debug=u}return h.prototype.clearCache=function(){this.cachedAllChanges=null},h.prototype.extractAllChanges=function(){var t,i,u,n,r,e,o;if(this.cachedAllChanges)return this.debug&&C(\"[ABsmartly VariantExtractor] Returning cached changes\"),this.cachedAllChanges;var y=new Map;try{var a=this.context.data();if(C(\"[VariantExtractor DEBUG] Raw context data structure:\",{hasData:!!a,contextKeys:a?Object.keys(a):[],experimentCount:((u=a?.experiments)===null||u===void 0?void 0:u.length)||0,firstExperiment:!((n=a?.experiments)===null||n===void 0)&&n[0]?{name:a.experiments[0].name,variantCount:((r=a.experiments[0].variants)===null||r===void 0?void 0:r.length)||0,firstVariantStructure:!((e=a.experiments[0].variants)===null||e===void 0)&&e[0]?Object.keys(a.experiments[0].variants[0]):[]}:null,rawContextData:JSON.stringify(a).substring(0,500)+\"...\"}),this.debug&&C(\"[ABsmartly VariantExtractor] Extracting changes from context:\",{hasData:!!a,experimentCount:((o=a?.experiments)===null||o===void 0?void 0:o.length)||0}),a?.experiments){this.debug&&C(\"[ABsmartly VariantExtractor] Available experiments:\",a.experiments.map(function(c){var l;return{name:c.name,hasVariants:!!c.variants,variantCount:((l=c.variants)===null||l===void 0?void 0:l.length)||0}}));try{for(var f=Be(a.experiments),g=f.next();!g.done;g=f.next()){var m=g.value,d=this.extractAllVariantsForExperiment(m);d.size>0?(y.set(m.name,d),this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(m.name,\"' has DOM changes:\"),{variantsWithChanges:Array.from(d.keys()),changesByVariant:Array.from(d.entries()).map(function(c){var l=Ue(c,2),s=l[0],p=l[1];return{variant:s,changeCount:p.length,changeTypes:jt([],Ue(new Set(p.map(function(v){return v.type}))),!1)}})})):this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(m.name,\"' has no DOM changes\"))}}catch(c){t={error:c}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}}}catch(c){C(\"[ABsmartly] Error extracting DOM changes:\",c)}return this.cachedAllChanges=y,y},h.prototype.extractAllVariantsForExperiment=function(t){var i,u=new Map;if(C(\"[DEBUG] Processing experiment:\",t.name,\"with\",((i=t.variants)===null||i===void 0?void 0:i.length)||0,\"variants\"),!t.variants)return C(\"[DEBUG] No variants found for experiment:\",t.name),u;for(var n=0;n<t.variants.length;n++){var r=t.variants[n];if(r){var e=null;if(r.config)try{var o=typeof r.config==\"string\"?JSON.parse(r.config):r.config;C(\"[VariantExtractor DEBUG] Parsed config for variant \".concat(n,\":\"),o),o&&o[this.variableName]?(e=o[this.variableName],C(\"[VariantExtractor DEBUG] \\u2713 Found DOM changes in config[\".concat(this.variableName,\"]:\"),e)):C(\"[VariantExtractor DEBUG] \\u2717 No \".concat(this.variableName,\" field found in parsed config for variant \").concat(n))}catch(a){C(\"[VariantExtractor DEBUG] \\u2717 Failed to parse variant.config for variant \".concat(n,\":\"),a,\"Raw config:\",typeof r.config==\"string\"?r.config.substring(0,100):\"\")}else C(\"[VariantExtractor DEBUG] \\u2717 No config field found for variant \".concat(n));if(e){var y=this.extractChangesFromData(e);y&&y.length>0&&u.set(n,y)}}}return u},h.prototype.extractChangesFromData=function(t){if(!t)return null;if(typeof t==\"string\")try{t=JSON.parse(t)}catch(u){return C(\"[ABsmartly] Failed to parse DOM changes JSON:\",u),null}if(t&&typeof t==\"object\"&&!Array.isArray(t)&&\"changes\"in t){var i=t;return this.parseChanges(i.changes)}return this.parseChanges(t)},h.prototype.getExperimentChanges=function(t){var i=this.extractAllChanges(),u=i.get(t);if(!u||u.size===0)return null;var n=this.context.peek(t);return n==null?(this.debug&&C(\"[ABsmartly] No variant selected for \".concat(t)),null):u.get(n)||null},h.prototype.parseChanges=function(t){var i,u;if(!t)return null;if(typeof t==\"string\")try{t=JSON.parse(t)}catch(y){return C(\"[ABsmartly] Failed to parse DOM changes JSON:\",y),null}if(!Array.isArray(t))return this.debug&&C(\"[ABsmartly] DOM changes data is not an array\"),null;var n=[];try{for(var r=Be(t),e=r.next();!e.done;e=r.next()){var o=e.value;this.isValidChange(o)?n.push(o):this.debug&&C(\"[ABsmartly] Invalid DOM change:\",o)}}catch(y){i={error:y}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}return n.length>0?n:null},h.prototype.isValidChange=function(t){if(!t||typeof t!=\"object\")return!1;var i=t;if(i.selector===void 0||i.selector===null||!i.type)return!1;var u=[\"text\",\"html\",\"style\",\"class\",\"attribute\",\"javascript\",\"move\",\"create\",\"delete\",\"styleRules\"];if(!u.includes(i.type))return!1;switch(i.type){case\"class\":if(!i.add&&!i.remove||i.add&&!Array.isArray(i.add)||i.remove&&!Array.isArray(i.remove))return!1;break;case\"move\":if(!i.targetSelector)return!1;break;case\"create\":if(!i.element||!i.targetSelector)return!1;break;case\"style\":case\"attribute\":if(!i.value||typeof i.value!=\"object\")return!1;break}return!0},h.prototype.getAllVariantChanges=function(t){var i=this.extractAllChanges(),u=i.get(t);if(!u)return[];for(var n=Math.max.apply(Math,jt([],Ue(u.keys()),!1)),r=[],e=0;e<=n;e++)r.push(u.get(e)||[]);return r},h.prototype.getExperiment=function(t){try{var i=this.context.data();return!i||!i.experiments?null:i.experiments.find(function(u){return u.name===t})||null}catch(u){return this.debug&&C(\"[ABsmartly VariantExtractor] Failed to get experiment '\".concat(t,\"' - context may not be ready:\"),u),null}},h.prototype.getAllVariantsData=function(t){var i=new Map;try{var u=this.context.data();if(!u?.experiments)return i;var n=u.experiments.find(function(a){return a.name===t});if(!n?.variants)return i;for(var r=0;r<n.variants.length;r++){var e=n.variants[r];if(e){var o=null;if(e.variables&&e.variables[this.variableName])o=e.variables[this.variableName];else if(e.config)try{var y=typeof e.config==\"string\"?JSON.parse(e.config):e.config;y&&y[this.variableName]&&(o=y[this.variableName])}catch(a){C(\"[VariantExtractor] Failed to parse variant.config:\",a)}if(o){if(typeof o==\"string\")try{o=JSON.parse(o)}catch(a){C(\"[ABsmartly] Failed to parse DOM changes JSON:\",a);continue}i.set(r,o)}}}}catch(a){C(\"[ABsmartly] Error getting all variants data:\",a)}return i},h.prototype.anyVariantMatchesURL=function(t,i){var u,n;i===void 0&&(i=window.location.href);var r=this.getAllVariantsData(t),e=!1;try{for(var o=Be(r),y=o.next();!y.done;y=o.next()){var a=Ue(y.value,2),f=a[1];if(f&&typeof f==\"object\"&&!Array.isArray(f)&&\"urlFilter\"in f){var g=f;if(g.urlFilter&&(e=!0,le.matches(g.urlFilter,i)))return!0}}}catch(m){u={error:m}}finally{try{y&&!y.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}return!e},h.prototype.extractAllInjectHTML=function(){var t,i,u=new Map;try{var n=this.context.data();if(this.debug&&C(\"[ABsmartly VariantExtractor] Extracting __inject_html from context\"),n?.experiments)try{for(var r=Be(n.experiments),e=r.next();!e.done;e=r.next()){var o=e.value,y=this.extractInjectHTMLForExperiment(o);y.size>0&&(u.set(o.name,y),this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(o.name,\"' has HTML injections:\"),{variantsWithInjections:Array.from(y.keys())}))}}catch(a){t={error:a}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}catch(a){C(\"[ABsmartly] Error extracting __inject_html:\",a)}return u},h.prototype.extractInjectHTMLForExperiment=function(t){var i=new Map;if(!t.variants)return i;for(var u=0;u<t.variants.length;u++){var n=t.variants[u];if(n){var r=null;if(n.variables&&n.variables.__inject_html)r=n.variables.__inject_html,this.debug&&C(\"[VariantExtractor] Found __inject_html in variables for \".concat(t.name,\" variant \").concat(u));else if(n.config)try{var e=typeof n.config==\"string\"?JSON.parse(n.config):n.config;e&&e.__inject_html&&(r=e.__inject_html,this.debug&&C(\"[VariantExtractor] Found __inject_html in config for \".concat(t.name,\" variant \").concat(u)))}catch(g){C(\"[VariantExtractor] Failed to parse variant.config for \".concat(t.name,\" variant \").concat(u,\":\"),g)}if(r&&typeof r==\"object\"&&!Array.isArray(r)){var o=r,y=o.urlFilter,a=hr(o,[\"urlFilter\"]),f={data:a,urlFilter:y||void 0};i.set(u,f),this.debug&&C(\"[VariantExtractor] Extracted __inject_html for \".concat(t.name,\" variant \").concat(u,\":\"),{keys:Object.keys(a),hasUrlFilter:!!y})}else r&&this.debug&&C(\"[VariantExtractor] Invalid __inject_html format in \".concat(t.name,\" variant \").concat(u),r)}}return i},h}();var Mt=function(){function h(t,i){i===void 0&&(i=!1),this.id=t,this.styleEl=null,this.rules=new Map,this.debug=i}return h.prototype.ensure=function(){if((!this.styleEl||!document.head.contains(this.styleEl))&&(this.styleEl=document.getElementById(this.id),!this.styleEl)){var t=document.createElement(\"style\");t.id=this.id,t.setAttribute(\"data-absmartly-styles\",\"true\"),document.head.appendChild(t),this.styleEl=t,this.debug&&C(\"[ABsmartly] Created stylesheet: \".concat(this.id))}return this.styleEl},h.prototype.setRule=function(t,i){this.rules.set(t,i),this.render(),this.debug&&C(\"[ABsmartly] Set CSS rule for \".concat(t))},h.prototype.deleteRule=function(t){this.rules.delete(t)&&(this.render(),this.debug&&C(\"[ABsmartly] Deleted CSS rule for \".concat(t)))},h.prototype.hasRule=function(t){return this.rules.has(t)},h.prototype.clear=function(){var t=this.rules.size>0;this.rules.clear(),t&&(this.render(),this.debug&&C(\"[ABsmartly] Cleared all CSS rules from \".concat(this.id)))},h.prototype.destroy=function(){this.clear(),this.styleEl&&document.head.contains(this.styleEl)&&(this.styleEl.remove(),this.styleEl=null,this.debug&&C(\"[ABsmartly] Destroyed stylesheet: \".concat(this.id)))},h.prototype.render=function(){var t=this.ensure(),i=Array.from(this.rules.values()).join(`\n\n`);t.textContent=i},h.prototype.getRulesCount=function(){return this.rules.size},h.prototype.getCssText=function(){return Array.from(this.rules.values()).join(`\n\n`)},h}();var gr=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},mr=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},It=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Rt=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},Lt=function(){function h(t,i){i===void 0&&(i=!1),this.context=t,this.experiments=new Map,this.trackedElements=new Map,this.mutationObserver=null,this.placeholders=new Map,this.debug=i,this.setupIntersectionObserver()}return h.prototype.registerExperiment=function(t,i,u,n,r,e){var o=this;this.debug&&C(\"[ABsmartly] Registering experiment \".concat(t,\" for exposure tracking\"));var y=new Set,a=new Set,f=new Map;n.forEach(function(m){m.forEach(function(d){d.trigger_on_view&&(d.type===\"move\"?(f.has(d.selector)||f.set(d.selector,new Set),d.targetSelector&&f.get(d.selector).add(d.targetSelector)):y.add(d.selector))})}),f.forEach(function(m,d){var c=[];n.forEach(function(s,p){var v=s.find(function(x){return x.type===\"move\"&&x.selector===d&&x.trigger_on_view});v?.targetSelector&&c.push({targetSelector:v.targetSelector,position:v.position||\"lastChild\",variantIndex:p})});var l=c.findIndex(function(s){return s.variantIndex===i});l>=0?(y.add(d),c.forEach(function(s,p){p!==l&&o.createContainerPlaceholder(t,d,s.targetSelector,s.position)})):(y.add(d),c.forEach(function(s){o.createContainerPlaceholder(t,d,s.targetSelector,s.position)}))});var g={experimentName:t,variant:i,changes:u,allPossibleSelectors:new Set(Rt(Rt([],It(y),!1),It(a),!1)),triggered:!1,hasImmediateTrigger:r,hasViewportTrigger:e};this.experiments.set(t,g),this.debug&&C(\"[ABsmartly] Experiment \".concat(t,\" will track selectors:\"),Array.from(g.allPossibleSelectors)),r?this.triggerExposure(t).catch(function(m){C(\"[ABsmartly] Failed to trigger exposure for \".concat(t,\":\"),m)}):e&&this.observeSelectors(t,g.allPossibleSelectors)},h.prototype.createContainerPlaceholder=function(t,i,u,n){var r,e;n===void 0&&(n=\"lastChild\");var o=document.querySelector(u);if(o){var y=\"\".concat(t,\"-\").concat(i,\"-\").concat(u,\"-\").concat(n);if(!this.placeholders.has(y)){var a=document.createElement(\"span\");switch(a.style.cssText=`\n      display: inline-block;\n      width: 1px;\n      height: 1px;\n      position: relative;\n      left: -1px;\n      visibility: hidden;\n      pointer-events: none;\n      font-size: 0;\n      line-height: 0;\n      overflow: hidden;\n    `,a.setAttribute(\"data-absmartly-placeholder\",\"true\"),a.setAttribute(\"data-absmartly-original-selector\",i),a.setAttribute(\"data-absmartly-experiment\",t),a.setAttribute(\"aria-hidden\",\"true\"),n){case\"firstChild\":o.insertBefore(a,o.firstChild);break;case\"lastChild\":o.appendChild(a);break;case\"before\":(r=o.parentElement)===null||r===void 0||r.insertBefore(a,o);break;case\"after\":(e=o.parentElement)===null||e===void 0||e.insertBefore(a,o.nextSibling);break;default:o.appendChild(a)}this.placeholders.set(y,a),this.trackElement(a,t),this.debug&&C(\"[ABsmartly] Created placeholder for \".concat(i,\" at \").concat(u,\" (\").concat(n,\")\"))}}},h.prototype.getOriginalParentForMove=function(t){var i=document.querySelector(t);return i?.parentElement?this.getStableParentSelector(i.parentElement):null},h.prototype.getStableParentSelector=function(t){if(t.id)return\"#\".concat(t.id);if(t.className){var i=t.className.split(\" \").filter(function(e){return e&&!e.startsWith(\"absmartly\")});if(i.length>0)return\".\".concat(i[0])}var u=t.parentElement;if(u){var n=Array.from(u.children),r=n.indexOf(t);return\"\".concat(t.tagName.toLowerCase(),\":nth-child(\").concat(r+1,\")\")}return null},h.prototype.observeSelectors=function(t,i){var u=this;i.forEach(function(n){var r=document.querySelectorAll(n);r.length>0?r.forEach(function(e){u.trackElement(e,t)}):u.watchForSelector(n,t)})},h.prototype.trackElement=function(t,i){this.trackedElements.has(t)?this.trackedElements.get(t).experiments.add(i):(this.trackedElements.set(t,{element:t,experiments:new Set([i]),isPlaceholder:t.hasAttribute(\"data-absmartly-placeholder\")}),this.observer.observe(t))},h.prototype.watchForSelector=function(t,i){this.mutationObserver||this.setupMutationObserver()},h.prototype.setupIntersectionObserver=function(){var t=this;this.observer=new IntersectionObserver(function(i){i.forEach(function(u){u.isIntersecting&&t.handleElementVisible(u.target)})},{threshold:.01,rootMargin:\"0px\"})},h.prototype.setupMutationObserver=function(){var t=this;this.mutationObserver=new MutationObserver(function(i){i.forEach(function(u){u.addedNodes.forEach(function(n){n instanceof Element&&t.checkNewElement(n)})})}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})},h.prototype.checkNewElement=function(t){var i=this;this.experiments.forEach(function(u,n){u.allPossibleSelectors.forEach(function(r){t.matches(r)&&i.trackElement(t,n),t.querySelectorAll(r).forEach(function(e){i.trackElement(e,n)})})})},h.prototype.handleElementVisible=function(t){var i=this,u=this.trackedElements.get(t);u&&u.experiments.forEach(function(n){var r=i.experiments.get(n);if(r&&!r.triggered&&(i.triggerExposure(n).catch(function(o){C(\"[ABsmartly] Failed to trigger exposure for \".concat(n,\":\"),o)}),i.debug)){var e=u.isPlaceholder?t.getAttribute(\"data-absmartly-original-selector\"):i.getElementSelector(t);C(\"[ABsmartly] Triggering exposure for \".concat(n,\" via \").concat(e))}})},h.prototype.triggerExposure=function(t){return gr(this,void 0,void 0,function(){var i;return mr(this,function(u){switch(u.label){case 0:return i=this.experiments.get(t),!i||i.triggered?[2]:[4,this.context.ready()];case 1:return u.sent(),this.context.treatment(t),i.triggered=!0,this.debug&&C(\"[ABsmartly] Exposure triggered for experiment: \".concat(t)),this.cleanupExperiment(t),[2]}})})},h.prototype.cleanupExperiment=function(t){var i=this;this.trackedElements.forEach(function(n,r){n.experiments.delete(t),n.experiments.size===0&&(i.observer.unobserve(r),i.trackedElements.delete(r))}),this.placeholders.forEach(function(n,r){r.startsWith(\"\".concat(t,\"-\"))&&(n.remove(),i.placeholders.delete(r))});var u=this.experiments.get(t);u&&u.allPossibleSelectors.clear(),this.experiments.size===0&&this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)},h.prototype.getElementSelector=function(t){if(t.id)return\"#\".concat(t.id);if(t.className){var i=t.className.split(\" \").filter(function(u){return u&&!u.startsWith(\"absmartly\")});if(i.length>0)return\".\".concat(i.join(\".\"))}return t.tagName.toLowerCase()},h.prototype.needsViewportTracking=function(t){var i,u=this.experiments.get(t);return(i=u?.hasViewportTrigger)!==null&&i!==void 0?i:!1},h.prototype.isTriggered=function(t){var i,u=this.experiments.get(t);return(i=u?.triggered)!==null&&i!==void 0?i:!1},h.prototype.destroy=function(){this.observer.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),this.placeholders.forEach(function(t){return t.remove()}),this.experiments.clear(),this.trackedElements.clear(),this.placeholders.clear(),this.debug&&C(\"[ABsmartly] ExposureTracker destroyed\")},h}();var se=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},he=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},br=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},Nt=function(){function h(t){t===void 0&&(t=!1),this.injectedIds=new Set,this.debug=t}return h.prototype.parseInjectionKey=function(t){var i,u,n=[\"headStart\",\"headEnd\",\"bodyStart\",\"bodyEnd\"];try{for(var r=se(n),e=r.next();!e.done;e=r.next()){var o=e.value;if(t===o)return{location:o,priority:0};if(t.startsWith(o)){var y=t.substring(o.length),a=parseInt(y,10);if(!isNaN(a))return{location:o,priority:a}}}}catch(f){i={error:f}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}return this.debug&&C(\"[HTMLInjector] Invalid injection key:\",t),null},h.prototype.collectInjections=function(t,i){var u,n,r,e,o,y,a,f;i===void 0&&(i=window.location.href);var g=new Map;try{for(var m=se(t),d=m.next();!d.done;d=m.next()){var c=he(d.value,2),l=c[0],s=c[1];try{for(var p=(r=void 0,se(s)),v=p.next();!v.done;v=p.next()){var x=he(v.value,2),w=x[0],O=x[1];if(!O||typeof O!=\"object\"){this.debug&&C(\"[HTMLInjector] Invalid injection data for \".concat(l,\" variant \").concat(w,\":\"),O);continue}if(O.urlFilter){var S=le.matches(O.urlFilter,i);if(!S){this.debug&&C(\"[HTMLInjector] Skipping \".concat(l,\" variant \").concat(w,\" - URL filter doesn't match:\"),{currentUrl:i,urlFilter:O.urlFilter});continue}}var b=O.data;if(!b||typeof b!=\"object\"){this.debug&&C(\"[HTMLInjector] Invalid injection data for \".concat(l,\" variant \").concat(w,\":\"),b);continue}try{for(var _=(o=void 0,se(Object.entries(b))),A=_.next();!A.done;A=_.next()){var E=he(A.value,2),k=E[0],P=E[1];if(typeof P!=\"string\"){this.debug&&C(\"[HTMLInjector] Skipping non-string injection code for key \".concat(k,\":\"),P);continue}var j=this.parseInjectionKey(k);if(j){var T={code:P,priority:j.priority,location:j.location};g.has(j.location)||g.set(j.location,[]),g.get(j.location).push(T),this.debug&&C(\"[HTMLInjector] Collected injection:\",{experiment:l,variant:w,location:j.location,priority:j.priority,codeLength:P.length})}}}catch(B){o={error:B}}finally{try{A&&!A.done&&(y=_.return)&&y.call(_)}finally{if(o)throw o.error}}}}catch(B){r={error:B}}finally{try{v&&!v.done&&(e=p.return)&&e.call(p)}finally{if(r)throw r.error}}}}catch(B){u={error:B}}finally{try{d&&!d.done&&(n=m.return)&&n.call(m)}finally{if(u)throw u.error}}try{for(var M=se(g),R=M.next();!R.done;R=M.next()){var L=he(R.value,2),I=L[0],N=L[1];N.sort(function(B,q){return q.priority-B.priority}),this.debug&&C(\"[HTMLInjector] Sorted \".concat(I,\" injections by priority:\"),{location:I,count:N.length,priorities:N.map(function(B){return B.priority})})}}catch(B){a={error:B}}finally{try{R&&!R.done&&(f=M.return)&&f.call(M)}finally{if(a)throw a.error}}return g},h.prototype.inject=function(t){var i,u,n,r;try{for(var e=se(t),o=e.next();!o.done;o=e.next()){var y=he(o.value,2),a=y[0],f=y[1],g=a===\"headStart\"||a===\"bodyStart\"?br([],he(f),!1).reverse():f;try{for(var m=(n=void 0,se(g)),d=m.next();!d.done;d=m.next()){var c=d.value;this.injectAtLocation(a,c.code)}}catch(l){n={error:l}}finally{try{d&&!d.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}}}catch(l){i={error:l}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}this.debug&&C(\"[HTMLInjector] All injections complete\")},h.prototype.injectAtLocation=function(t,i){var u=\"absmartly-inject-\".concat(t,\"-\").concat(Date.now(),\"-\").concat(Math.random());if(!this.injectedIds.has(u))try{switch(t){case\"headStart\":this.injectHeadStart(i,u);break;case\"headEnd\":this.injectHeadEnd(i,u);break;case\"bodyStart\":this.injectBodyStart(i,u);break;case\"bodyEnd\":this.injectBodyEnd(i,u);break}this.injectedIds.add(u),this.debug&&C(\"[HTMLInjector] Injected at \".concat(t,\":\"),{location:t,codeLength:i.length,injectionId:u})}catch(n){this.debug&&C(\"[HTMLInjector] Error injecting at \".concat(t,\":\"),n)}},h.prototype.injectHeadStart=function(t,i){if(!document.head){this.debug&&C(\"[HTMLInjector] <head> element not found for headStart injection\");return}var u=this.createContainer(t,i);document.head.insertBefore(u,document.head.firstChild)},h.prototype.injectHeadEnd=function(t,i){if(!document.head){this.debug&&C(\"[HTMLInjector] <head> element not found for headEnd injection\");return}var u=this.createContainer(t,i);document.head.appendChild(u)},h.prototype.injectBodyStart=function(t,i){if(!document.body){this.debug&&C(\"[HTMLInjector] <body> element not found for bodyStart injection\");return}var u=this.createContainer(t,i);document.body.insertBefore(u,document.body.firstChild)},h.prototype.injectBodyEnd=function(t,i){if(!document.body){this.debug&&C(\"[HTMLInjector] <body> element not found for bodyEnd injection\");return}var u=this.createContainer(t,i);document.body.appendChild(u)},h.prototype.createContainer=function(t,i){var u=document.createElement(\"div\");return u.id=i,u.setAttribute(\"data-absmartly-injection\",\"true\"),u.innerHTML=t,u},h.prototype.destroy=function(){var t,i;try{for(var u=se(this.injectedIds),n=u.next();!n.done;n=u.next()){var r=n.value,e=document.getElementById(r);e&&e.remove()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}this.injectedIds.clear(),this.debug&&C(\"[HTMLInjector] Destroyed and cleaned up all injections\")},h}();var De=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ye=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Bt=function(){function h(t){this.watchedElements=new WeakMap,this.persistenceObserver=null,this.reapplyingElements=new Set,this.reapplyLogThrottle=new Map,this.appliedChanges=new Map,this.config=t}return h.prototype.watchElement=function(t,i,u){var n=this.watchedElements.get(t);n||(n=new Set,this.watchedElements.set(t,n)),n.add(i),this.appliedChanges.has(i)||this.appliedChanges.set(i,[]);var r=this.appliedChanges.get(i),e=!r.includes(u);if(e&&(r.push(u),this.config.debug)){var o={};u.value&&typeof u.value==\"object\"&&Object.keys(u.value).forEach(function(y){var a=y.replace(/([A-Z])/g,\"-$1\").toLowerCase();o[a]=t.style.getPropertyValue(a)}),C(\"[WATCH-ELEMENT] Started watching element for persistence\",{experimentName:i,selector:u.selector,element:t.tagName,changeType:u.type,value:u.value,currentStyles:u.type===\"style\"?o:void 0,timestamp:Date.now()})}this.persistenceObserver||this.setupPersistenceObserver()},h.prototype.unwatchElement=function(t,i){var u=this.watchedElements.get(t);u&&(u.delete(i),u.size===0&&this.watchedElements.delete(t))},h.prototype.unwatchExperiment=function(t){this.appliedChanges.delete(t)},h.prototype.getAppliedChanges=function(){return this.appliedChanges},h.prototype.clearAll=function(){this.appliedChanges.clear()},h.prototype.destroy=function(){this.persistenceObserver&&(this.persistenceObserver.disconnect(),this.persistenceObserver=null),this.appliedChanges.clear(),this.reapplyingElements.clear(),this.reapplyLogThrottle.clear()},h.prototype.setupPersistenceObserver=function(){var t=this;this.persistenceObserver||(this.config.debug&&C(\"[PERSISTENCE-OBSERVER] Setting up persistence observer\",{timestamp:Date.now()}),this.persistenceObserver=new MutationObserver(function(i){t.config.debug&&C(\"[MUTATION-DETECTED] Persistence observer detected mutations\",{mutationCount:i.length,timestamp:Date.now()}),i.forEach(function(u){var n=u.target;if(t.reapplyingElements.has(n)){t.config.debug&&C(\"[MUTATION-SKIP] Skipping mutation - currently reapplying\",{element:n.tagName});return}var r=t.watchedElements.get(n);if(r){if(t.config.debug){var e=\"mutation:\".concat(n.tagName,\":\").concat(n.getAttribute(\"name\")||n.className),o=Date.now(),y=t.reapplyLogThrottle.get(e)||0;o-y>5e3&&(C(\"[MUTATION-ON-WATCHED] Mutation detected on watched element\",{element:n.tagName,attributeName:u.attributeName,oldValue:u.oldValue,experiments:Array.from(r)}),t.reapplyLogThrottle.set(e,o))}r.forEach(function(a){var f=t.appliedChanges.get(a);f&&f.forEach(function(g){var m,d,c,l,s=!1;if(g.type===\"style\"&&u.attributeName===\"style\"&&g.persistStyle!==!1)s=t.checkStyleOverwritten(n,g.value);else if(g.type===\"attribute\"&&g.persistAttribute!==!1&&g.value&&typeof g.value==\"object\")try{for(var p=De(Object.keys(g.value)),v=p.next();!v.done;v=p.next()){var x=v.value;if(u.attributeName===x){s=t.checkAttributeOverwritten(n,g.value);break}}}catch(j){m={error:j}}finally{try{v&&!v.done&&(d=p.return)&&d.call(p)}finally{if(m)throw m.error}}if(s){t.reapplyingElements.add(n);var w=\"\".concat(a,\"-\").concat(g.selector),O=Date.now(),S=t.reapplyLogThrottle.get(w)||0;if(t.config.debug&&O-S>5e3&&(C(\"[REAPPLY-TRIGGERED] Reapplying after mutation (React/framework conflict detected)\",{experimentName:a,selector:g.selector,element:n.tagName,changeType:g.type,timestamp:O}),t.reapplyLogThrottle.set(w,O),t.reapplyLogThrottle.size>100)){var b=O-6e4;try{for(var _=De(t.reapplyLogThrottle.entries()),A=_.next();!A.done;A=_.next()){var E=Ye(A.value,2),k=E[0],P=E[1];P<b&&t.reapplyLogThrottle.delete(k)}}catch(j){c={error:j}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(c)throw c.error}}}t.config.onReapply(g,a),setTimeout(function(){t.reapplyingElements.delete(n)},0)}})})}})}),this.persistenceObserver.observe(document.body,{attributes:!0,subtree:!0,attributeOldValue:!0}),this.config.debug&&C(\"[PERSISTENCE-OBSERVER] Setup complete - now observing mutations\",{target:\"document.body\",attributeFilter:[\"style\",\"class\"],subtree:!0,timestamp:Date.now()}))},h.prototype.checkStyleOverwritten=function(t,i){var u,n;try{for(var r=De(Object.entries(i)),e=r.next();!e.done;e=r.next()){var o=Ye(e.value,2),y=o[0],a=o[1],f=y.replace(/([A-Z])/g,\"-$1\").toLowerCase(),g=t.style.getPropertyValue(f),m=t.style.getPropertyPriority(f);if(g!==a||a.includes(\"!important\")&&!m)return!0}}catch(d){u={error:d}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return!1},h.prototype.checkAttributeOverwritten=function(t,i){var u,n;try{for(var r=De(Object.entries(i)),e=r.next();!e.done;e=r.next()){var o=Ye(e.value,2),y=o[0],a=o[1],f=t.getAttribute(y);if(f!==a)return!0}}catch(g){u={error:g}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return!1},h}();var me=function(){return me=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},me.apply(this,arguments)},ce=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},fe=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ge=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ee=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Xe=function(){function h(t){var i=this,u,n,r,e,o,y,a,f;if(this.mutationObserver=null,this.exposedExperiments=new Set,this.eventListeners=new Map,this.styleManagers=new Map,this.initialized=!1,this.persistenceManager=null,this.antiFlickerTimeout=null,this.antiFlickerStyleId=\"absmartly-antiflicker\",this.config={context:t.context,autoApply:(u=t.autoApply)!==null&&u!==void 0?u:!0,spa:(n=t.spa)!==null&&n!==void 0?n:!0,visibilityTracking:(r=t.visibilityTracking)!==null&&r!==void 0?r:!0,variableName:(e=t.variableName)!==null&&e!==void 0?e:\"__dom_changes\",debug:(o=t.debug)!==null&&o!==void 0?o:!1,hideUntilReady:(y=t.hideUntilReady)!==null&&y!==void 0?y:!1,hideTimeout:(a=t.hideTimeout)!==null&&a!==void 0?a:3e3,hideTransition:(f=t.hideTransition)!==null&&f!==void 0?f:!1},!this.config.context)throw new Error(\"[ABsmartly] Context is required\");console.log(\"[ABsmartly] DOMChangesPluginLite v\".concat(h.VERSION,\" initialized\")),this.config.hideUntilReady&&this.hideContent(),this.domManipulator=new Pt(this.config.debug,this),this.variantExtractor=new Tt(this.config.context,this.config.variableName,this.config.debug),this.exposureTracker=new Lt(this.config.context,this.config.debug),this.htmlInjector=new Nt(this.config.debug),this.persistenceManager=new Bt({debug:this.config.debug,onReapply:function(g,m){C(\"[DOMChangesPluginLite] Re-applying change due to mutation\",{experimentName:m,selector:g.selector,type:g.type}),i.domManipulator.applyChange(g,m)}}),this.readyPromise=this.config.context.ready().then(function(){return C(\"[DOMChangesPluginLite] Context is ready, starting initialization\"),i.initialize()}).catch(function(g){throw C(\"[DOMChangesPluginLite] ERROR during initialization:\",g),g})}return h.prototype.ready=function(){return ce(this,void 0,void 0,function(){return fe(this,function(t){return[2,this.readyPromise]})})},h.prototype.initialize=function(){return ce(this,void 0,void 0,function(){var t,i,u;return fe(this,function(n){switch(n.label){case 0:if(this.initialized)return C(\"Plugin already initialized\"),[2];t=performance.now(),C(\"Initializing ABsmartly DOM Changes Plugin Lite\",{version:h.VERSION,config:{autoApply:this.config.autoApply,spa:this.config.spa,visibilityTracking:this.config.visibilityTracking,DEBUG:ye}}),n.label=1;case 1:return n.trys.push([1,4,,5]),this.config.spa?(this.setupMutationObserver(),this.setupURLChangeListener()):C(\"[DOMChangesPluginLite] SPA mode disabled - skipping body observer\"),this.config.autoApply?[4,this.applyInjectionsAndChanges()]:[3,3];case 2:n.sent(),n.label=3;case 3:return this.initialized=!0,this.registerWithContext(),this.emit(\"initialized\"),i=performance.now()-t,Le(\"Plugin initialization\",i),C(\"[ABsmartly] DOM plugin lite loaded successfully (v\".concat(h.VERSION,\")\")),this.config.debug&&C(\"[ABsmartly] DOM Changes Plugin Lite initialized with debug mode\"),[3,5];case 4:throw u=n.sent(),C(\"[ABsmartly] Failed to initialize plugin:\",u),u;case 5:return[2]}})})},h.prototype.setupMutationObserver=function(){var t=this,i=new MutationObserver(function(r){r.forEach(function(e){e.type===\"childList\"&&e.addedNodes.forEach(function(o){var y;if(o.nodeType===Node.ELEMENT_NODE){var a=o,f=((y=t.persistenceManager)===null||y===void 0?void 0:y.getAppliedChanges())||new Map;f.forEach(function(g,m){g.forEach(function(d){try{var c=a.matches(d.selector)?[a]:Array.from(a.querySelectorAll(d.selector));c.forEach(function(l){t.config.debug&&C(\"[SPA-REAPPLY] Re-applying change to newly added element (React hydration recovery)\",{experimentName:m,selector:d.selector,element:l.tagName,changeType:d.type}),t.domManipulator.applyChange(d,m)})}catch{}})})}})})}),u=function(){i.observe(document.body,{childList:!0,subtree:!0}),t.mutationObserver=i,C(\"[DOMChangesPluginLite] MutationObserver started on document.body\")};if(document.body)u();else{var n=new MutationObserver(function(r,e){document.body&&(e.disconnect(),u())});n.observe(document.documentElement,{childList:!0}),C(\"[DOMChangesPluginLite] Waiting for document.body...\")}},h.prototype.setupURLChangeListener=function(){var t=this,i=function(){return ce(t,void 0,void 0,function(){var r;return fe(this,function(e){switch(e.label){case 0:return r=window.location.href,C(\"[ABsmartly] URL changed, re-evaluating experiments:\",r),[4,this.removeAllChanges()];case 1:return e.sent(),[4,this.applyInjectionsAndChanges()];case 2:return e.sent(),[2]}})})};window.addEventListener(\"popstate\",i);var u=history.pushState,n=history.replaceState;history.pushState=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];u.apply(history,r),i()},history.replaceState=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];n.apply(history,r),i()},this.config.debug&&C(\"[ABsmartly] URL change listener set up for SPA mode\")},h.prototype.removeAllChanges=function(){return ce(this,void 0,void 0,function(){return fe(this,function(t){return this.exposedExperiments.clear(),this.styleManagers.clear(),this.persistenceManager&&this.persistenceManager.clearAll(),this.htmlInjector.destroy(),this.variantExtractor.clearCache(),this.config.debug&&C(\"[ABsmartly] All change tracking cleared for URL change\"),[2]})})},h.prototype.applyInjectionsAndChanges=function(){return ce(this,void 0,void 0,function(){var t,i,u,n,r;return fe(this,function(e){switch(e.label){case 0:t=performance.now(),i=window.location.href,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.config.context.ready()];case 2:return e.sent(),[3,4];case 3:return u=e.sent(),C(\"[ABsmartly] Failed to wait for context ready:\",u),[2];case 4:return n=this.variantExtractor.extractAllInjectHTML(),[4,Promise.all([this.applyHTMLInjections(n,i),this.applyChanges()])];case 5:return e.sent(),r=performance.now()-t,Le(\"Apply injections and changes (parallel)\",r),this.config.debug&&C(\"[ABsmartly] HTML injections and DOM changes applied in parallel\",{duration:\"\".concat(r.toFixed(2),\"ms\"),currentURL:i}),[2]}})})},h.prototype.applyHTMLInjections=function(t){return ce(this,arguments,void 0,function(i,u){var n;return u===void 0&&(u=window.location.href),fe(this,function(r){return i.size===0?(this.config.debug&&C(\"[ABsmartly] No HTML injections found\"),[2]):(n=this.htmlInjector.collectInjections(i,u),this.htmlInjector.inject(n),this.config.debug&&C(\"[ABsmartly] HTML injections complete\",{experimentsWithInjections:i.size,totalLocations:n.size,currentUrl:u}),[2])})})},h.prototype.applyChanges=function(t){return ce(this,void 0,void 0,function(){var i,u,n,r,e,o,y,a,f,g,m,d,c,l,s,p,v,x,w,O,S,b,_,G,A,E,k,P,j,T,M,R,L,I,N,B,q,F,V,W,G,H,$,ue,Q,U,D,K,Y,X;return fe(this,function(J){switch(J.label){case 0:i=performance.now(),u=window.location.href,C(\"Starting to apply changes\",{specificExperiment:t||\"all\",url:u,action:\"apply_start\"}),this.config.debug&&(C(\"[ABsmartly] === DOM Changes Application Starting ===\"),C(\"[ABsmartly] Target:\",t||\"all experiments\"),C(\"[ABsmartly] Current URL:\",u),C(\"[ABsmartly] Context ready:\",!0)),J.label=1;case 1:return J.trys.push([1,3,,4]),[4,this.config.context.ready()];case 2:return J.sent(),[3,4];case 3:return n=J.sent(),C(\"[ABsmartly] Failed to wait for context ready:\",n),[2];case 4:this.variantExtractor.clearCache(),r=this.getAllExperimentsData(),e=0,o=new Map,C(\"[ABsmartly] Experiments to process:\",Array.from(r.keys())),C(\"[ABsmartly] Total experiments with changes:\",r.size);try{for(y=ge(r),a=y.next();!a.done;a=y.next())if(f=Ee(a.value,2),g=f[0],m=f[1],!(t&&g!==t)){if(d=this.config.context.peek(g),c=m.variantData,l=m.urlFilter,s=m.globalDefaults,p=this.variantExtractor.anyVariantMatchesURL(g,u),!p){C(\"[ABsmartly] Skipping experiment '\".concat(g,\"' - no variant matches URL: \").concat(u));continue}if(v=this.shouldApplyVisualChanges(c,l,u),x=this.extractChangesFromData(c,s),w=this.extractAllVariantChanges(g),O=w.some(function(z){return z&&z.length>0}),!O){this.config.debug&&C(\"[ABsmartly] Skipping experiment '\".concat(g,\"' - no variants have changes\"));continue}if(S={total:x?.length||0,success:0,pending:0},this.config.debug&&C(\"[ABsmartly] Processing experiment '\".concat(g,\"' (variant \").concat(d,\"):\"),{urlMatches:v,changeCount:x?.length||0,userVariantHasChanges:(x?.length||0)>0,changes:x?.map(function(z){return{type:z.type,selector:z.selector,trigger:z.trigger_on_view?\"viewport\":\"immediate\"}})||[]}),v&&x&&x.length>0)try{for(b=(Q=void 0,ge(x)),_=b.next();!_.done;_=b.next())if(G=_.value,A=this.domManipulator.applyChange(G,g),A)e++,S.success++;else if(G.type!==\"create\"&&G.type!==\"styleRules\")try{E=document.querySelectorAll(G.selector),E.length===0&&(this.config.spa||G.waitForElement)&&S.pending++}catch(z){this.config.debug&&C(\"[ABsmartly] Invalid selector: \".concat(G.selector),z)}}catch(z){Q={error:z}}finally{try{_&&!_.done&&(U=b.return)&&U.call(b)}finally{if(Q)throw Q.error}}else x&&x.length>0&&C(\"[ABsmartly] Experiment '\".concat(g,\"' variant \").concat(d,\" doesn't match URL filter or has no changes, but setting up tracking for SRM prevention\"));k=!1,P=!1,j=this.variantExtractor.getAllVariantsData(g),this.config.debug&&(C(\"[ABsmartly] Checking trigger types for experiment '\".concat(g,\"' on URL: \").concat(u),{allVariantsDataSize:j.size,allVariantChangesLength:w.length}),j.forEach(function(z,Oe){C(\"[ABsmartly] Variant \".concat(Oe,\" data structure:\"),{isArray:Array.isArray(z),isObject:typeof z==\"object\",hasUrlFilter:z&&typeof z==\"object\"&&!Array.isArray(z)&&\"urlFilter\"in z,keys:z&&typeof z==\"object\"&&!Array.isArray(z)?Object.keys(z):\"N/A\"})}));try{for(T=(D=void 0,ge(j)),M=T.next();!M.done;M=T.next())if(R=Ee(M.value,2),L=R[0],I=R[1],N=w[L],!(!N||N.length===0)){if(B=!0,I&&typeof I==\"object\"&&!Array.isArray(I)&&(q=I,\"urlFilter\"in q&&q.urlFilter&&(F=q,B=le.matches(F.urlFilter,u),this.config.debug&&C(\"[ABsmartly] Variant \".concat(L,\" has URL filter, matches: \").concat(B)))),B){try{for(V=(Y=void 0,ge(N)),W=V.next();!W.done&&(G=W.value,G.trigger_on_view?k=!0:P=!0,!(k&&P));W=V.next());}catch(z){Y={error:z}}finally{try{W&&!W.done&&(X=V.return)&&X.call(V)}finally{if(Y)throw Y.error}}this.config.debug&&C(\"[ABsmartly] Variant \".concat(L,\" matches URL - hasImmediate: \").concat(P,\", hasViewport: \").concat(k))}else this.config.debug&&C(\"[ABsmartly] Variant \".concat(L,\" does NOT match URL - skipping\"));if(k&&P)break}}catch(z){D={error:z}}finally{try{M&&!M.done&&(K=T.return)&&K.call(T)}finally{if(D)throw D.error}}this.config.debug&&C(\"[ABsmartly] Final trigger decision for '\".concat(g,\"': hasImmediate=\").concat(P,\", hasViewport=\").concat(k)),(k||P)&&this.exposureTracker.registerExperiment(g,d||0,x||[],w,P,k),o.set(g,S),Et(g,S.total,S.success,S.pending)}}catch(z){$={error:z}}finally{try{a&&!a.done&&(ue=y.return)&&ue.call(y)}finally{if($)throw $.error}}return H=performance.now()-i,Le(\"Apply changes\",H,{totalApplied:e,experiments:o.size}),this.config.debug&&(C(\"[ABsmartly] === DOM Changes Application Complete ===\"),C(\"[ABsmartly] Summary:\",{totalChangesApplied:e,experimentsProcessed:o.size,duration:\"\".concat(H.toFixed(2),\"ms\"),experiments:Array.from(o.entries()).map(function(z){var Oe=Ee(z,2),lr=Oe[0],Re=Oe[1];return{name:lr,total:Re.total,success:Re.success,pending:Re.pending,pendingReason:Re.pending>0?\"Elements not found yet (SPA mode will retry)\":void 0}})})),this.config.hideUntilReady&&this.showContent(),this.emit(\"changes-applied\",{count:e,experimentName:t}),[2]}})})},h.prototype.getAllExperimentsData=function(){var t,i,u=new Map,n=this.variantExtractor.extractAllChanges();try{for(var r=ge(n),e=r.next();!e.done;e=r.next()){var o=Ee(e.value,1),y=o[0],a=this.config.context.peek(y);if(a!=null){var f=this.variantExtractor.getAllVariantsData(y),g=f.get(a);if(g){var m=null,d={};if(g&&typeof g==\"object\"&&!Array.isArray(g)&&\"changes\"in g){var c=g;m=c.urlFilter,d={waitForElement:c.waitForElement,persistStyle:c.persistStyle,important:c.important,observerRoot:c.observerRoot}}u.set(y,{variantData:g,urlFilter:m,globalDefaults:d})}}}}catch(l){t={error:l}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return u},h.prototype.extractChangesFromData=function(t,i){var u=null;return Array.isArray(t)?u=t:t&&typeof t==\"object\"&&\"changes\"in t&&(u=t.changes),!u||u.length===0?null:u.map(function(n){var r,e,o,y;return me(me({},n),{waitForElement:(r=n.waitForElement)!==null&&r!==void 0?r:i.waitForElement,persistStyle:(e=n.persistStyle)!==null&&e!==void 0?e:i.persistStyle,important:(o=n.important)!==null&&o!==void 0?o:i.important,observerRoot:(y=n.observerRoot)!==null&&y!==void 0?y:i.observerRoot})})},h.prototype.extractAllVariantChanges=function(t){for(var i=this.variantExtractor.getAllVariantChanges(t),u=this.variantExtractor.getAllVariantsData(t),n=[],r=function(o){var y=i[o],a=u.get(o);if(!y||y.length===0)return n.push([]),\"continue\";var f={};if(a&&typeof a==\"object\"&&!Array.isArray(a)&&\"changes\"in a){var g=a;f={waitForElement:g.waitForElement,persistStyle:g.persistStyle,important:g.important,observerRoot:g.observerRoot}}var m=y.map(function(d){var c,l,s,p;return me(me({},d),{waitForElement:(c=d.waitForElement)!==null&&c!==void 0?c:f.waitForElement,persistStyle:(l=d.persistStyle)!==null&&l!==void 0?l:f.persistStyle,important:(s=d.important)!==null&&s!==void 0?s:f.important,observerRoot:(p=d.observerRoot)!==null&&p!==void 0?p:f.observerRoot})});n.push(m)},e=0;e<i.length;e++)r(e);return n},h.prototype.shouldApplyVisualChanges=function(t,i,u){return Array.isArray(t)||!i?!0:le.matches(i,u)},h.prototype.hasChanges=function(t){return this.domManipulator.hasChanges(t)},h.prototype.applyChange=function(t,i){C(\"Applying single change via public API\",{experimentName:i,selector:t.selector,changeType:t.type});try{var u=this.domManipulator.applyChange(t,i);return u&&this.emit(\"change_applied\",{experimentName:i,change:t}),u}catch(n){return this.config.debug&&C(\"[ABsmartly] Error applying change:\",n),!1}},h.prototype.on=function(t,i){var u=this.eventListeners.get(t)||[];u.push(i),this.eventListeners.set(t,u)},h.prototype.off=function(t,i){if(!i)this.eventListeners.delete(t);else{var u=this.eventListeners.get(t)||[],n=u.indexOf(i);n!==-1&&u.splice(n,1)}},h.prototype.emit=function(t,i){var u,n,r=this.eventListeners.get(t)||[];try{for(var e=ge(r),o=e.next();!o.done;o=e.next()){var y=o.value;try{y(i)}catch(a){C(\"[ABsmartly] Error in event listener for \".concat(t,\":\"),a)}}}catch(a){u={error:a}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(u)throw u.error}}},h.prototype.getStyleManager=function(t){var i=\"absmartly-styles-\".concat(t),u=this.styleManagers.get(t);return u||(u=new Mt(i,this.config.debug),this.styleManagers.set(t,u)),u},h.prototype.buildCssRule=function(t,i,u){u===void 0&&(u=!0);var n=Object.entries(i).map(function(r){var e=Ee(r,2),o=e[0],y=e[1],a=o.replace(/([A-Z])/g,\"-$1\").toLowerCase(),f=u?\" !important\":\"\";return\"  \".concat(a,\": \").concat(y).concat(f,\";\")}).join(`\n`);return\"\".concat(t,` {\n`).concat(n,`\n}`)},h.prototype.buildStateRules=function(t,i,u){u===void 0&&(u=!0);var n=[];return i.normal&&n.push(this.buildCssRule(t,i.normal,u)),i.hover&&n.push(this.buildCssRule(\"\".concat(t,\":hover\"),i.hover,u)),i.active&&n.push(this.buildCssRule(\"\".concat(t,\":active\"),i.active,u)),i.focus&&n.push(this.buildCssRule(\"\".concat(t,\":focus\"),i.focus,u)),n.join(`\n\n`)},h.prototype.refreshExperiments=function(){this.config.debug&&C(\"[ABsmartly] Refreshing experiments and clearing cache\"),this.variantExtractor.clearCache(),this.config.autoApply&&this.applyInjectionsAndChanges()},h.prototype.destroy=function(){this.domManipulator.destroy(),this.exposureTracker.destroy(),this.htmlInjector.destroy(),this.styleManagers.forEach(function(i){return i.destroy()}),this.styleManagers.clear(),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.persistenceManager&&(this.persistenceManager.destroy(),this.persistenceManager=null),this.antiFlickerTimeout!==null&&(clearTimeout(this.antiFlickerTimeout),this.antiFlickerTimeout=null);var t=document.getElementById(this.antiFlickerStyleId);t&&t.remove(),this.eventListeners.clear(),this.exposedExperiments.clear(),this.unregisterFromContext(),this.initialized=!1,this.config.debug&&C(\"[ABsmartly] DOM Changes Plugin Lite destroyed\")},h.prototype.registerWithContext=function(){this.config.context&&(this.config.context.__plugins||(this.config.context.__plugins={}),this.config.context.__plugins.domPlugin={name:\"DOMChangesPluginLite\",version:h.VERSION,initialized:!0,capabilities:[\"spa\",\"visibility\"],instance:this,timestamp:Date.now()},this.config.context.__domPlugin=this.config.context.__plugins.domPlugin,this.config.debug&&C(\"[ABsmartly] DOMChangesPluginLite registered with context at __plugins.domPlugin\"))},h.prototype.unregisterFromContext=function(){var t;this.config.context&&(!((t=this.config.context.__plugins)===null||t===void 0)&&t.domPlugin&&delete this.config.context.__plugins.domPlugin,this.config.context.__domPlugin&&delete this.config.context.__domPlugin,this.config.debug&&C(\"[ABsmartly] DOMChangesPluginLite unregistered from context\"))},h.prototype.hideContent=function(){var t=this,i=this.config.hideUntilReady;if(i&&!document.getElementById(this.antiFlickerStyleId)){var u=document.createElement(\"style\");u.id=this.antiFlickerStyleId;var n=this.config.hideTransition!==!1;n?u.textContent=`\n        `.concat(i,` {\n          visibility: hidden !important;\n          opacity: 0 !important;\n        }\n      `):u.textContent=`\n        `.concat(i,` {\n          visibility: hidden !important;\n        }\n      `),document.head.appendChild(u),this.antiFlickerTimeout=window.setTimeout(function(){t.config.debug&&C(\"[ABsmartly] Anti-flicker timeout reached (\".concat(t.config.hideTimeout,\"ms), showing content\")),t.showContent()},this.config.hideTimeout),this.config.debug&&C(\"[ABsmartly] Anti-flicker enabled (selector: '\".concat(i,\"', transition: \").concat(n?this.config.hideTransition:\"none\",\", timeout: \").concat(this.config.hideTimeout,\"ms)\"))}},h.prototype.showContent=function(){var t=this;this.antiFlickerTimeout!==null&&(clearTimeout(this.antiFlickerTimeout),this.antiFlickerTimeout=null);var i=document.getElementById(this.antiFlickerStyleId);if(i){var u=this.config.hideTransition!==!1;if(u){var n=this.config.hideUntilReady;i.textContent=`\n        `.concat(n,` {\n          opacity: 0 !important;\n          transition: opacity `).concat(this.config.hideTransition,` !important;\n        }\n      `),i.offsetHeight,i.textContent=`\n        `.concat(n,` {\n          opacity: 1 !important;\n          transition: opacity `).concat(this.config.hideTransition,` !important;\n        }\n      `);var r=parseFloat(this.config.hideTransition)*1e3;setTimeout(function(){i.remove(),t.config.debug&&C(\"[ABsmartly] Anti-flicker fade-in complete, style removed\")},r),this.config.debug&&C(\"[ABsmartly] Anti-flicker fading in with transition: \".concat(this.config.hideTransition))}else i.remove(),this.config.debug&&C(\"[ABsmartly] Anti-flicker removed, content now visible\")}},h.prototype.watchElement=function(t,i,u){this.persistenceManager&&this.persistenceManager.watchElement(t,i,u)},h.prototype.unwatchElement=function(t,i){this.persistenceManager&&this.persistenceManager.unwatchElement(t,i)},h.VERSION=typeof __VERSION__<\"u\"?__VERSION__:\"1.1.2\",h}();var Ut=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},Dt=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ae=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ve=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Vt=function(){function h(t){var i,u,n,r,e;if(this.initialized=!1,!t.context)throw new Error(\"[OverridesPluginLite] Context is required\");this.config={context:t.context,cookieName:(i=t.cookieName)!==null&&i!==void 0?i:\"absmartly_overrides\",useQueryString:(u=t.useQueryString)!==null&&u!==void 0?u:!0,queryPrefix:(n=t.queryPrefix)!==null&&n!==void 0?n:\"exp_\",persistQueryToCookie:(r=t.persistQueryToCookie)!==null&&r!==void 0?r:!1,debug:(e=t.debug)!==null&&e!==void 0?e:!1},this.config.debug&&C(\"[OverridesPluginLite] Initialized with config:\",{cookieName:this.config.cookieName,useQueryString:this.config.useQueryString,queryPrefix:this.config.queryPrefix})}return h.prototype.ready=function(){return Ut(this,void 0,void 0,function(){var t,i,u,n,r,e,o,y,a,f,g;return Dt(this,function(m){if(this.initialized)return this.config.debug&&C(\"[OverridesPluginLite] Already initialized\"),[2];if(this.initialized=!0,this.registerWithContext(),t={},this.config.useQueryString&&typeof window<\"u\"&&(t=this.getQueryStringOverrides(),this.config.persistQueryToCookie&&this.config.cookieName&&Object.keys(t).length>0&&this.persistOverridesToCookie(t)),Object.keys(t).length===0&&this.config.cookieName&&(t=this.getCookieOverrides()),Object.keys(t).length===0)return this.config.debug&&C(\"[OverridesPluginLite] No overrides found\"),[2];try{for(i=Ae(Object.entries(t)),u=i.next();!u.done;u=i.next()){if(n=Ve(u.value,2),r=n[0],e=n[1],o=typeof e==\"number\"?e:e.variant,isNaN(o)){this.config.debug&&C(\"[OverridesPluginLite] Skipping invalid variant for \".concat(r,\": \").concat(o));continue}(g=(f=this.config.context).override)===null||g===void 0||g.call(f,r,o),this.config.debug&&C(\"[OverridesPluginLite] Override: \".concat(r,\" -> variant \").concat(o))}}catch(d){y={error:d}}finally{try{u&&!u.done&&(a=i.return)&&a.call(i)}finally{if(y)throw y.error}}return[2]})})},h.prototype.initialize=function(){return Ut(this,void 0,void 0,function(){return Dt(this,function(t){return[2,this.ready()]})})},h.prototype.getQueryStringOverrides=function(){var t,i;if(typeof window>\"u\"||!window.location)return{};var u=new URLSearchParams(window.location.search),n={},r=this.config.queryPrefix;try{for(var e=Ae(u.entries()),o=e.next();!o.done;o=e.next()){var y=Ve(o.value,2),a=y[0],f=y[1];if(a.startsWith(r)){var g=a.substring(r.length);if(g){var m=f.split(\",\"),d=parseInt(m[0],10);isNaN(d)||(m.length===1?n[g]=d:n[g]={variant:d,env:m[1]?parseInt(m[1],10):void 0,id:m[2]?parseInt(m[2],10):void 0})}}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}return this.config.debug&&Object.keys(n).length>0&&C(\"[OverridesPluginLite] Query string overrides:\",n),n},h.prototype.getCookieOverrides=function(){var t,i;if(typeof document>\"u\")return{};var u=this.config.cookieName+\"=\",n=document.cookie.split(\";\");try{for(var r=Ae(n),e=r.next();!e.done;e=r.next()){var o=e.value;if(o=o.trim(),o.indexOf(u)===0){var y=decodeURIComponent(o.substring(u.length));return this.parseCookieValue(y)}}}catch(a){t={error:a}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return{}},h.prototype.parseCookieValue=function(t){var i,u;if(!t)return{};var n={},r=t;if(t.includes(\"|\")){var e=t.split(\"|\");r=e[e.length-1]}if(!r)return{};var o=r.split(\",\");try{for(var y=Ae(o),a=y.next();!a.done;a=y.next()){var f=a.value,g=Ve(f.split(\":\"),2),m=g[0],d=g[1];if(!(!m||!d)){var c=decodeURIComponent(m),e=d.split(\".\"),l=parseInt(e[0],10);isNaN(l)||(e.length===1?n[c]=l:n[c]={variant:l,env:e[1]?parseInt(e[1],10):void 0,id:e[2]?parseInt(e[2],10):void 0})}}}catch(s){i={error:s}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}return n},h.prototype.persistOverridesToCookie=function(t){var i,u;if(!(!this.config.cookieName||typeof document>\"u\")){var n=[];try{for(var r=Ae(Object.entries(t)),e=r.next();!e.done;e=r.next()){var o=Ve(e.value,2),y=o[0],a=o[1],f=encodeURIComponent(y);if(typeof a==\"number\")n.push(\"\".concat(f,\":\").concat(a));else{var g=\"\".concat(f,\":\").concat(a.variant);a.env!==void 0&&(g+=\".\".concat(a.env)),a.id!==void 0&&(g+=\".\".concat(a.id)),n.push(g)}}}catch(c){i={error:c}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}var m=n.join(\",\"),d=86400;document.cookie=\"\".concat(this.config.cookieName,\"=\").concat(encodeURIComponent(m),\";path=/;max-age=\").concat(d),this.config.debug&&C(\"[OverridesPluginLite] Persisted to cookie:\",m)}},h.prototype.registerWithContext=function(){this.config.context&&(this.config.context.__plugins||(this.config.context.__plugins={}),this.config.context.__plugins.overridesPlugin={name:\"OverridesPluginLite\",version:\"1.0.0\",initialized:!0,capabilities:[\"cookie-overrides\",\"query-overrides\"],instance:this,timestamp:Date.now()},this.config.debug&&C(\"[OverridesPluginLite] Registered with context at __plugins.overridesPlugin\"))},h.prototype.unregisterFromContext=function(){var t,i;!((i=(t=this.config.context)===null||t===void 0?void 0:t.__plugins)===null||i===void 0)&&i.overridesPlugin&&(delete this.config.context.__plugins.overridesPlugin,this.config.debug&&C(\"[OverridesPluginLite] Unregistered from context\"))},h.prototype.destroy=function(){this.initialized=!1,this.unregisterFromContext()},h}();var wr=function(){var h=function(t,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,n){u.__proto__=n}||function(u,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(u[r]=n[r])},h(t,i)};return function(t,i){if(typeof i!=\"function\"&&i!==null)throw new TypeError(\"Class extends value \"+String(i)+\" is not a constructor or null\");h(t,i);function u(){this.constructor=t}t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),te=function(){return te=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},te.apply(this,arguments)},ke=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},Ce=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ae=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},pe=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},xr=function(h){wr(t,h);function t(i){var u,n,r,e,o,y,a,f,g,m,d,c,l,s,p,v,x,w,O,S,b,_=h.call(this,{context:i.context,cookieName:i.cookieName,useQueryString:(u=i.useQueryString)!==null&&u!==void 0?u:typeof window<\"u\",queryPrefix:(n=i.queryPrefix)!==null&&n!==void 0?n:\"exp_\",persistQueryToCookie:(r=i.persistQueryToCookie)!==null&&r!==void 0?r:!1,debug:(e=i.debug)!==null&&e!==void 0?e:!1})||this;if(_.onExperimentsAddedCallbacks=[],!i.context)throw new Error(\"[OverridesPlugin] Context is required\");_.isServerSide=typeof window>\"u\";var A=i.sdkEndpoint;if(!A){var E=i.context;E._endpoint?A=E._endpoint:!((o=E._config)===null||o===void 0)&&o.endpoint?A=E._config.endpoint:!((y=E._dataProvider)===null||y===void 0)&&y._endpoint?A=E._dataProvider._endpoint:!((a=E._options)===null||a===void 0)&&a.endpoint&&(A=E._options.endpoint.replace(\"/v1\",\"\"))}if(!A&&!i.absmartlyEndpoint){var E=i.context;if(!E._endpoint&&!(!((f=E._config)===null||f===void 0)&&f.endpoint)&&!(!((g=E._dataProvider)===null||g===void 0)&&g._endpoint)&&!(!((m=E._options)===null||m===void 0)&&m.endpoint))throw new Error(\"[OverridesPlugin] SDK endpoint must be provided if not available from context\")}return _.fullConfig={context:i.context,cookieName:i.cookieName,cookieAdapter:i.cookieAdapter,cookieOptions:(d=i.cookieOptions)!==null&&d!==void 0?d:{path:\"/\"},useQueryString:(c=i.useQueryString)!==null&&c!==void 0?c:!_.isServerSide,queryPrefix:(l=i.queryPrefix)!==null&&l!==void 0?l:\"exp_\",envParam:(s=i.envParam)!==null&&s!==void 0?s:\"env\",persistQueryToCookie:(p=i.persistQueryToCookie)!==null&&p!==void 0?p:!1,url:i.url,absmartlyEndpoint:(v=i.absmartlyEndpoint)!==null&&v!==void 0?v:\"\",sdkEndpoint:A||\"\",domChangesFieldName:(x=i.domChangesFieldName)!==null&&x!==void 0?x:\"__dom_changes\",sdkApiKey:(w=i.sdkApiKey)!==null&&w!==void 0?w:\"\",application:(O=i.application)!==null&&O!==void 0?O:\"\",environment:(S=i.environment)!==null&&S!==void 0?S:\"\",debug:(b=i.debug)!==null&&b!==void 0?b:!1},_.fullConfig.debug&&C(\"[OverridesPlugin] Initialized with config:\",{isServerSide:_.isServerSide,cookieName:_.fullConfig.cookieName,useQueryString:_.fullConfig.useQueryString,queryPrefix:_.fullConfig.queryPrefix,envParam:_.fullConfig.envParam,persistQueryToCookie:_.fullConfig.persistQueryToCookie,sdkEndpoint:_.fullConfig.sdkEndpoint,absmartlyEndpoint:_.fullConfig.absmartlyEndpoint}),_}return t.prototype.ready=function(){return ke(this,void 0,void 0,function(){var i;return Ce(this,function(u){switch(u.label){case 0:return this.initialized?(this.fullConfig.debug&&C(\"[OverridesPlugin] Already initialized, skipping re-initialization\"),[2]):(this.initialized=!0,this.registerWithContext(),i=this.getOverrides(),Object.keys(i.overrides).length===0?(this.fullConfig.debug&&C(\"[OverridesPlugin] No overrides found\"),[2]):[4,this.applyOverridesWithFetching(i.overrides,i.devEnv)]);case 1:return u.sent(),[2]}})})},t.prototype.initialize=function(){return ke(this,void 0,void 0,function(){return Ce(this,function(i){return[2,this.ready()]})})},t.prototype.getOverrides=function(){var i={overrides:{},devEnv:null};if(this.fullConfig.cookieName){var u=this.getEnhancedCookieOverrides();i.overrides=te({},u.overrides),i.devEnv=u.devEnv}if(this.fullConfig.useQueryString){var n=this.getEnhancedQueryStringOverrides();Object.keys(n.overrides).length>0&&(i.overrides=te(te({},i.overrides),n.overrides),n.devEnv!==null&&(i.devEnv=n.devEnv),this.fullConfig.persistQueryToCookie&&this.fullConfig.cookieName&&this.persistEnhancedOverridesToCookie(i))}return i},t.prototype.getEnhancedQueryStringOverrides=function(){var i,u;try{var n=void 0;if(this.isServerSide){if(!this.fullConfig.url)return{overrides:{},devEnv:null};var r=typeof this.fullConfig.url==\"string\"?new URL(this.fullConfig.url):this.fullConfig.url;n=new URLSearchParams(r.search)}else n=new URLSearchParams(window.location.search);var e={},o=null;if(this.fullConfig.envParam){var y=n.get(this.fullConfig.envParam);y&&(o=y)}var a=this.fullConfig.queryPrefix;try{for(var f=ae(n.entries()),g=f.next();!g.done;g=f.next()){var m=pe(g.value,2),d=m[0],c=m[1];if(d.startsWith(a)){var l=d.substring(a.length);if(l){var s=c.split(\",\"),p=parseInt(s[0],10);isNaN(p)||(s.length===1?e[l]=p:e[l]={variant:p,env:s[1]?parseInt(s[1],10):void 0,id:s[2]?parseInt(s[2],10):void 0})}}}}catch(v){i={error:v}}finally{try{g&&!g.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}return this.fullConfig.debug&&Object.keys(e).length>0&&C(\"[OverridesPlugin] Query string overrides:\",e,\"env:\",o),{overrides:e,devEnv:o}}catch(v){return C(\"[OverridesPlugin] Error parsing query string:\",v),{overrides:{},devEnv:null}}},t.prototype.getEnhancedCookieOverrides=function(){var i,u;if(!this.fullConfig.cookieName)return{overrides:{},devEnv:null};var n=null;if(this.fullConfig.cookieAdapter)n=this.fullConfig.cookieAdapter.get(this.fullConfig.cookieName);else if(typeof document<\"u\"){var r=this.fullConfig.cookieName+\"=\",e=document.cookie.split(\";\");try{for(var o=ae(e),y=o.next();!y.done;y=o.next()){var a=y.value;if(a=a.trim(),a.indexOf(r)===0){n=decodeURIComponent(a.substring(r.length));break}}}catch(g){i={error:g}}finally{try{y&&!y.done&&(u=o.return)&&u.call(o)}finally{if(i)throw i.error}}}this.fullConfig.debug&&n&&C(\"[OverridesPlugin] Raw cookie value:\",n);var f=this.parseEnhancedCookieValue(n);return this.fullConfig.debug&&Object.keys(f.overrides).length>0&&C(\"[OverridesPlugin] Parsed cookie overrides:\",f),f},t.prototype.parseEnhancedCookieValue=function(i){var u,n;if(!i)return{overrides:{},devEnv:null};try{var r=null,e=i;if(i.startsWith(\"devEnv=\")){var o=i.split(\"|\");r=decodeURIComponent(o[0].substring(7)),e=o[1]||\"\"}var y={};if(e){var a=e.split(\",\");try{for(var f=ae(a),g=f.next();!g.done;g=f.next()){var m=g.value,d=pe(m.split(\":\"),2),c=d[0],l=d[1];if(!(!c||!l)){var s=decodeURIComponent(c),o=l.split(\".\"),p=parseInt(o[0],10);isNaN(p)||(o.length===1?y[s]=p:y[s]={variant:p,env:o[1]?parseInt(o[1],10):void 0,id:o[2]?parseInt(o[2],10):void 0})}}}catch(v){u={error:v}}finally{try{g&&!g.done&&(n=f.return)&&n.call(f)}finally{if(u)throw u.error}}}return{overrides:y,devEnv:r}}catch(v){return C(\"[OverridesPlugin] Error parsing overrides:\",v),{overrides:{},devEnv:null}}},t.prototype.persistEnhancedOverridesToCookie=function(i){var u,n;if(this.fullConfig.cookieName){var r=[];i.devEnv&&r.push(\"devEnv=\".concat(encodeURIComponent(i.devEnv)));var e=[];try{for(var o=ae(Object.entries(i.overrides)),y=o.next();!y.done;y=o.next()){var a=pe(y.value,2),f=a[0],g=a[1],m=encodeURIComponent(f);if(typeof g==\"number\")e.push(\"\".concat(m,\":\").concat(g));else{var d=g,c=\"\".concat(m,\":\").concat(d.variant);d.env!==void 0&&(c+=\".\".concat(d.env)),d.id!==void 0&&(c+=\".\".concat(d.id)),e.push(c)}}}catch(w){u={error:w}}finally{try{y&&!y.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}var l=r.length>0?\"\".concat(r.join(\"|\"),\"|\").concat(e.join(\",\")):e.join(\",\");if(this.fullConfig.cookieAdapter){var s=te({},this.fullConfig.cookieOptions);this.isServerSide&&(s.httpOnly===void 0&&(s.httpOnly=!0),s.secure===void 0&&(s.secure=!0),s.sameSite===void 0&&(s.sameSite=\"lax\")),this.fullConfig.cookieAdapter.set(this.fullConfig.cookieName,l,s)}else if(typeof document<\"u\"){var s=this.fullConfig.cookieOptions||{},p=\"\".concat(this.fullConfig.cookieName,\"=\").concat(encodeURIComponent(l));s.path&&(p+=\";path=\".concat(s.path)),s.maxAge&&(p+=\";max-age=\".concat(s.maxAge));var v=s;if(v.expires){var x=v.expires instanceof Date?v.expires.toUTCString():v.expires;p+=\";expires=\".concat(x)}s.domain&&(p+=\";domain=\".concat(s.domain)),s.secure&&(p+=\";secure\"),s.sameSite&&(p+=\";samesite=\".concat(s.sameSite)),document.cookie=p}this.fullConfig.debug&&C(\"[OverridesPlugin] Persisted to cookie:\",l)}},t.prototype.applyOverridesWithFetching=function(i,u){return ke(this,void 0,void 0,function(){var n,r,e,o,y,a,s,f,g,m,d,c,l,s,p,v,x,w,O;return Ce(this,function(S){switch(S.label){case 0:C(\"[OverridesPlugin] Initializing with overrides:\",i),C(\"[OverridesPlugin] Dev environment:\",u),n=[],r=new Set;try{for(e=ae(Object.entries(i)),o=e.next();!o.done;o=e.next())y=pe(o.value,2),a=y[0],s=y[1],f=typeof s==\"number\"?{variant:s}:s,f.env===1?(C(\"[OverridesPlugin] \".concat(a,\" categorized as DEV experiment (env=1)\")),n.push([a,f])):f.env===2&&f.id?(C(\"[OverridesPlugin] \".concat(a,\" categorized as DRAFT experiment (env=2, id=\").concat(f.id,\")\")),r.add(f.id)):C(\"[OverridesPlugin] \".concat(a,\" categorized as RUNNING experiment (env=\").concat(f.env||0,\")\"))}catch(b){v={error:b}}finally{try{o&&!o.done&&(x=e.return)&&x.call(e)}finally{if(v)throw v.error}}return C(\"[OverridesPlugin] Categorization summary:\",{total_overrides:Object.keys(i).length,dev_experiments:n.length,draft_experiments:r.size,running_experiments:Object.keys(i).length-n.length-r.size,dev_environment:u}),r.size>0?(C(\"[OverridesPlugin] Will fetch \".concat(r.size,\" DRAFT experiments from API\")),[4,this.fetchFromAPI(Array.from(r))]):[3,2];case 1:S.sent(),S.label=2;case 2:return g=u||this.fullConfig.environment||null,n.length>0&&g?(C(\"[OverridesPlugin] Will fetch \".concat(n.length,\" DEV experiments for environment: \").concat(g)),[4,this.fetchFromDevSDK(n,g)]):[3,4];case 3:return S.sent(),[3,5];case 4:n.length>0&&C(\"[OverridesPlugin] Have \".concat(n.length,\" DEV experiments but NO devEnv specified - NOT fetching\")),S.label=5;case 5:try{for(m=ae(Object.entries(i)),d=m.next();!d.done;d=m.next())c=pe(d.value,2),l=c[0],s=c[1],p=typeof s==\"number\"?s:s.variant,this.fullConfig.context.override(l,p),this.fullConfig.debug&&C(\"[OverridesPlugin] Override: \".concat(l,\" -> variant \").concat(p))}catch(b){w={error:b}}finally{try{d&&!d.done&&(O=m.return)&&O.call(m)}finally{if(w)throw w.error}}return[2]}})})},t.prototype.fetchFromAPI=function(i){return ke(this,void 0,void 0,function(){var u,n,r,e,o,y;return Ce(this,function(a){switch(a.label){case 0:if(i.length===0)return this.fullConfig.debug&&C(\"[OverridesPlugin] No experiment IDs to fetch from API\"),[2];u=this.fullConfig.absmartlyEndpoint,u||(u=this.fullConfig.sdkEndpoint.replace(\".absmartly.io\",\".absmartly.com\")),u.endsWith(\"/v1\")&&(u=u.slice(0,-3)),u.startsWith(\"http\")||(u=\"https://\".concat(u)),n=\"\".concat(u,\"/v1/experiments?ids=\").concat(i.join(\",\")),this.fullConfig.debug&&C(\"[OverridesPlugin] Fetching non-running experiments from API:\",n),a.label=1;case 1:return a.trys.push([1,4,,5]),r={\"Content-Type\":\"application/json\"},this.fullConfig.sdkApiKey&&(r.Authorization=\"ApiKey \".concat(this.fullConfig.sdkApiKey)),[4,fetch(n,{method:\"GET\",credentials:\"include\",headers:r,mode:\"cors\"})];case 2:return e=a.sent(),C(\"[OverridesPlugin] API Response status:\",e.status,e.statusText),e.ok?[4,e.json()]:(C(\"[OverridesPlugin] API request failed with status \".concat(e.status)),e.status===401&&C(\"[OverridesPlugin] Check if you need to log in to the ABsmartly console first\"),[2]);case 3:return o=a.sent(),o.experiments&&(this.injectExperimentsIntoContext(o.experiments),this.notifyExperimentsAdded()),[3,5];case 4:return y=a.sent(),C(\"[OverridesPlugin] Failed to fetch experiments from API:\",y),[3,5];case 5:return[2]}})})},t.prototype.fetchFromDevSDK=function(i,u){return ke(this,void 0,void 0,function(){var n,r,e,o,y,a,f;return Ce(this,function(g){switch(g.label){case 0:n=this.fullConfig.sdkEndpoint,n.startsWith(\"http\")||(n=\"https://\".concat(n)),n.endsWith(\"/v1\")&&(n=n.slice(0,-3)),r=\"\".concat(n,\"/v1/context?environment=\").concat(encodeURIComponent(u)),this.fullConfig.application&&(r+=\"&application=\".concat(encodeURIComponent(this.fullConfig.application))),this.fullConfig.debug&&C(\"[OverridesPlugin] Fetching development experiments from SDK:\",r),g.label=1;case 1:return g.trys.push([1,4,,5]),e={},this.fullConfig.sdkApiKey&&(e.Authorization=\"ApiKey \".concat(this.fullConfig.sdkApiKey)),[4,fetch(r,{method:\"GET\",headers:e})];case 2:return o=g.sent(),C(\"[OverridesPlugin] DEV Response status:\",o.status,o.statusText),o.ok?[4,o.json()]:(C(\"[OverridesPlugin] DEV SDK request failed with status \".concat(o.status)),[2]);case 3:return y=g.sent(),y.experiments&&(a=Object.entries(y.experiments).map(function(m){var d=pe(m,2),c=d[0],l=d[1];return te(te({},l),{name:c})}),this.injectExperimentsIntoContext(a),this.notifyExperimentsAdded()),[3,5];case 4:return f=g.sent(),C(\"[OverridesPlugin] Failed to fetch experiments from dev SDK:\",f),[3,5];case 5:return[2]}})})},t.prototype.injectExperimentsIntoContext=function(i){var u,n,r,e,o,y=this.fullConfig.context.data.bind(this.fullConfig.context),a=new Map;try{for(var f=ae(i),g=f.next();!g.done;g=f.next()){var m=g.value,d={id:m.id,name:m.name,unitType:((e=m.unit_type)===null||e===void 0?void 0:e.name)||\"user_id\",iteration:m.iteration||1,seedHi:0,seedLo:0,split:m.split||[],trafficSeedHi:0,trafficSeedLo:0,trafficSplit:[0,1],fullOnVariant:0,applications:((o=m.applications)===null||o===void 0?void 0:o.map(function(x){var w;return{name:((w=x.application)===null||w===void 0?void 0:w.name)||x.name}}))||[],variants:[],audience:m.audience||\"\",audienceStrict:m.audience_strict||!1};if(m.variants&&Array.isArray(m.variants))for(var c=0;c<m.variants.length;c++){var l=m.variants[c],s={name:l.name||\"Variant \".concat(c),config:typeof l.config==\"string\"?l.config:JSON.stringify(l.config||{})};if(l.variables)s.variables=l.variables;else if(l.config)try{var p=typeof l.config==\"string\"?JSON.parse(l.config):l.config,v=this.fullConfig.domChangesFieldName;p[v]&&(s.variables=(r={},r[v]=p[v],r),C(\"[OverridesPlugin] Variant \".concat(c,\" has DOM changes field '\").concat(v,\"'\")))}catch(x){C(\"[OverridesPlugin] Failed to parse variant config:\",x)}d.variants[c]=s}a.set(m.name,d)}}catch(x){u={error:x}}finally{try{g&&!g.done&&(n=f.return)&&n.call(f)}finally{if(u)throw u.error}}this.fullConfig.context.data=function(){var x,w,O=y();if(!O)return O;var S=O.experiments||[],b=new Set(S.map(function(T){return T.name})),_=function(T,M){if(!b.has(T))S.push(M);else{var R=S.findIndex(function(L){return L.name===T});R>=0&&(S[R]=M)}};try{for(var A=ae(a),E=A.next();!E.done;E=A.next()){var k=pe(E.value,2),P=k[0],j=k[1];_(P,j)}}catch(T){x={error:T}}finally{try{E&&!E.done&&(w=A.return)&&w.call(A)}finally{if(x)throw x.error}}return te(te({},O),{experiments:S})},this.fullConfig.debug&&C(\"[OverridesPlugin] Injected \".concat(i.length,\" experiments into context\"))},t.prototype.onExperimentsAdded=function(i){this.onExperimentsAddedCallbacks.push(i)},t.prototype.notifyExperimentsAdded=function(){var i,u;this.fullConfig.debug&&C(\"[OverridesPlugin] Notifying \".concat(this.onExperimentsAddedCallbacks.length,\" listeners about new experiments\"));try{for(var n=ae(this.onExperimentsAddedCallbacks),r=n.next();!r.done;r=n.next()){var e=r.value;try{e()}catch(o){C(\"[OverridesPlugin] Error in experiments added callback:\",o)}}}catch(o){i={error:o}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}},t.prototype.registerWithContext=function(){this.fullConfig.context&&(this.fullConfig.context.__plugins||(this.fullConfig.context.__plugins={}),this.fullConfig.context.__plugins.overridesPlugin={name:\"OverridesPlugin\",version:\"1.0.0\",initialized:!0,capabilities:[\"cookie-overrides\",\"query-overrides\",\"api-fetch\",\"dev-environments\"],instance:this,timestamp:Date.now()},this.fullConfig.debug&&C(\"[OverridesPlugin] Registered with context at __plugins.overridesPlugin\"))},t.prototype.unregisterFromContext=function(){var i,u;!((u=(i=this.fullConfig.context)===null||i===void 0?void 0:i.__plugins)===null||u===void 0)&&u.overridesPlugin&&(delete this.fullConfig.context.__plugins.overridesPlugin,this.fullConfig.debug&&C(\"[OverridesPlugin] Unregistered from context\"))},t.prototype.destroy=function(){h.prototype.destroy.call(this),this.unregisterFromContext(),this.onExperimentsAddedCallbacks=[]},t}(Vt);var Fe=function(){return Fe=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},Fe.apply(this,arguments)},Or=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Sr=function(){function h(){}return h.prototype.get=function(t){var i,u,n=t+\"=\",r=document.cookie.split(\";\");try{for(var e=Or(r),o=e.next();!o.done;o=e.next()){var y=o.value;if(y=y.trim(),y.indexOf(n)===0)return decodeURIComponent(y.substring(n.length))}}catch(a){i={error:a}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}return null},h.prototype.set=function(t,i,u){var n=\"\".concat(t,\"=\").concat(encodeURIComponent(i));u&&(u.path&&(n+=\"; path=\".concat(u.path)),u.domain&&(n+=\"; domain=\".concat(u.domain)),u.maxAge!==void 0&&(n+=\"; max-age=\".concat(u.maxAge)),u.secure&&(n+=\"; secure\"),u.sameSite&&(n+=\"; samesite=\".concat(u.sameSite))),document.cookie=n},h.prototype.delete=function(t,i){this.set(t,\"\",Fe(Fe({},i),{maxAge:0}))},h}();function re(h){var t,i=\"; \".concat(document.cookie),u=i.split(\"; \".concat(h,\"=\"));if(u.length===2){var n=(t=u.pop())===null||t===void 0?void 0:t.split(\";\").shift();return n||null}return null}function ze(h,t,i,u){u===void 0&&(u={});try{var n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);var r=\"expires=\".concat(n.toUTCString()),e=u.path||\"/\",o=\"\".concat(h,\"=\").concat(t,\";\").concat(r,\";path=\").concat(e);u.domain&&u.domain!==\"localhost\"&&(o+=\";domain=\".concat(u.domain));var y=u.sameSite||\"Lax\";return o+=\";SameSite=\".concat(y),u.secure&&(o+=\";Secure\"),document.cookie=o,!0}catch(a){return console.error(\"Unable to set cookie \".concat(h,\":\"),a),!1}}function Ze(h,t){t===void 0&&(t={}),ze(h,\"\",-1,t)}function et(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function ee(){try{var h=\"__localStorage_test__\";return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch{return!1}}var Ft=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},zt=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Wt=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},_r=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},tt=function(){function h(t){t===void 0&&(t={}),this.context=t.context,this.debug=t.debug||!1,this.cookieDomain=t.cookieDomain||\".absmartly.com\",this.cookiePath=t.cookiePath||\"/\",this.sameSite=t.sameSite||\"Lax\",this.secure=t.secure||!1,this.cookieExpiryDays=t.cookieExpiryDays||730,this.unitIdCookieName=t.unitIdCookieName||\"abs\",this.publicIdCookieName=t.publicIdCookieName||\"abs_public\",this.expiryCookieName=t.expiryCookieName||\"abs_expiry\",this.utmCookieName=t.utmCookieName||\"abs_utm_params\",this.utmParams=t.utmParamsList||[\"utm_source\",\"utm_medium\",\"utm_campaign\",\"utm_term\",\"utm_content\"],this.autoUpdateExpiry=t.autoUpdateExpiry!==!1,this.expiryCheckInterval=t.expiryCheckInterval||30}return h.prototype.debugLog=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.debug&&C.apply(void 0,_r([\"[CookiePlugin]\"],Wt(t),!1))},h.prototype.setCookie=function(t,i,u){var n=u!==void 0?u:this.cookieExpiryDays,r=ze(t,i,n,{domain:this.cookieDomain,path:this.cookiePath,sameSite:this.sameSite,secure:this.secure});return r&&this.debugLog(\"Set cookie \".concat(t,\":\"),i),r},h.prototype.deleteCookie=function(t){Ze(t,{domain:this.cookieDomain,path:this.cookiePath})},h.prototype.getUnitId=function(){if(this.unitId)return this.unitId;var t=navigator.cookieEnabled,i=ee(),u=null;return t&&(u=re(this.unitIdCookieName)||re(this.publicIdCookieName)),!u&&i&&(u=localStorage.getItem(\"abs_id\")),u&&(this.unitId=u),u},h.prototype.setUnitId=function(t){this.unitId=t;var i=navigator.cookieEnabled,u=ee();i&&(this.setCookie(this.unitIdCookieName,t),this.setCookie(this.publicIdCookieName,t),this.autoUpdateExpiry&&this.updateExpiryTimestamp()),u&&localStorage.setItem(\"abs_id\",t),this.debugLog(\"Unit ID set:\",t)},h.prototype.generateAndSetUnitId=function(){var t=et();return this.setUnitId(t),t},h.prototype.updateExpiryTimestamp=function(){if(navigator.cookieEnabled){var t=Date.now();this.setCookie(this.expiryCookieName,t.toString()),this.debugLog(\"Updated expiry timestamp:\",t)}},h.prototype.isExpiryFresh=function(){if(!navigator.cookieEnabled)return!1;var t=re(this.expiryCookieName);if(!t)return!1;try{var i=parseInt(t,10),u=Date.now(),n=(u-i)/(1e3*60*60*24),r=n<=this.expiryCheckInterval;return this.debugLog(\"Expiry check:\",{daysSinceSet:n,isFresh:r}),r}catch(e){return this.debugLog(\"Error parsing expiry cookie:\",e),!1}},h.prototype.getUtmParams=function(){var t={},i=new URLSearchParams(window.location.search);if(this.utmParams.forEach(function(r){var e=i.get(r);e&&(t[r]=e)}),Object.keys(t).length===0&&document.referrer)try{var u=new URL(document.referrer);this.utmParams.forEach(function(r){var e=u.searchParams.get(r);e&&(t[r]=e)})}catch(r){this.debugLog(\"Error parsing referrer URL:\",r)}if(Object.keys(t).length===0){var n=this.getStoredUtmParams();if(n)return n}return t},h.prototype.storeUtmParams=function(t){if(Object.keys(t).length!==0){var i={params:t,timestamp:Date.now()},u=navigator.cookieEnabled,n=ee();if(n)try{localStorage.setItem(this.utmCookieName,JSON.stringify(i)),this.debugLog(\"Stored UTM params in localStorage:\",t)}catch(r){this.debugLog(\"Failed to store UTM params in localStorage:\",r)}u&&(this.setCookie(this.utmCookieName,JSON.stringify(i),30),this.debugLog(\"Stored UTM params in cookie:\",t))}},h.prototype.getStoredUtmParams=function(){var t=null,i=ee(),u=navigator.cookieEnabled;if(i)try{t=localStorage.getItem(this.utmCookieName)}catch(r){this.debugLog(\"Failed to get UTM params from localStorage:\",r)}if(!t&&u&&(t=re(this.utmCookieName)),t)try{var n=JSON.parse(t);if(Date.now()-n.timestamp<30*24*60*60*1e3)return n.params}catch(r){this.debugLog(\"Failed to parse stored UTM params:\",r)}return null},h.prototype.applyUtmAttributesToContext=function(t){var i=this,u=t||this.context;if(!u){C(\"[CookiePlugin] No context available to apply UTM attributes\");return}var n=this.getUtmParams();Object.keys(n).length>0&&this.storeUtmParams(n),Object.entries(n).forEach(function(r){var e=Wt(r,2),o=e[0],y=e[1],a=o.slice(4);u.attribute(a,y),i.debugLog(\"Set attribute \".concat(a,\":\"),y)})},h.prototype.clearAllCookies=function(){this.deleteCookie(this.unitIdCookieName),this.deleteCookie(this.publicIdCookieName),this.deleteCookie(this.expiryCookieName),this.deleteCookie(this.utmCookieName);var t=ee();t&&(localStorage.removeItem(\"abs_id\"),localStorage.removeItem(this.utmCookieName)),this.unitId=void 0,this.debugLog(\"All cookies and storage cleared\")},h.prototype.ready=function(){return Ft(this,void 0,void 0,function(){var t;return zt(this,function(i){return this.debugLog(\"Initializing CookiePlugin\"),t=this.getUnitId(),t?(this.debugLog(\"Using existing unit ID:\",t),this.autoUpdateExpiry&&!this.isExpiryFresh()&&this.updateExpiryTimestamp()):(t=this.generateAndSetUnitId(),this.debugLog(\"Generated new unit ID:\",t)),this.context&&this.applyUtmAttributesToContext(),this.debugLog(\"CookiePlugin initialized successfully\"),[2]})})},h.prototype.initialize=function(){return Ft(this,void 0,void 0,function(){return zt(this,function(t){return[2,this.ready()]})})},h.prototype.setContext=function(t){this.context=t,this.debugLog(\"Context set for CookiePlugin\")},h.prototype.needsServerSideCookie=function(){var t=this.getUnitId(),i=navigator.cookieEnabled,u=ee();if(t){if(i&&!this.isExpiryFresh())return this.debugLog(\"Existing ID present but expiry not fresh - need worker call\"),!0}else if(i||u){var n=re(this.expiryCookieName);return this.debugLog(n?\"No existing ID but expiry cookie exists - need worker call\":\"No existing ID and no expiry cookie - need worker call\"),!0}return!1},h.prototype.trackLanding=function(t){var i=t||this.context;if(!i){C(\"[CookiePlugin] No context available for tracking landing\");return}var u=new URLSearchParams(window.location.search),n=this.utmParams.some(function(g){return u.get(g)}),r=document.referrer,e=r&&!r.includes(this.cookieDomain.replace(\".\",\"\")),o=navigator.cookieEnabled||ee(),y=!!(re(this.unitIdCookieName)||re(this.publicIdCookieName)||re(this.expiryCookieName)||ee()&&localStorage.getItem(\"abs_id\")),a=o&&!y;if(n||e||a){var f={referrer_url:r||\"\",landing_url:window.location.href,accepts_cookies:navigator.cookieEnabled,accepts_storage:ee(),has_utm:n};this.debugLog(\"Tracking landing:\",f),i.track(\"landing\",f)}},h}();var de=function(){return de=Object.assign||function(h){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n])}return h},de.apply(this,arguments)},Te=function(h,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(f){try{a(u.next(f))}catch(g){e(g)}}function y(f){try{a(u.throw(f))}catch(g){e(g)}}function a(f){f.done?r(f.value):n(f.value).then(o,y)}a((u=u.apply(h,t||[])).next())})},Me=function(h,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(f){return y([a,f])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(h,i)}catch(f){a=[6,f],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ge=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Tr=function(h,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return h.concat(r||Array.prototype.slice.call(t))},bt=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Mr=function(){function h(t){t===void 0&&(t={}),this.webVitalsLoaded=!1,this.metricsTracked=!1,this.context=t.context,this.debug=t.debug||!1,this.trackWebVitals=t.trackWebVitals!==!1,this.trackPageMetrics=t.trackPageMetrics!==!1,this.autoTrack=t.autoTrack!==!1,typeof window<\"u\"&&this.trackWebVitals&&(this.webVitalsPromise=this.loadWebVitalsLibrary(),this.debugLog(\"Started pre-loading web-vitals library\"))}return h.prototype.debugLog=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.debug&&C.apply(void 0,Tr([\"[WebVitalsPlugin]\"],Ge(t),!1))},h.prototype.setContext=function(t){this.context=t,this.debugLog(\"Context set for WebVitalsPlugin\")},h.prototype.loadWebVitalsLibrary=function(){return Te(this,void 0,void 0,function(){var t,i;return Me(this,function(u){switch(u.label){case 0:if(this.webVitalsLoaded||typeof window>\"u\")return[2,null];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.resolve().then(()=>(Zt(),Xt))];case 2:return t=u.sent(),this.webVitalsLoaded=!0,this.debugLog(\"Web Vitals library loaded from bundle\"),[2,t];case 3:throw i=u.sent(),C(\"[WebVitalsPlugin] Failed to load Web Vitals library:\",i),i;case 4:return[2]}})})},h.prototype.trackWebVitalsMetrics=function(t){return Te(this,void 0,void 0,function(){var i,u,n,r=this;return Me(this,function(e){switch(e.label){case 0:if(i=t||this.context,!i)return C(\"[WebVitalsPlugin] No context available for tracking web vitals\"),[2];if(!this.trackWebVitals)return[2];e.label=1;case 1:return e.trys.push([1,6,,7]),u=void 0,this.webVitalsPromise?[4,this.webVitalsPromise]:[3,3];case 2:return u=e.sent(),[3,5];case 3:return[4,this.loadWebVitalsLibrary()];case 4:u=e.sent(),e.label=5;case 5:return u?(u.onCLS(function(o){r.debugLog(\"CLS:\",o),i.track(\"cls_score\",de({},o))}),u.onLCP(function(o){r.debugLog(\"LCP:\",o),i.track(\"lcp_score\",de({},o))}),u.onFCP(function(o){r.debugLog(\"FCP:\",o),i.track(\"fcp_score\",de({},o))}),u.onINP(function(o){r.debugLog(\"INP:\",o),i.track(\"inp_score\",de({},o))}),u.onTTFB(function(o){r.debugLog(\"TTFB:\",o),i.track(\"ttfb_score\",de({},o))}),this.debugLog(\"Web Vitals tracking initialized\"),[3,7]):(C(\"[WebVitalsPlugin] Web Vitals library not available\"),[2]);case 6:return n=e.sent(),C(\"[WebVitalsPlugin] Error tracking web vitals:\",n),i.track(\"vitals_tracking_error\",{error:n.message,type:n.name}),[3,7];case 7:return[2]}})})},h.prototype.trackPageMetricsData=function(t){var i=this,u=t||this.context;if(!u){C(\"[WebVitalsPlugin] No context available for tracking page metrics\");return}if(!(!this.trackPageMetrics||this.metricsTracked))try{this.trackImmediateMetrics(u),document.readyState===\"complete\"?this.trackLoadMetrics(u):window.addEventListener(\"load\",function(){return i.trackLoadMetrics(u)}),this.metricsTracked=!0}catch(n){C(\"[WebVitalsPlugin] Error tracking page metrics:\",n),u.track(\"metrics_tracking_error\",{error:n.message,type:n.name})}},h.prototype.trackImmediateMetrics=function(t){var i,u,n,r,e=performance.getEntriesByType(\"navigation\")[0];if(!e){this.debugLog(\"Navigation timing not available\");return}var o={dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ttfb:e.responseStart-e.requestStart,download:e.responseEnd-e.responseStart,total_fetch:e.responseEnd-e.requestStart};try{for(var y=bt(Object.entries(o)),a=y.next();!a.done;a=y.next()){var f=Ge(a.value,2),g=f[0],m=f[1];t.track(\"page_timing_\".concat(g),{value:m,unit:\"ms\"}),this.debugLog(\"Page timing \".concat(g,\":\"),m)}}catch(v){i={error:v}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}var d={total_size:e.transferSize,header_size:e.transferSize-e.encodedBodySize,html_size:e.decodedBodySize,compressed_html_size:e.encodedBodySize};try{for(var c=bt(Object.entries(d)),l=c.next();!l.done;l=c.next()){var s=Ge(l.value,2),g=s[0],m=s[1];t.track(\"page_\".concat(g),{value:m,unit:\"bytes\"}),this.debugLog(\"Page \".concat(g,\":\"),m)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(e.encodedBodySize>0){var p=e.decodedBodySize/e.encodedBodySize;t.track(\"page_compression_ratio\",{value:p}),this.debugLog(\"Compression ratio:\",p)}},h.prototype.trackLoadMetrics=function(t){var i,u,n=performance.getEntriesByType(\"navigation\")[0];if(n){var r=n.domComplete-n.responseEnd;t.track(\"page_timing_dom_processing\",{value:r,metric:\"DOM Processing\",unit:\"ms\",rating:r<=500?\"good\":r<=1e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"DOM processing:\",r);var e=n.loadEventEnd-n.fetchStart;t.track(\"page_timing_total_load\",{value:e,metric:\"Total Load\",unit:\"ms\",rating:e<=2e3?\"good\":e<=4e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"Total load:\",e);var o={elements:document.getElementsByTagName(\"*\").length,imageCount:document.getElementsByTagName(\"img\").length,scriptCount:document.getElementsByTagName(\"script\").length,styleCount:document.getElementsByTagName(\"style\").length,linkCount:document.getElementsByTagName(\"link\").length};try{for(var y=bt(Object.entries(o)),a=y.next();!a.done;a=y.next()){var f=Ge(a.value,2),g=f[0],m=f[1];t.track(\"dom_\".concat(g),{value:m,metric:g,unit:\"count\",rating:m<=1e3?\"good\":m<=2e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"DOM \".concat(g,\":\"),m)}}catch(d){i={error:d}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}}},h.prototype.start=function(){return Te(this,void 0,void 0,function(){return Me(this,function(t){return this.debugLog(\"Starting WebVitalsPlugin\"),this.context?(this.autoTrack&&(this.trackWebVitals&&this.trackWebVitalsMetrics(),this.trackPageMetrics&&this.trackPageMetricsData()),this.debugLog(\"WebVitalsPlugin started successfully\"),[2]):(this.debugLog(\"No context available during start\"),[2])})})},h.prototype.ready=function(){return Te(this,void 0,void 0,function(){return Me(this,function(t){return[2,this.start()]})})},h.prototype.initialize=function(){return Te(this,void 0,void 0,function(){return Me(this,function(t){return[2,this.start()]})})},h.prototype.reset=function(){this.metricsTracked=!1,this.debugLog(\"WebVitalsPlugin reset\")},h}();var Ie=function(h){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&h[t],u=0;if(i)return i.call(h);if(h&&typeof h.length==\"number\")return{next:function(){return h&&u>=h.length&&(h=void 0),{value:h&&h[u++],done:!h}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ke=function(h,t){var i=typeof Symbol==\"function\"&&h[Symbol.iterator];if(!i)return h;var u=i.call(h),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Qe=\"absmartly_overrides\",wt=\"exp_\";function tr(h,t){var i,u;if(h===void 0&&(h=wt),typeof window>\"u\"&&!t)return{};var n=t||new URLSearchParams(window.location.search),r={};try{for(var e=Ie(n.entries()),o=e.next();!o.done;o=e.next()){var y=Ke(o.value,2),a=y[0],f=y[1];if(a.startsWith(h)){var g=a.substring(h.length);if(g){var m=f.split(\",\"),d=parseInt(m[0],10);isNaN(d)||(m.length===1?r[g]=d:r[g]={variant:d,env:m[1]?parseInt(m[1],10):void 0,id:m[2]?parseInt(m[2],10):void 0})}}}}catch(c){i={error:c}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}return r}function rr(h){var t,i;if(!h)return{};var u={},n=h;if(h.includes(\"|\")){var r=h.split(\"|\");n=r[r.length-1]}if(!n)return{};var e=n.split(\",\");try{for(var o=Ie(e),y=o.next();!y.done;y=o.next()){var a=y.value,f=Ke(a.split(\":\"),2),g=f[0],m=f[1];if(!(!g||!m)){var d=decodeURIComponent(g),r=m.split(\".\"),c=parseInt(r[0],10);isNaN(c)||(r.length===1?u[d]=c:u[d]={variant:c,env:r[1]?parseInt(r[1],10):void 0,id:r[2]?parseInt(r[2],10):void 0})}}}catch(l){t={error:l}}finally{try{y&&!y.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return u}function nr(h,t){var i,u;h===void 0&&(h=Qe);var n=t??(typeof document<\"u\"?document.cookie:\"\");if(!n)return{};var r=h+\"=\",e=n.split(\";\");try{for(var o=Ie(e),y=o.next();!y.done;y=o.next()){var a=y.value;if(a=a.trim(),a.indexOf(r)===0){var f=decodeURIComponent(a.substring(r.length));return rr(f)}}}catch(g){i={error:g}}finally{try{y&&!y.done&&(u=o.return)&&u.call(o)}finally{if(i)throw i.error}}return{}}function ir(h){var t,i,u=[];try{for(var n=Ie(Object.entries(h)),r=n.next();!r.done;r=n.next()){var e=Ke(r.value,2),o=e[0],y=e[1],a=encodeURIComponent(o);if(typeof y==\"number\")u.push(\"\".concat(a,\":\").concat(y));else{var f=\"\".concat(a,\":\").concat(y.variant);y.env!==void 0&&(f+=\".\".concat(y.env)),y.id!==void 0&&(f+=\".\".concat(y.id)),u.push(f)}}}catch(g){t={error:g}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u.join(\",\")}function or(h,t){if(t===void 0&&(t={}),!(typeof document>\"u\")){var i=t.cookieName||Qe,u=t.maxAge||86400,n=ir(h);document.cookie=\"\".concat(i,\"=\").concat(encodeURIComponent(n),\";path=/;max-age=\").concat(u)}}function xt(h,t,i,u){h===void 0&&(h=Qe),t===void 0&&(t=wt);var n=tr(t,i);if(Object.keys(n).length>0)return typeof document<\"u\"&&or(n,{cookieName:h,maxAge:86400}),er(n);var r=nr(h,u);return er(r)}function er(h){var t,i,u={};try{for(var n=Ie(Object.entries(h)),r=n.next();!r.done;r=n.next()){var e=Ke(r.value,2),o=e[0],y=e[1];u[o]=typeof y==\"number\"?y:y.variant}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u}var Ir=ar();window.ABsmartly=Ir;var sr=\"1.1.0-lite\";window.ABsmartlyBundleVersion=sr;var Rr=window.__absmartlyPerfStart||performance.now(),oe={start:Rr,sdkConfigured:0,contextCreated:0,contextReady:0,pluginsLoaded:0,domReady:0};console.log(\"[ABsmartly Worker] SDK Bundle Version: \"+sr);function xe(h){oe[h]=performance.now();var t=(oe[h]-oe.start).toFixed(2);console.log(\"[ABsmartly Worker +\"+t+\"ms] \"+h)}function ur(){var h=(performance.now()-oe.start).toFixed(2),t=Array.prototype.slice.call(arguments);t.unshift(\"[ABsmartly Worker +\"+h+\"ms]\"),console.log.apply(console,t)}window.ABsmartlyInit=function(h,t,i,u,n,r){if(typeof ABsmartly>\"u\"||!ABsmartly.SDK){console.error(\"[ABsmartly Worker] SDK not loaded\");return}try{var e=new URLSearchParams(location.search),o=h.queryPrefix||\"_\",y=xt(\"absmartly_overrides\",o,e),a=Object.assign({},n||{},y),f=r||{domChanges:!0,cookie:!0},g=null;if(f.cookie!==!1)try{g=new tt({debug:h.enableDebug||!1,cookieDomain:h.cookieDomain||window.location.hostname,cookiePath:\"/\",sameSite:\"Lax\",cookieExpiryDays:St.MAX_AGE_DAYS,unitIdCookieName:Se.UNIT_ID,publicIdCookieName:Se.PUBLIC_ID,expiryCookieName:Se.EXPIRY,utmCookieName:Se.UTM_PARAMS,autoUpdateExpiry:!0,expiryCheckInterval:30}),ur(\"CookiePlugin initialized\")}catch(v){console.error(\"[ABsmartly Worker] Failed to initialize CookiePlugin:\",v)}var m={endpoint:h.endpoint,apiKey:h.apiKey,environment:h.environment,application:h.application,retries:h.retries,timeout:h.timeout};xe(\"sdkConfigured\");var d=new ABsmartly.SDK(m),c,l={};l[i||\"user_id\"]=t;var s={units:l,publishDelay:100};u?c=d.createContextWith(s,u):c=d.createContext(s),xe(\"contextCreated\"),a&&Object.keys(a).length>0&&c.overrides(a),window.ABsmartlyContext=c;var p={};if(f.cookie!==!1&&g&&(p.cookie=g,p.cookie.setContext(c),p.cookie.applyUtmAttributesToContext()),f.domChanges!==!1)try{p.domChanges=new Xe({context:c,autoApply:!0,spa:!0,visibilityTracking:!0,debug:h.enableDebug||!1,hideUntilReady:h.hideSelector||!1,hideTransition:h.hideTransition||\"0.3s ease-in\"}),ur(\"DOMChangesPluginLite loaded\")}catch(v){console.error(\"[ABsmartly Worker] Failed to load DOMChangesPlugin:\",v)}xe(\"pluginsLoaded\"),c.ready().then(function(){xe(\"contextReady\");var v=oe.contextReady-oe.start;if(console.log(\"[ABsmartly Worker] context.ready() in \"+v.toFixed(2)+\"ms\"),p.domChanges)if(typeof p.domChanges.ready==\"function\")p.domChanges.ready().then(function(){xe(\"domReady\");var w=oe.domReady-oe.start;console.log(\"[ABsmartly Worker] \\u{1F3AF} DOM changes ready: \"+w.toFixed(2)+\"ms\")}).catch(function(w){console.error(\"[ABsmartly Worker] DOMChangesPlugin.ready() error:\",w)});else{xe(\"domReady\");var x=oe.domReady-oe.start;console.log(\"[ABsmartly Worker] \\u{1F3AF} DOM changes ready (sync): \"+x.toFixed(2)+\"ms\")}else console.log(\"[ABsmartly Worker] DOMChangesPlugin not loaded\")}).catch(function(v){console.error(\"[ABsmartly Worker] Failed to load context:\",v)})}catch(v){console.error(\"[ABsmartly Worker] Failed to initialize SDK:\",v)}};})();\n"

export default sdkBundleLite
