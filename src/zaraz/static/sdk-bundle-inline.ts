/**
 * This file is AUTO-GENERATED by esbuild.js
 * DO NOT EDIT MANUALLY
 *
 * Contains the bundled ABsmartly SDK (FULL) as a string constant
 * Built from public/_zaraz/absmartly-sdk.js
 * Includes: SDK + DOMChangesPlugin + CookiePlugin + WebVitals
 */

const sdkBundle = "\"use strict\";(()=>{var lr=Object.defineProperty;var cr=(v,t)=>()=>(v&&(t=v(v=0)),t);var fr=(v,t)=>()=>(t||v((t={exports:{}}).exports,t),t.exports),pr=(v,t)=>{for(var i in t)lr(v,i,{get:t[i],enumerable:!0})};var Zt={};pr(Zt,{CLSThresholds:()=>st,FCPThresholds:()=>ut,INPThresholds:()=>ft,LCPThresholds:()=>dt,TTFBThresholds:()=>yt,onCLS:()=>_r,onFCP:()=>$t,onINP:()=>kr,onLCP:()=>Cr,onTTFB:()=>Pr});function mt(v,t){return nt.get(v)||nt.set(v,new t),nt.get(v)}var Kt,Se,ie,ht,gt,je,oe,nt,ot,Te,bt,xe,Qt,qt,at,He,Ge,ut,$t,st,_r,Jt,it,qe,Er,lt,Ht,Ar,Gt,ct,Yt,ft,kr,pt,dt,Cr,yt,vt,Pr,Xt=cr(()=>{Kt=-1,Se=v=>{addEventListener(\"pageshow\",t=>{t.persisted&&(Kt=t.timeStamp,v(t))},!0)},ie=(v,t,i,u)=>{let n,r;return e=>{t.value>=0&&(e||u)&&(r=t.value-(n??0),(r||n===void 0)&&(n=t.value,t.delta=r,t.rating=((o,y)=>o>y[1]?\"poor\":o>y[0]?\"needs-improvement\":\"good\")(t.value,i),v(t)))}},ht=v=>{requestAnimationFrame(()=>requestAnimationFrame(()=>v()))},gt=()=>{let v=performance.getEntriesByType(\"navigation\")[0];if(v&&v.responseStart>0&&v.responseStart<performance.now())return v},je=()=>gt()?.activationStart??0,oe=(v,t=-1)=>{let i=gt(),u=\"navigate\";return Kt>=0?u=\"back-forward-cache\":i&&(document.prerendering||je()>0?u=\"prerender\":document.wasDiscarded?u=\"restore\":i.type&&(u=i.type.replace(/_/g,\"-\"))),{name:v,value:t,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:u}},nt=new WeakMap;ot=class{t;i=0;o=[];h(t){if(t.hadRecentInput)return;let i=this.o[0],u=this.o.at(-1);this.i&&i&&u&&t.startTime-u.startTime<1e3&&t.startTime-i.startTime<5e3?(this.i+=t.value,this.o.push(t)):(this.i=t.value,this.o=[t]),this.t?.(t)}},Te=(v,t,i={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(v)){let u=new PerformanceObserver(n=>{Promise.resolve().then(()=>{t(n.getEntries())})});return u.observe({type:v,buffered:!0,...i}),u}}catch{}},bt=v=>{let t=!1;return()=>{t||(v(),t=!0)}},xe=-1,Qt=new Set,qt=()=>document.visibilityState!==\"hidden\"||document.prerendering?1/0:0,at=v=>{if(document.visibilityState===\"hidden\"){if(v.type===\"visibilitychange\")for(let t of Qt)t();isFinite(xe)||(xe=v.type===\"visibilitychange\"?v.timeStamp:0,removeEventListener(\"prerenderingchange\",at,!0))}},He=()=>{if(xe<0){let v=je();xe=(document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter(i=>i.name===\"hidden\"&&i.startTime>v)[0]?.startTime)??qt(),addEventListener(\"visibilitychange\",at,!0),addEventListener(\"prerenderingchange\",at,!0),Se(()=>{setTimeout(()=>{xe=qt()})})}return{get firstHiddenTime(){return xe},onHidden(v){Qt.add(v)}}},Ge=v=>{document.prerendering?addEventListener(\"prerenderingchange\",()=>v(),!0):v()},ut=[1800,3e3],$t=(v,t={})=>{Ge(()=>{let i=He(),u,n=oe(\"FCP\"),r=Te(\"paint\",e=>{for(let o of e)o.name===\"first-contentful-paint\"&&(r.disconnect(),o.startTime<i.firstHiddenTime&&(n.value=Math.max(o.startTime-je(),0),n.entries.push(o),u(!0)))});r&&(u=ie(v,n,ut,t.reportAllChanges),Se(e=>{n=oe(\"FCP\"),u=ie(v,n,ut,t.reportAllChanges),ht(()=>{n.value=performance.now()-e.timeStamp,u(!0)})}))})},st=[.1,.25],_r=(v,t={})=>{let i=He();$t(bt(()=>{let u,n=oe(\"CLS\",0),r=mt(t,ot),e=y=>{for(let a of y)r.h(a);r.i>n.value&&(n.value=r.i,n.entries=r.o,u())},o=Te(\"layout-shift\",e);o&&(u=ie(v,n,st,t.reportAllChanges),i.onHidden(()=>{e(o.takeRecords()),u(!0)}),Se(()=>{r.i=0,n=oe(\"CLS\",0),u=ie(v,n,st,t.reportAllChanges),ht(()=>u())}),setTimeout(u))}))},Jt=0,it=1/0,qe=0,Er=v=>{for(let t of v)t.interactionId&&(it=Math.min(it,t.interactionId),qe=Math.max(qe,t.interactionId),Jt=qe?(qe-it)/7+1:0)},Ht=()=>lt?Jt:performance.interactionCount??0,Ar=()=>{\"interactionCount\"in performance||lt||(lt=Te(\"event\",Er,{type:\"event\",buffered:!0,durationThreshold:0}))},Gt=0,ct=class{u=[];l=new Map;m;p;v(){Gt=Ht(),this.u.length=0,this.l.clear()}L(){let t=Math.min(this.u.length-1,Math.floor((Ht()-Gt)/50));return this.u[t]}h(t){if(this.m?.(t),!t.interactionId&&t.entryType!==\"first-input\")return;let i=this.u.at(-1),u=this.l.get(t.interactionId);if(u||this.u.length<10||t.duration>i.P){if(u?t.duration>u.P?(u.entries=[t],u.P=t.duration):t.duration===u.P&&t.startTime===u.entries[0].startTime&&u.entries.push(t):(u={id:t.interactionId,entries:[t],P:t.duration},this.l.set(u.id,u),this.u.push(u)),this.u.sort((n,r)=>r.P-n.P),this.u.length>10){let n=this.u.splice(10);for(let r of n)this.l.delete(r.id)}this.p?.(u)}}},Yt=v=>{let t=globalThis.requestIdleCallback||setTimeout;document.visibilityState===\"hidden\"?v():(v=bt(v),addEventListener(\"visibilitychange\",v,{once:!0,capture:!0}),t(()=>{v(),removeEventListener(\"visibilitychange\",v,{capture:!0})}))},ft=[200,500],kr=(v,t={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;let i=He();Ge(()=>{Ar();let u,n=oe(\"INP\"),r=mt(t,ct),e=y=>{Yt(()=>{for(let c of y)r.h(c);let a=r.L();a&&a.P!==n.value&&(n.value=a.P,n.entries=a.entries,u())})},o=Te(\"event\",e,{durationThreshold:t.durationThreshold??40});u=ie(v,n,ft,t.reportAllChanges),o&&(o.observe({type:\"first-input\",buffered:!0}),i.onHidden(()=>{e(o.takeRecords()),u(!0)}),Se(()=>{r.v(),n=oe(\"INP\"),u=ie(v,n,ft,t.reportAllChanges)}))})},pt=class{m;h(t){this.m?.(t)}},dt=[2500,4e3],Cr=(v,t={})=>{Ge(()=>{let i=He(),u,n=oe(\"LCP\"),r=mt(t,pt),e=y=>{t.reportAllChanges||(y=y.slice(-1));for(let a of y)r.h(a),a.startTime<i.firstHiddenTime&&(n.value=Math.max(a.startTime-je(),0),n.entries=[a],u())},o=Te(\"largest-contentful-paint\",e);if(o){u=ie(v,n,dt,t.reportAllChanges);let y=bt(()=>{e(o.takeRecords()),o.disconnect(),u(!0)}),a=c=>{c.isTrusted&&(Yt(y),removeEventListener(c.type,a,{capture:!0}))};for(let c of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(c,a,{capture:!0});Se(c=>{n=oe(\"LCP\"),u=ie(v,n,dt,t.reportAllChanges),ht(()=>{n.value=performance.now()-c.timeStamp,u(!0)})})}})},yt=[800,1800],vt=v=>{document.prerendering?Ge(()=>vt(v)):document.readyState!==\"complete\"?addEventListener(\"load\",()=>vt(v),!0):setTimeout(v)},Pr=(v,t={})=>{let i=oe(\"TTFB\"),u=ie(v,i,yt,t.reportAllChanges);vt(()=>{let n=gt();n&&(i.value=Math.max(n.responseStart-je(),0),i.entries=[n],u(!0),Se(()=>{i=oe(\"TTFB\",0),u=ie(v,i,yt,t.reportAllChanges),u(!0)}))})}});var ar=fr(($e,Ot)=>{(function(v,t){typeof $e==\"object\"&&typeof Ot==\"object\"?Ot.exports=t():typeof define==\"function\"&&define.amd?define([],t):typeof $e==\"object\"?$e.absmartly=t():v.absmartly=t()})(self,function(){return function(){var v={745:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){var d=typeof Symbol<\"u\"&&l[Symbol.iterator]||l[\"@@iterator\"];if(!d){if(Array.isArray(l)||(d=function(w,_){if(w){if(typeof w==\"string\")return a(w,_);var A=Object.prototype.toString.call(w).slice(8,-1);if(A===\"Object\"&&w.constructor&&(A=w.constructor.name),A===\"Map\"||A===\"Set\")return Array.from(w);if(A===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return a(w,_)}}(l))||s&&l&&typeof l.length==\"number\"){d&&(l=d);var h=0,x=function(){};return{s:x,n:function(){return h>=l.length?{done:!0}:{done:!1,value:l[h++]}},e:function(w){throw w},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b,S=!0,O=!1;return{s:function(){d=d.call(l)},n:function(){var w=d.next();return S=w.done,w},e:function(w){O=!0,b=w},f:function(){try{S||d.return==null||d.return()}finally{if(O)throw b}}}}function a(l,s){(s==null||s>l.length)&&(s=l.length);for(var d=0,h=new Array(s);d<s;d++)h[d]=l[d];return h}function c(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function g(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function m(l,s,d){return s&&g(l.prototype,s),d&&g(l,d),Object.defineProperty(l,\"prototype\",{writable:!1}),l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortController=r.AbortSignal=void 0;var p=function(){function l(){c(this,l),this.aborted=!1,this._events={}}return m(l,[{key:\"addEventListener\",value:function(s,d){var h=this._events[s];h||(h=[],this._events[s]=h),h.push(d)}},{key:\"removeEventListener\",value:function(s,d){var h=this._events[s];if(h){var x=h.findIndex(function(b){return b===d});x!==-1&&(h.splice(x,1),h.length===0&&delete this._events[s])}}},{key:\"dispatchEvent\",value:function(s){this[\"on\".concat(s.type)]&&this[\"on\".concat(s.type)](s);var d=this._events[s.type];if(d){var h,x=y(d);try{for(x.s();!(h=x.n()).done;)h.value.call(null,s)}catch(b){x.e(b)}finally{x.f()}}}},{key:\"toString\",value:function(){return\"[object AbortSignal]\"}}]),l}();r.AbortSignal=p;var f=function(){function l(){c(this,l),this.signal=new p}return m(l,[{key:\"abort\",value:function(){var s;try{s=new Event(\"abort\")}catch{s={type:\"abort\",bubbles:!1,cancelable:!1}}this.signal.aborted=!0,this.signal.dispatchEvent(s)}},{key:\"toString\",value:function(){return\"[object AbortController]\"}}]),l}();r.AbortController=f,typeof Symbol<\"u\"&&Symbol.toStringTag!==void 0&&(Object.defineProperty(p.prototype,Symbol.toStringTag,{configurable:!0,value:\"AbortSignal\"}),Object.defineProperty(f.prototype,Symbol.toStringTag,{configurable:!0,value:\"AbortController\"})),r.default=f},6354:function(n,r,e){\"use strict\";var o=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortController=void 0;var y=e(1231),a=o(e(745));r.AbortController=(0,y.isLongLivedApp)()&&window.AbortController?window.AbortController:(0,y.isWorker)()&&self.AbortController?self.AbortController:e.g&&e.g.AbortController?e.g.AbortController:a.default},982:function(n,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.insertUniqueSorted=void 0,r.insertUniqueSorted=function(e,o,y){for(var a=0,c=e.length-1;a<=c;){var g=Math.floor(a+(c-a)/2);if(y(e[g],o))a=g+1;else{if(!y(o,e[g]))return;c=g-1}}e.splice(a,0,o)}},2786:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(p){return typeof p}:function(p){return p&&typeof Symbol==\"function\"&&p.constructor===Symbol&&p!==Symbol.prototype?\"symbol\":typeof p},o(m)}function y(m,p){for(var f=0;f<p.length;f++){var l=p[f];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,d=void 0,d=function(h,x){if(o(h)!==\"object\"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var S=b.call(h,x||\"default\");if(o(S)!==\"object\")return S;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(h)}(s,\"string\"),o(d)===\"symbol\"?d:String(d)),l)}var s,d}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.VariantAssigner=void 0;var a=e(1231),c=e(7433),g=function(){function m(s){(function(d,h){if(!(d instanceof h))throw new TypeError(\"Cannot call a class as a function\")})(this,m),this._unitHash=(0,c.murmur3_32)((0,a.stringToUint8Array)(s).buffer)}var p,f,l;return p=m,(f=[{key:\"assign\",value:function(s,d,h){var x=this._probability(d,h);return(0,a.chooseVariant)(s,x)}},{key:\"_probability\",value:function(s,d){var h=this._unitHash,x=new ArrayBuffer(12),b=new DataView(x);return b.setUint32(0,d,!0),b.setUint32(4,s,!0),b.setUint32(8,h,!0),(0,c.murmur3_32)(x)*(1/4294967295)}}])&&y(p.prototype,f),l&&y(p,l),Object.defineProperty(p,\"prototype\",{writable:!1}),m}();r.VariantAssigner=g},7578:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}e(9601),e(6078),e(9653);var a=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(r,\"__esModule\",{value:!0});var c=a(e(3651)),g=e(6354),m=e(2928),p=e(1231),f=function(){function l(x){(function(_,A){if(!(_ instanceof A))throw new TypeError(\"Cannot call a class as a function\")})(this,l),this._opts=Object.assign({agent:\"javascript-client\",apiKey:void 0,application:void 0,endpoint:void 0,environment:void 0,retries:5,timeout:3e3,keepalive:!0},x);for(var b=0,S=[\"agent\",\"application\",\"apiKey\",\"endpoint\",\"environment\"];b<S.length;b++){var O=S[b];if(!(O in this._opts)||this._opts[O]===void 0)throw new Error(\"Missing '\".concat(O,\"' in options argument\"));var w=this._opts[O];if(typeof w!=\"string\"||w.length===0){if(O===\"application\"&&w!==null&&o(w)===\"object\"&&\"name\"in w)continue;throw new Error(\"Invalid '\".concat(O,\"' in options argument\"))}}typeof this._opts.application==\"string\"&&(this._opts.application={name:this._opts.application,version:0}),this._delay=50}var s,d,h;return s=l,d=[{key:\"getContext\",value:function(x){return this.getUnauthed(Object.assign(Object.assign({},x),{path:\"/context\",query:{application:(0,p.getApplicationName)(this._opts.application),environment:this._opts.environment}}))}},{key:\"createContext\",value:function(x,b){var S={units:x.units};return this.post(Object.assign(Object.assign({},b),{path:\"/context\",body:S}))}},{key:\"publish\",value:function(x,b){var S={units:x.units,hashed:x.hashed,publishedAt:x.publishedAt||Date.now()};return Array.isArray(x.goals)&&x.goals.length>0&&(S.goals=x.goals),Array.isArray(x.exposures)&&x.exposures.length>0&&(S.exposures=x.exposures),Array.isArray(x.attributes)&&x.attributes.length>0&&(S.attributes=x.attributes),this.put(Object.assign(Object.assign({},b),{path:\"/context\",body:S}))}},{key:\"request\",value:function(x){var b,S,O=this,w=\"\".concat(this._opts.endpoint).concat(x.path);if(x.query){var _=Object.keys(x.query);if(_.length>0){var A=_.map(function(I){return x.query?\"\".concat(I,\"=\").concat(encodeURIComponent(x.query[I])):null}).join(\"&\");w=\"\".concat(w,\"?\").concat(A)}}var E=new g.AbortController,k=function(){var I={method:x.method,body:x.body!==void 0?JSON.stringify(x.body,null,0):void 0,signal:E.signal,keepalive:O._opts.keepalive};return x.auth&&(I.headers={\"Content-Type\":\"application/json\",\"X-API-Key\":O._opts.apiKey,\"X-Agent\":O._opts.agent,\"X-Environment\":O._opts.environment,\"X-Application\":(0,p.getApplicationName)(O._opts.application),\"X-Application-Version\":(0,p.getApplicationVersion)(O._opts.application)}),(0,c.default)(w,I).then(function(N){if(!N.ok){var B=N.status>=400&&N.status<500;return N.text().then(function(q){var F=new Error(q!==null&&q.length>0?q:N.statusText);return F._bail=B,Promise.reject(F)})}return N.json()})},P=function I(N){return new Promise(function(B,q){var F=setTimeout(function(){delete I.reject,B()},N);I.reject=function(D){clearTimeout(F),q(D)}})},j=function I(N,B){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return delete I.timedout,k().catch(function(D){if(console.warn(D),D._bail||N<=0)throw new Error(D.message);if(q>=N)throw new m.RetryError(q,D,w);if(F>=B||D.name===\"AbortError\")throw I.timedout?new m.TimeoutError(B):D;var W=(1<<q)*O._delay+.5*Math.random()*O._delay;return F+W>B&&(W=B-F),P(W).then(function(){return I(N,B,q+1,F+W)})})},T=function(){P.reject?P.reject(new m.AbortError):E.abort()};x.signal&&x.signal.addEventListener(\"abort\",T);var M=x.timeout||this._opts.timeout||0,L=M>0?setTimeout(function(){j.timedout=!0,T()},M):0,R=function(){clearTimeout(L),x.signal&&x.signal.removeEventListener(\"abort\",T)};return j((b=this._opts.retries)!==null&&b!==void 0?b:5,(S=this._opts.timeout)!==null&&S!==void 0?S:3e3).then(function(I){return R(),I}).catch(function(I){throw R(),I})}},{key:\"post\",value:function(x){return this.request(Object.assign(Object.assign({},x),{auth:!0,method:\"POST\"}))}},{key:\"put\",value:function(x){return this.request(Object.assign(Object.assign({},x),{auth:!0,method:\"PUT\"}))}},{key:\"getUnauthed\",value:function(x){return this.request(Object.assign(Object.assign({},x),{method:\"GET\"}))}}],d&&y(s.prototype,d),h&&y(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),l}();r.default=f},7468:function(n,r,e){\"use strict\";function o(m,p){return function(f){if(Array.isArray(f))return f}(m)||function(f,l){var s=f==null?null:typeof Symbol<\"u\"&&f[Symbol.iterator]||f[\"@@iterator\"];if(s!=null){var d,h,x,b,S=[],O=!0,w=!1;try{if(x=(s=s.call(f)).next,l===0){if(Object(s)!==s)return;O=!1}else for(;!(O=(d=x.call(s)).done)&&(S.push(d.value),S.length!==l);O=!0);}catch(_){w=!0,h=_}finally{try{if(!O&&s.return!=null&&(b=s.return(),Object(b)!==b))return}finally{if(w)throw h}}return S}}(m,p)||function(f,l){if(f){if(typeof f==\"string\")return y(f,l);var s=Object.prototype.toString.call(f).slice(8,-1);if(s===\"Object\"&&f.constructor&&(s=f.constructor.name),s===\"Map\"||s===\"Set\")return Array.from(f);if(s===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return y(f,l)}}(m,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y(m,p){(p==null||p>m.length)&&(p=m.length);for(var f=0,l=new Array(p);f<p;f++)l[f]=m[f];return l}e(9720);var a=function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.mergeConfig=void 0;var c=a(e(1697)),g=e(1231);r.mergeConfig=function(m,p){for(var f=(0,c.default)(p),l=m.variableKeys(),s=function(){for(var x=o(h[d],2),b=x[0],S=x[1],O=f,w=b.split(\".\"),_=function(){var E=w[A];if(\"_\".concat(E,\"_setter\")in O)return console.error(\"Config key '\".concat(w.slice(0,A+1).join(\".\"),\"' already set by experiment '\").concat(O[\"_\".concat(E,\"_setter\")],\"'.\")),O=void 0,\"break\";if(E in O&&A<w.length-1&&((0,g.isObject)(O[E])?O=O[E]:(console.warn(\"Config key '\".concat(b,\"' for experiment '\").concat(S,\"' is overriding non-object value at '\").concat(w.slice(0,A+1).join(\".\"),\"' with an object.\")),O=O[E]={})),A===w.length-1){var k=O[E];Object.defineProperty(O,\"_\".concat(E,\"_setter\"),{value:S,writable:!1}),Object.defineProperty(O,E,{get:function(){return m.variableValue(b,k)}})}},A=0;A<w.length&&_()!==\"break\";++A);},d=0,h=Object.entries(l);d<h.length;d++)s();return f}},7621:function(n,r,e){\"use strict\";function o(x,b){var S=typeof Symbol<\"u\"&&x[Symbol.iterator]||x[\"@@iterator\"];if(!S){if(Array.isArray(x)||(S=a(x))||b&&x&&typeof x.length==\"number\"){S&&(x=S);var O=0,w=function(){};return{s:w,n:function(){return O>=x.length?{done:!0}:{done:!1,value:x[O++]}},e:function(k){throw k},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,A=!0,E=!1;return{s:function(){S=S.call(x)},n:function(){var k=S.next();return A=k.done,k},e:function(k){E=!0,_=k},f:function(){try{A||S.return==null||S.return()}finally{if(E)throw _}}}}function y(x,b){return function(S){if(Array.isArray(S))return S}(x)||function(S,O){var w=S==null?null:typeof Symbol<\"u\"&&S[Symbol.iterator]||S[\"@@iterator\"];if(w!=null){var _,A,E,k,P=[],j=!0,T=!1;try{if(E=(w=w.call(S)).next,O===0){if(Object(w)!==w)return;j=!1}else for(;!(j=(_=E.call(w)).done)&&(P.push(_.value),P.length!==O);j=!0);}catch(M){T=!0,A=M}finally{try{if(!j&&w.return!=null&&(k=w.return(),Object(k)!==k))return}finally{if(T)throw A}}return P}}(x,b)||a(x,b)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(x,b){if(x){if(typeof x==\"string\")return c(x,b);var S=Object.prototype.toString.call(x).slice(8,-1);return S===\"Object\"&&x.constructor&&(S=x.constructor.name),S===\"Map\"||S===\"Set\"?Array.from(x):S===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?c(x,b):void 0}}function c(x,b){(b==null||b>x.length)&&(b=x.length);for(var S=0,O=new Array(b);S<b;S++)O[S]=x[S];return O}function g(x){return g=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(b){return typeof b}:function(b){return b&&typeof Symbol==\"function\"&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b},g(x)}function m(x,b){for(var S=0;S<b.length;S++){var O=b[S];O.enumerable=O.enumerable||!1,O.configurable=!0,\"value\"in O&&(O.writable=!0),Object.defineProperty(x,p(O.key),O)}}function p(x){var b=function(S,O){if(g(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(g(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\");return g(b)===\"symbol\"?b:String(b)}e(9720),e(9601),e(9826),e(9653),e(6078),Object.defineProperty(r,\"__esModule\",{value:!0});var f=e(1231),l=e(2786),s=e(7682),d=e(982),h=function(){function x(w,_,A,E){var k=this;(function(P,j){if(!(P instanceof j))throw new TypeError(\"Cannot call a class as a function\")})(this,x),this._sdk=w,this._publisher=_.publisher||this._sdk.getContextPublisher(),this._dataProvider=_.dataProvider||this._sdk.getContextDataProvider(),this._eventLogger=_.eventLogger||this._sdk.getEventLogger(),this._opts=_,this._pending=0,this._failed=!1,this._finalized=!1,this._attrs=[],this._goals=[],this._exposures=[],this._overrides={},this._cassignments={},this._units={},this._assigners={},this._audienceMatcher=new s.AudienceMatcher,A.units&&this.units(A.units),(0,f.isPromise)(E)?this._promise=E.then(function(P){k._init(P),delete k._promise,k._logEvent(\"ready\",P),k.pending()>0&&k._setTimeout()}).catch(function(P){k._init({}),k._failed=!0,delete k._promise,k._logError(P)}):(this._init(E),this._logEvent(\"ready\",E))}var b,S,O;return b=x,S=[{key:\"isReady\",value:function(){return this._promise===void 0}},{key:\"isFinalizing\",value:function(){return!this._finalized&&this._finalizing!=null}},{key:\"isFinalized\",value:function(){return this._finalized}},{key:\"isFailed\",value:function(){return this._failed}},{key:\"ready\",value:function(){var w=this;return this.isReady()?Promise.resolve(!0):new Promise(function(_){var A;(A=w._promise)===null||A===void 0||A.then(function(){return _(!0)}).catch(function(E){return _(E)})})}},{key:\"pending\",value:function(){return this._pending}},{key:\"data\",value:function(){return this._checkReady(),this._data}},{key:\"eventLogger\",value:function(){return this._eventLogger}},{key:\"publisher\",value:function(){return this._publisher}},{key:\"provider\",value:function(){return this._dataProvider}},{key:\"publish\",value:function(w){var _=this;return this._checkReady(!0),new Promise(function(A,E){_._flush(function(k){k?E(k):A()},w)})}},{key:\"refresh\",value:function(w){var _=this;return this._checkReady(!0),new Promise(function(A,E){_._refresh(function(k){k?E(k):A()},w)})}},{key:\"getUnit\",value:function(w){return this._units[w]}},{key:\"unit\",value:function(w,_){switch(this._checkNotFinalized(),g(_)){case\"string\":if((_=_.trim()).length===0)throw new Error(\"Unit '\".concat(w,\"' UID must not be blank.\"));break;case\"number\":break;default:throw new Error(\"Unit '\".concat(w,\"' must be a string or a number.\"))}var A=this._units[w];if(A!==void 0&&A!==_)throw new Error(\"Unit '\".concat(w,\"' UID already set.\"));this._units[w]=_}},{key:\"getUnits\",value:function(){return this._units}},{key:\"units\",value:function(w){var _=this;Object.entries(w).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.unit(k,P)})}},{key:\"getAttribute\",value:function(w){var _;return this._attrs.forEach(function(A){A.name===w&&(_=A.value)}),_}},{key:\"attribute\",value:function(w,_){this._checkNotFinalized(),this._attrs.push({name:w,value:_,setAt:Date.now()})}},{key:\"getAttributes\",value:function(){var w={};return this._attrs.map(function(_){return[_.name,_.value]}).forEach(function(_){var A=y(_,2),E=A[0],k=A[1];w[E]=k}),w}},{key:\"attributes\",value:function(w){var _=this;Object.entries(w).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.attribute(k,P)})}},{key:\"peek\",value:function(w){return this._checkReady(!0),this._peek(w).variant}},{key:\"treatment\",value:function(w){return this._checkReady(!0),this._treatment(w).variant}},{key:\"track\",value:function(w,_){return this._checkNotFinalized(),this._track(w,_)}},{key:\"finalize\",value:function(w){return this._finalize(w)}},{key:\"experiments\",value:function(){var w;return this._checkReady(),(w=this._data.experiments)===null||w===void 0?void 0:w.map(function(_){return _.name})}},{key:\"variableValue\",value:function(w,_){return this._checkReady(!0),this._variableValue(w,_)}},{key:\"peekVariableValue\",value:function(w,_){return this._checkReady(!0),this._peekVariable(w,_)}},{key:\"variableKeys\",value:function(){this._checkReady(!0);var w={};return Object.entries(this._indexVariables).forEach(function(_){var A=y(_,2),E=A[0];A[1].forEach(function(k){w[E]?w[E].push(k.data.name):w[E]=[k.data.name]})}),w}},{key:\"override\",value:function(w,_){var A,E,k;this._overrides=Object.assign(this._overrides,(A={},k=_,(E=p(E=w))in A?Object.defineProperty(A,E,{value:k,enumerable:!0,configurable:!0,writable:!0}):A[E]=k,A))}},{key:\"overrides\",value:function(w){var _=this;Object.entries(w).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.override(k,P)})}},{key:\"customAssignment\",value:function(w,_){this._checkNotFinalized(),this._cassignments[w]=_}},{key:\"customAssignments\",value:function(w){var _=this;Object.entries(w).forEach(function(A){var E=y(A,2),k=E[0],P=E[1];_.customAssignment(k,P)})}},{key:\"_checkNotFinalized\",value:function(){if(this.isFinalized())throw new Error(\"ABSmartly Context is finalized.\");if(this.isFinalizing())throw new Error(\"ABSmartly Context is finalizing.\")}},{key:\"_checkReady\",value:function(w){if(!this.isReady())throw new Error(\"ABSmartly Context is not yet ready.\");w&&this._checkNotFinalized()}},{key:\"_assign\",value:function(w){var _=w in this._cassignments,A=w in this._overrides,E=w in this._index?this._index[w]:null;if(w in this._assignments){var k=this._assignments[w];if(A){if(k.overridden&&k.variant===this._overrides[w])return k}else if(E==null){if(!k.assigned)return k}else if((!_||this._cassignments[w]===k.variant)&&function(N,B){return N.id===B.id&&N.unitType===B.unitType&&N.iteration===B.iteration&&N.fullOnVariant===B.fullOnVariant&&(0,f.arrayEqualsShallow)(N.trafficSplit,B.trafficSplit)}(E.data,k))return k}var P={id:0,iteration:0,fullOnVariant:0,unitType:null,variant:0,overridden:!1,assigned:!1,exposed:!1,eligible:!0,fullOn:!1,custom:!1,audienceMismatch:!1};if(this._assignments[w]=P,A)E!=null&&(P.id=E.data.id,P.unitType=E.data.unitType),P.overridden=!0,P.variant=this._overrides[w];else if(E!=null){var j=E.data.unitType;if(E.data.audience&&E.data.audience.length>0){var T={};this._attrs.forEach(function(N){T[N.name]=N.value});var M=this._audienceMatcher.evaluate(E.data.audience,T);typeof M==\"boolean\"&&(P.audienceMismatch=!M)}if(E.data.audienceStrict&&P.audienceMismatch)P.variant=0;else if(E.data.fullOnVariant===0){if(j!==null&&j in this._units){var L=this._unitHash(j);if(L!==null){var R=j in this._assigners?this._assigners[j]:this._assigners[j]=new l.VariantAssigner(L),I=R.assign(E.data.trafficSplit,E.data.trafficSeedHi,E.data.trafficSeedLo)===1;P.assigned=!0,P.eligible=I,I?_?(P.variant=this._cassignments[w],P.custom=!0):P.variant=R.assign(E.data.split,E.data.seedHi,E.data.seedLo):P.variant=0}}}else P.assigned=!0,P.eligible=!0,P.variant=E.data.fullOnVariant,P.fullOn=!0;P.unitType=j,P.id=E.data.id,P.iteration=E.data.iteration,P.trafficSplit=E.data.trafficSplit,P.fullOnVariant=E.data.fullOnVariant}return E!=null&&P.variant<E.data.variants.length&&(P.variables=E.variables[P.variant]),P}},{key:\"_peek\",value:function(w){return this._assign(w)}},{key:\"_treatment\",value:function(w){var _=this._assign(w);return _.exposed||(_.exposed=!0,this._queueExposure(w,_)),_}},{key:\"_queueExposure\",value:function(w,_){var A={id:_.id,name:w,exposedAt:Date.now(),unit:_.unitType,variant:_.variant,assigned:_.assigned,eligible:_.eligible,overridden:_.overridden,fullOn:_.fullOn,custom:_.custom,audienceMismatch:_.audienceMismatch};this._logEvent(\"exposure\",A),this._exposures.push(A),this._pending++,this._setTimeout()}},{key:\"_customFieldKeys\",value:function(){var w=new Set;if(!this._data.experiments)return[];var _,A=o(this._data.experiments);try{for(A.s();!(_=A.n()).done;){var E=_.value;if(E.customFieldValues!=null){var k,P=o(E.customFieldValues);try{for(P.s();!(k=P.n()).done;){var j=k.value;w.add(j.name)}}catch(T){P.e(T)}finally{P.f()}}}}catch(T){A.e(T)}finally{A.f()}return Array.from(w)}},{key:\"customFieldKeys\",value:function(){return this._checkReady(!0),this._customFieldKeys()}},{key:\"_customFieldValue\",value:function(w,_){var A,E=this._index[w];if(E!=null){var k=(A=E.data.customFieldValues)===null||A===void 0?void 0:A.find(function(P){return P.name===_});if(k!=null)switch(k.type){case\"text\":case\"string\":return k.value;case\"number\":return Number(k.value);case\"json\":try{return k.value===\"null\"?null:k.value===\"\"?\"\":JSON.parse(k.value)}catch{return console.error(\"Failed to parse JSON custom field value '\".concat(_,\"' for experiment '\").concat(w,\"'\")),null}case\"boolean\":return k.value===\"true\";default:return console.error(\"Unknown custom field type '\".concat(k.type,\"' for experiment '\").concat(w,\"' and key '\").concat(_,\"' - you may need to upgrade to the latest SDK version\")),null}}return null}},{key:\"customFieldValue\",value:function(w,_){return this._checkReady(!0),this._customFieldValue(w,_)}},{key:\"_customFieldValueType\",value:function(w,_){var A,E=this._index[w];if(E!=null){var k=(A=E.data.customFieldValues)===null||A===void 0?void 0:A.find(function(P){return P.name===_});if(k!=null)return k.type}return null}},{key:\"customFieldValueType\",value:function(w,_){return this._checkReady(!0),this._customFieldValueType(w,_)}},{key:\"_variableValue\",value:function(w,_){for(var A in this._indexVariables[w]){var E=this._indexVariables[w][A].data.name,k=this._assign(E);if(k.variables!==void 0&&(k.exposed||(k.exposed=!0,this._queueExposure(E,k)),w in k.variables&&(k.assigned||k.overridden)))return k.variables[w]}return _}},{key:\"_peekVariable\",value:function(w,_){for(var A in this._indexVariables[w]){var E=this._indexVariables[w][A].data.name,k=this._assign(E);if(k.variables!==void 0&&w in k.variables&&(k.assigned||k.overridden))return k.variables[w]}return _}},{key:\"_validateGoal\",value:function(w,_){if(_!=null){if(!(0,f.isObject)(_))throw new Error(\"Goal '\".concat(w,\"' properties must be of type object.\"));return Object.assign({},_)}return null}},{key:\"_track\",value:function(w,_){var A={name:w,properties:this._validateGoal(w,_),achievedAt:Date.now()};this._logEvent(\"goal\",A),this._goals.push(A),this._pending++,this._setTimeout()}},{key:\"_setTimeout\",value:function(){var w=this;this.isReady()&&this._publishTimeout===void 0&&this._opts.publishDelay>=0&&(this._publishTimeout=setTimeout(function(){w._flush()},this._opts.publishDelay))}},{key:\"_flush\",value:function(w,_){var A=this;if(this._publishTimeout!==void 0&&(clearTimeout(this._publishTimeout),delete this._publishTimeout),this._pending===0)typeof w==\"function\"&&w();else{if(this._failed)typeof w==\"function\"&&w();else{var E={publishedAt:Date.now(),units:Object.entries(this._units).map(function(k){return{type:k[0],uid:A._unitHash(k[0])}}),hashed:!0};this._goals.length>0&&(E.goals=this._goals.map(function(k){return{name:k.name,achievedAt:k.achievedAt,properties:k.properties}})),this._exposures.length>0&&(E.exposures=this._exposures.map(function(k){return{id:k.id,name:k.name,unit:k.unit,exposedAt:k.exposedAt,variant:k.variant,assigned:k.assigned,eligible:k.eligible,overridden:k.overridden,fullOn:k.fullOn,custom:k.custom,audienceMismatch:k.audienceMismatch}})),this._attrs.length>0&&(E.attributes=this._attrs.map(function(k){return{name:k.name,value:k.value,setAt:k.setAt}})),this._publisher.publish(E,this._sdk,this,_).then(function(){A._logEvent(\"publish\",E),typeof w==\"function\"&&w()}).catch(function(k){A._logError(k),typeof w==\"function\"&&w(k)})}this._pending=0,this._exposures=[],this._goals=[]}}},{key:\"_refresh\",value:function(w,_){var A=this;this._failed?typeof w==\"function\"&&w():this._dataProvider.getContextData(this._sdk,_).then(function(E){A._init(E,A._assignments),A._logEvent(\"refresh\",E),typeof w==\"function\"&&w()}).catch(function(E){A._logError(E),typeof w==\"function\"&&w(E)})}},{key:\"_logEvent\",value:function(w,_){this._eventLogger&&this._eventLogger(this,w,_)}},{key:\"_logError\",value:function(w){this._eventLogger&&this._eventLogger(this,\"error\",w)}},{key:\"_unitHash\",value:function(w){if(this._hashes||(this._hashes={}),!(w in this._hashes)){var _=w in this._units?(0,f.hashUnit)(this._units[w]):null;return this._hashes[w]=_,_}return this._hashes[w]}},{key:\"_init\",value:function(w){var _=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._data=w;var E={},k={};(w.experiments||[]).forEach(function(P){var j=[],T={data:P,variables:j};E[P.name]=T,P.variants.forEach(function(M,L){var R=M.config,I=R!=null&&R.length>0?JSON.parse(R):{};Object.keys(I).forEach(function(N){var B=T;k[N]?(0,d.insertUniqueSorted)(k[N],B,function(q,F){return q.data.id<F.data.id}):k[N]=[B]}),j[L]=I})}),this._index=E,this._indexVariables=k,this._assignments=A,!this._failed&&this._opts.refreshPeriod>0&&!this._refreshInterval&&(this._refreshInterval=setInterval(function(){return _._refresh()},this._opts.refreshPeriod))}},{key:\"_finalize\",value:function(w){var _=this;return this._finalized?Promise.resolve():this._finalizing?this._finalizing:(this._refreshInterval!==void 0&&(clearInterval(this._refreshInterval),delete this._refreshInterval),this.pending()>0?(this._finalizing=new Promise(function(A,E){_._flush(function(k){_._finalizing=null,k?E(k):(_._finalized=!0,_._logEvent(\"finalize\"),A())},w)}),this._finalizing):(this._finalized=!0,this._logEvent(\"finalize\"),Promise.resolve()))}}],S&&m(b.prototype,S),O&&m(b,O),Object.defineProperty(b,\"prototype\",{writable:!1}),x}();r.default=h},2928:function(n,r,e){\"use strict\";function o(O){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(w){return typeof w}:function(w){return w&&typeof Symbol==\"function\"&&w.constructor===Symbol&&w!==Symbol.prototype?\"symbol\":typeof w},o(O)}function y(O,w){for(var _=0;_<w.length;_++){var A=w[_];A.enumerable=A.enumerable||!1,A.configurable=!0,\"value\"in A&&(A.writable=!0),Object.defineProperty(O,(E=A.key,k=void 0,k=function(P,j){if(o(P)!==\"object\"||P===null)return P;var T=P[Symbol.toPrimitive];if(T!==void 0){var M=T.call(P,j||\"default\");if(o(M)!==\"object\")return M;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(j===\"string\"?String:Number)(P)}(E,\"string\"),o(k)===\"symbol\"?k:String(k)),A)}var E,k}function a(O,w,_){return w&&y(O.prototype,w),_&&y(O,_),Object.defineProperty(O,\"prototype\",{writable:!1}),O}function c(O,w){if(!(O instanceof w))throw new TypeError(\"Cannot call a class as a function\")}function g(O,w){if(typeof w!=\"function\"&&w!==null)throw new TypeError(\"Super expression must either be null or a function\");O.prototype=Object.create(w&&w.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,\"prototype\",{writable:!1}),w&&d(O,w)}function m(O){var w=s();return function(){var _,A=h(O);if(w){var E=h(this).constructor;_=Reflect.construct(A,arguments,E)}else _=A.apply(this,arguments);return p(this,_)}}function p(O,w){if(w&&(o(w)===\"object\"||typeof w==\"function\"))return w;if(w!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(_){if(_===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return _}(O)}function f(O){var w=typeof Map==\"function\"?new Map:void 0;return f=function(_){if(_===null||(A=_,Function.toString.call(A).indexOf(\"[native code]\")===-1))return _;var A;if(typeof _!=\"function\")throw new TypeError(\"Super expression must either be null or a function\");if(w!==void 0){if(w.has(_))return w.get(_);w.set(_,E)}function E(){return l(_,arguments,h(this).constructor)}return E.prototype=Object.create(_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),d(E,_)},f(O)}function l(O,w,_){return l=s()?Reflect.construct.bind():function(A,E,k){var P=[null];P.push.apply(P,E);var j=new(Function.bind.apply(A,P));return k&&d(j,k.prototype),j},l.apply(null,arguments)}function s(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(O,w){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,A){return _.__proto__=A,_},d(O,w)}function h(O){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},h(O)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AbortError=r.RetryError=r.TimeoutError=void 0;var x=function(O){g(_,O);var w=m(_);function _(A){var E;return c(this,_),(E=w.call(this,\"Timeout exceeded.\")).name=\"TimeoutError\",E.timeout=A,E}return a(_)}(f(Error));r.TimeoutError=x;var b=function(O){g(_,O);var w=m(_);function _(A,E,k){var P;return c(this,_),(P=w.call(this,\"Retries exhausted. URL: \".concat(k,\" - Last Error: \").concat(E.message))).name=\"RetryError\",P.retries=A,P.exception=E,P}return a(_)}(f(Error));r.RetryError=b;var S=function(O){g(_,O);var w=m(_);function _(A){var E;return c(this,_),(E=w.call(this,A)).name=\"AbortError\",E}return a(_)}(f(Error));r.AbortError=S},5525:function(n,r,e){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.fetch=void 0;var o=e(2928);function y(a,c){return c=c||{},new Promise(function(g,m){var p=new XMLHttpRequest,f=[],l=[],s={},d=function(){p.abort()},h=c.signal?function(){var S;return(S=c.signal)===null||S===void 0?void 0:S.removeEventListener(\"abort\",d)}:function(){},x=function S(){return{ok:(p.status/100|0)==2,statusText:p.statusText,status:p.status,url:p.responseURL,text:function(){return Promise.resolve(p.responseText)},json:function(){return Promise.resolve(JSON.parse(p.responseText))},blob:function(){return Promise.resolve(new Blob([p.response]))},clone:S,headers:{keys:function(){return f},entries:function(){return l},get:function(O){return s[O.toLowerCase()]},has:function(O){return O.toLowerCase()in s}}}};for(var b in p.open(c.method||\"get\",a,!0),p.onload=function(){p.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(S,O,w){return f.push(O=O.toLowerCase()),l.push([O,w]),s[O]=s[O]?\"\".concat(s[O],\",\").concat(w):w,S}),h(),g(x())},c.signal&&c.signal.addEventListener(\"abort\",d),p.onerror=function(S){h(),m(S)},p.onabort=function(){h(),m(new o.AbortError(\"The user aborted a request.\"))},p.withCredentials=c.credentials===\"include\",c.headers)p.setRequestHeader(b,c.headers[b]);p.send(c.body||null)})}r.fetch=y,r.default=y},3651:function(n,r,e){\"use strict\";var o=Object.create?function(f,l,s,d){d===void 0&&(d=s);var h=Object.getOwnPropertyDescriptor(l,s);h&&!(\"get\"in h?!l.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return l[s]}}),Object.defineProperty(f,d,h)}:function(f,l,s,d){d===void 0&&(d=s),f[d]=l[s]},y=Object.create?function(f,l){Object.defineProperty(f,\"default\",{enumerable:!0,value:l})}:function(f,l){f.default=l},a=function(f){if(f&&f.__esModule)return f;var l={};if(f!=null)for(var s in f)s!==\"default\"&&Object.prototype.hasOwnProperty.call(f,s)&&o(l,f,s);return y(l,f),l},c=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(r,\"__esModule\",{value:!0});var g=e(1231),m=c(e(5525)),p=(0,g.isLongLivedApp)()?window.fetch?window.fetch.bind(window):m.default:(0,g.isWorker)()?self.fetch?self.fetch.bind(self):m.default:e.g?e.g.fetch?e.g.fetch.bind(e.g):function(f,l){return new Promise(function(s,d){Promise.resolve().then(function(){return a(e(3300))}).then(function(h){h.default(f.replace(/^\\/\\//g,\"https://\"),l).then(s).catch(d)}).catch(d)})}:void 0;r.default=p},2299:function(n,r,e){\"use strict\";function o(p){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(f){return typeof f}:function(f){return f&&typeof Symbol==\"function\"&&f.constructor===Symbol&&f!==Symbol.prototype?\"symbol\":typeof f},o(p)}function y(p,f){return function(l){if(Array.isArray(l))return l}(p)||function(l,s){var d=l==null?null:typeof Symbol<\"u\"&&l[Symbol.iterator]||l[\"@@iterator\"];if(d!=null){var h,x,b,S,O=[],w=!0,_=!1;try{if(b=(d=d.call(l)).next,s===0){if(Object(d)!==d)return;w=!1}else for(;!(w=(h=b.call(d)).done)&&(O.push(h.value),O.length!==s);w=!0);}catch(A){_=!0,x=A}finally{try{if(!w&&d.return!=null&&(S=d.return(),Object(S)!==S))return}finally{if(_)throw x}}return O}}(p,f)||function(l,s){if(l){if(typeof l==\"string\")return a(l,s);var d=Object.prototype.toString.call(l).slice(8,-1);if(d===\"Object\"&&l.constructor&&(d=l.constructor.name),d===\"Map\"||d===\"Set\")return Array.from(l);if(d===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return a(l,s)}}(p,f)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(p,f){(f==null||f>p.length)&&(f=p.length);for(var l=0,s=new Array(f);l<f;l++)s[l]=p[l];return s}function c(p,f){for(var l=0;l<f.length;l++){var s=f[l];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(p,(d=s.key,h=void 0,h=function(x,b){if(o(x)!==\"object\"||x===null)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var O=S.call(x,b||\"default\");if(o(O)!==\"object\")return O;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(b===\"string\"?String:Number)(x)}(d,\"string\"),o(h)===\"symbol\"?h:String(h)),s)}var d,h}e(9720),e(5192),e(9653),e(6977),e(6078),Object.defineProperty(r,\"__esModule\",{value:!0}),r.Evaluator=void 0;var g=e(1231),m=function(){function p(d,h){(function(x,b){if(!(x instanceof b))throw new TypeError(\"Cannot call a class as a function\")})(this,p),this.operators=d,this.vars=h}var f,l,s;return f=p,(l=[{key:\"evaluate\",value:function(d){if(Array.isArray(d))return this.operators.and.evaluate(this,d);if((0,g.isObject)(d))for(var h=0,x=Object.entries(d);h<x.length;h++){var b=y(x[h],2),S=b[0],O=b[1],w=this.operators[S];if(w!==void 0)return w.evaluate(this,O);break}return null}},{key:\"booleanConvert\",value:function(d){switch(o(d)){case\"boolean\":return d;case\"number\":return d!==0;case\"string\":return d!==\"false\"&&d!==\"0\"&&d!==\"\";default:return d!=null}}},{key:\"numberConvert\",value:function(d){switch(o(d)){case\"number\":return d;case\"boolean\":return d?1:0;case\"string\":var h=parseFloat(d);return Number.isFinite(h)?h:null;default:return null}}},{key:\"stringConvert\",value:function(d){switch(o(d)){case\"string\":return d;case\"boolean\":return d.toString();case\"number\":return d.toFixed(15).replace(/\\.?0{0,15}$/,\"\");default:return null}}},{key:\"extractVar\",value:function(d){for(var h,x=d.split(\"/\"),b=(h=this.vars)!==null&&h!==void 0?h:{},S=0;S<x.length;++S){var O=b[x[S]];if(O===void 0)return null;b=O}return b}},{key:\"compare\",value:function(d,h){if(d===null)return h===null?0:null;if(h===null)return null;switch(o(d)){case\"number\":var x=this.numberConvert(h);if(x!==null)return d===x?0:d>x?1:-1;break;case\"string\":var b=this.stringConvert(h);if(b!==null)return d===b?0:d>b?1:-1;break;case\"boolean\":var S=this.booleanConvert(h);if(S!=null)return d===S?0:d>S?1:-1;break;default:if((0,g.isEqualsDeep)(d,h))return 0}return null}}])&&c(f.prototype,l),s&&c(f,s),Object.defineProperty(f,\"prototype\",{writable:!1}),p}();r.Evaluator=m},8728:function(n,r,e){\"use strict\";function o(A){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(E){return typeof E}:function(E){return E&&typeof Symbol==\"function\"&&E.constructor===Symbol&&E!==Symbol.prototype?\"symbol\":typeof E},o(A)}function y(A,E){for(var k=0;k<E.length;k++){var P=E[k];P.enumerable=P.enumerable||!1,P.configurable=!0,\"value\"in P&&(P.writable=!0),Object.defineProperty(A,(j=P.key,T=void 0,T=function(M,L){if(o(M)!==\"object\"||M===null)return M;var R=M[Symbol.toPrimitive];if(R!==void 0){var I=R.call(M,L||\"default\");if(o(I)!==\"object\")return I;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(L===\"string\"?String:Number)(M)}(j,\"string\"),o(T)===\"symbol\"?T:String(T)),P)}var j,T}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.JsonExpr=void 0;var a=e(9771),c=e(4652),g=e(6197),m=e(640),p=e(3251),f=e(8588),l=e(1501),s=e(9083),d=e(2299),h=e(4228),x=e(2682),b=e(4325),S=e(9188),O=e(8095),w={and:new c.AndCombinator,or:new g.OrCombinator,value:new a.ValueOperator,var:new m.VarOperator,null:new f.NullOperator,not:new p.NotOperator,in:new s.InOperator,match:new l.MatchOperator,eq:new h.EqualsOperator,gt:new x.GreaterThanOperator,gte:new b.GreaterThanOrEqualOperator,lt:new S.LessThanOperator,lte:new O.LessThanOrEqualOperator},_=function(){function A(){(function(j,T){if(!(j instanceof T))throw new TypeError(\"Cannot call a class as a function\")})(this,A)}var E,k,P;return E=A,(k=[{key:\"evaluateBooleanExpr\",value:function(j,T){var M=new d.Evaluator(w,T);return M.booleanConvert(M.evaluate(j))}},{key:\"evaluateExpr\",value:function(j,T){return new d.Evaluator(w,T).evaluate(j)}}])&&y(E.prototype,k),P&&y(E,P),Object.defineProperty(E,\"prototype\",{writable:!1}),A}();r.JsonExpr=_},4652:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(p){return typeof p}:function(p){return p&&typeof Symbol==\"function\"&&p.constructor===Symbol&&p!==Symbol.prototype?\"symbol\":typeof p},o(m)}function y(m,p){var f=typeof Symbol<\"u\"&&m[Symbol.iterator]||m[\"@@iterator\"];if(!f){if(Array.isArray(m)||(f=function(b,S){if(b){if(typeof b==\"string\")return a(b,S);var O=Object.prototype.toString.call(b).slice(8,-1);if(O===\"Object\"&&b.constructor&&(O=b.constructor.name),O===\"Map\"||O===\"Set\")return Array.from(b);if(O===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return a(b,S)}}(m))||p&&m&&typeof m.length==\"number\"){f&&(m=f);var l=0,s=function(){};return{s,n:function(){return l>=m.length?{done:!0}:{done:!1,value:m[l++]}},e:function(b){throw b},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,h=!0,x=!1;return{s:function(){f=f.call(m)},n:function(){var b=f.next();return h=b.done,b},e:function(b){x=!0,d=b},f:function(){try{h||f.return==null||f.return()}finally{if(x)throw d}}}}function a(m,p){(p==null||p>m.length)&&(p=m.length);for(var f=0,l=new Array(p);f<p;f++)l[f]=m[f];return l}function c(m,p){for(var f=0;f<p.length;f++){var l=p[f];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,d=void 0,d=function(h,x){if(o(h)!==\"object\"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var S=b.call(h,x||\"default\");if(o(S)!==\"object\")return S;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(h)}(s,\"string\"),o(d)===\"symbol\"?d:String(d)),l)}var s,d}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AndCombinator=void 0;var g=function(){function m(){(function(s,d){if(!(s instanceof d))throw new TypeError(\"Cannot call a class as a function\")})(this,m)}var p,f,l;return p=m,(f=[{key:\"evaluate\",value:function(s,d){if(Array.isArray(d)){var h,x=y(d);try{for(x.s();!(h=x.n()).done;){var b=h.value;if(!s.booleanConvert(s.evaluate(b)))return!1}}catch(S){x.e(S)}finally{x.f()}return!0}return null}}])&&c(p.prototype,f),l&&c(p,l),Object.defineProperty(p,\"prototype\",{writable:!1}),m}();r.AndCombinator=g},4915:function(n,r,e){\"use strict\";function o(c){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(c)}function y(c,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,\"value\"in p&&(p.writable=!0),Object.defineProperty(c,(f=p.key,l=void 0,l=function(s,d){if(o(s)!==\"object\"||s===null)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var x=h.call(s,d||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(d===\"string\"?String:Number)(s)}(f,\"string\"),o(l)===\"symbol\"?l:String(l)),p)}var f,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.BinaryOperator=void 0;var a=function(){function c(){(function(f,l){if(!(f instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,c)}var g,m,p;return g=c,(m=[{key:\"evaluate\",value:function(f,l){if(Array.isArray(l)){var s=l.length>0?f.evaluate(l[0]):null;if(s!==null){var d=l.length>1?f.evaluate(l[1]):null;if(d!==null)return this.binary(f,s,d)}}return null}}])&&y(g.prototype,m),p&&y(g,p),Object.defineProperty(g,\"prototype\",{writable:!1}),c}();r.BinaryOperator=a},4228:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.EqualsOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){var _=S.compare(O,w);return _!==null?_===0:null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.EqualsOperator=f},2682:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.GreaterThanOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){var _=S.compare(O,w);return _!==null?_>0:null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.GreaterThanOperator=f},4325:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.GreaterThanOrEqualOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){var _=S.compare(O,w);return _!==null?_>=0:null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.GreaterThanOrEqualOperator=f},9083:function(n,r,e){\"use strict\";function o(x){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(b){return typeof b}:function(b){return b&&typeof Symbol==\"function\"&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b},o(x)}function y(x,b){var S=typeof Symbol<\"u\"&&x[Symbol.iterator]||x[\"@@iterator\"];if(!S){if(Array.isArray(x)||(S=function(k,P){if(k){if(typeof k==\"string\")return a(k,P);var j=Object.prototype.toString.call(k).slice(8,-1);if(j===\"Object\"&&k.constructor&&(j=k.constructor.name),j===\"Map\"||j===\"Set\")return Array.from(k);if(j===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return a(k,P)}}(x))||b&&x&&typeof x.length==\"number\"){S&&(x=S);var O=0,w=function(){};return{s:w,n:function(){return O>=x.length?{done:!0}:{done:!1,value:x[O++]}},e:function(k){throw k},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,A=!0,E=!1;return{s:function(){S=S.call(x)},n:function(){var k=S.next();return A=k.done,k},e:function(k){E=!0,_=k},f:function(){try{A||S.return==null||S.return()}finally{if(E)throw _}}}}function a(x,b){(b==null||b>x.length)&&(b=x.length);for(var S=0,O=new Array(b);S<b;S++)O[S]=x[S];return O}function c(x,b){if(!(x instanceof b))throw new TypeError(\"Cannot call a class as a function\")}function g(x,b){for(var S=0;S<b.length;S++){var O=b[S];O.enumerable=O.enumerable||!1,O.configurable=!0,\"value\"in O&&(O.writable=!0),Object.defineProperty(x,(w=O.key,_=void 0,_=function(A,E){if(o(A)!==\"object\"||A===null)return A;var k=A[Symbol.toPrimitive];if(k!==void 0){var P=k.call(A,E||\"default\");if(o(P)!==\"object\")return P;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(E===\"string\"?String:Number)(A)}(w,\"string\"),o(_)===\"symbol\"?_:String(_)),O)}var w,_}function m(x,b){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},m(x,b)}function p(x){var b=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var S,O=l(x);if(b){var w=l(this).constructor;S=Reflect.construct(O,arguments,w)}else S=O.apply(this,arguments);return f(this,S)}}function f(x,b){if(b&&(o(b)===\"object\"||typeof b==\"function\"))return b;if(b!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(S){if(S===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return S}(x)}function l(x){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},l(x)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.InOperator=void 0;var s=e(4915),d=e(1231),h=function(x){(function(A,E){if(typeof E!=\"function\"&&E!==null)throw new TypeError(\"Super expression must either be null or a function\");A.prototype=Object.create(E&&E.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,\"prototype\",{writable:!1}),E&&m(A,E)})(_,x);var b,S,O,w=p(_);function _(){return c(this,_),w.apply(this,arguments)}return b=_,(S=[{key:\"binary\",value:function(A,E,k){if(Array.isArray(E)){var P,j=y(E);try{for(j.s();!(P=j.n()).done;){var T=P.value;if(A.compare(T,k)===0)return!0}}catch(R){j.e(R)}finally{j.f()}return!1}if(typeof E==\"string\"){var M=A.stringConvert(k);return M!==null&&E.includes(M)}if((0,d.isObject)(E)){var L=A.stringConvert(k);return L!=null&&Object.prototype.hasOwnProperty.call(E,L)}return null}}])&&g(b.prototype,S),O&&g(b,O),Object.defineProperty(b,\"prototype\",{writable:!1}),_}(s.BinaryOperator);r.InOperator=h},9188:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.LessThanOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){var _=S.compare(O,w);return _!==null?_<0:null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.LessThanOperator=f},8095:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.LessThanOrEqualOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){var _=S.compare(O,w);return _!==null?_<=0:null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.LessThanOrEqualOperator=f},1501:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.MatchOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"binary\",value:function(S,O,w){if((O=S.stringConvert(O))!==null&&(w=S.stringConvert(w))!==null)try{return new RegExp(w).test(O)}catch{return null}return null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(4915).BinaryOperator);r.MatchOperator=f},3251:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.NotOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"unary\",value:function(S,O){return!S.booleanConvert(O)}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(7262).UnaryOperator);r.NotOperator=f},8588:function(n,r,e){\"use strict\";function o(l){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(s){return typeof s}:function(s){return s&&typeof Symbol==\"function\"&&s.constructor===Symbol&&s!==Symbol.prototype?\"symbol\":typeof s},o(l)}function y(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")}function a(l,s){for(var d=0;d<s.length;d++){var h=s[d];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h&&(h.writable=!0),Object.defineProperty(l,(x=h.key,b=void 0,b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\"),o(b)===\"symbol\"?b:String(b)),h)}var x,b}function c(l,s){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},c(l,s)}function g(l){var s=function(){if(typeof Reflect>\"u\"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy==\"function\")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,h=p(l);if(s){var x=p(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return m(this,d)}}function m(l,s){if(s&&(o(s)===\"object\"||typeof s==\"function\"))return s;if(s!==void 0)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(d){if(d===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return d}(l)}function p(l){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(l)}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.NullOperator=void 0;var f=function(l){(function(S,O){if(typeof O!=\"function\"&&O!==null)throw new TypeError(\"Super expression must either be null or a function\");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,\"prototype\",{writable:!1}),O&&c(S,O)})(b,l);var s,d,h,x=g(b);function b(){return y(this,b),x.apply(this,arguments)}return s=b,(d=[{key:\"unary\",value:function(S,O){return O===null}}])&&a(s.prototype,d),h&&a(s,h),Object.defineProperty(s,\"prototype\",{writable:!1}),b}(e(7262).UnaryOperator);r.NullOperator=f},6197:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(p){return typeof p}:function(p){return p&&typeof Symbol==\"function\"&&p.constructor===Symbol&&p!==Symbol.prototype?\"symbol\":typeof p},o(m)}function y(m,p){var f=typeof Symbol<\"u\"&&m[Symbol.iterator]||m[\"@@iterator\"];if(!f){if(Array.isArray(m)||(f=function(b,S){if(b){if(typeof b==\"string\")return a(b,S);var O=Object.prototype.toString.call(b).slice(8,-1);if(O===\"Object\"&&b.constructor&&(O=b.constructor.name),O===\"Map\"||O===\"Set\")return Array.from(b);if(O===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return a(b,S)}}(m))||p&&m&&typeof m.length==\"number\"){f&&(m=f);var l=0,s=function(){};return{s,n:function(){return l>=m.length?{done:!0}:{done:!1,value:m[l++]}},e:function(b){throw b},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,h=!0,x=!1;return{s:function(){f=f.call(m)},n:function(){var b=f.next();return h=b.done,b},e:function(b){x=!0,d=b},f:function(){try{h||f.return==null||f.return()}finally{if(x)throw d}}}}function a(m,p){(p==null||p>m.length)&&(p=m.length);for(var f=0,l=new Array(p);f<p;f++)l[f]=m[f];return l}function c(m,p){for(var f=0;f<p.length;f++){var l=p[f];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,d=void 0,d=function(h,x){if(o(h)!==\"object\"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var S=b.call(h,x||\"default\");if(o(S)!==\"object\")return S;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(h)}(s,\"string\"),o(d)===\"symbol\"?d:String(d)),l)}var s,d}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.OrCombinator=void 0;var g=function(){function m(){(function(s,d){if(!(s instanceof d))throw new TypeError(\"Cannot call a class as a function\")})(this,m)}var p,f,l;return p=m,(f=[{key:\"evaluate\",value:function(s,d){if(Array.isArray(d)){var h,x=y(d);try{for(x.s();!(h=x.n()).done;){var b=h.value;if(s.booleanConvert(s.evaluate(b)))return!0}}catch(S){x.e(S)}finally{x.f()}return d.length===0}return null}}])&&c(p.prototype,f),l&&c(p,l),Object.defineProperty(p,\"prototype\",{writable:!1}),m}();r.OrCombinator=g},7262:function(n,r,e){\"use strict\";function o(c){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(c)}function y(c,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,\"value\"in p&&(p.writable=!0),Object.defineProperty(c,(f=p.key,l=void 0,l=function(s,d){if(o(s)!==\"object\"||s===null)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var x=h.call(s,d||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(d===\"string\"?String:Number)(s)}(f,\"string\"),o(l)===\"symbol\"?l:String(l)),p)}var f,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.UnaryOperator=void 0;var a=function(){function c(){(function(f,l){if(!(f instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,c)}var g,m,p;return g=c,(m=[{key:\"evaluate\",value:function(f,l){return l=f.evaluate(l),this.unary(f,l)}}])&&y(g.prototype,m),p&&y(g,p),Object.defineProperty(g,\"prototype\",{writable:!1}),c}();r.UnaryOperator=a},9771:function(n,r,e){\"use strict\";function o(c){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(c)}function y(c,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,\"value\"in p&&(p.writable=!0),Object.defineProperty(c,(f=p.key,l=void 0,l=function(s,d){if(o(s)!==\"object\"||s===null)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var x=h.call(s,d||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(d===\"string\"?String:Number)(s)}(f,\"string\"),o(l)===\"symbol\"?l:String(l)),p)}var f,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ValueOperator=void 0;var a=function(){function c(){(function(f,l){if(!(f instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,c)}var g,m,p;return g=c,(m=[{key:\"evaluate\",value:function(f,l){return l}}])&&y(g.prototype,m),p&&y(g,p),Object.defineProperty(g,\"prototype\",{writable:!1}),c}();r.ValueOperator=a},640:function(n,r,e){\"use strict\";function o(g){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(m){return typeof m}:function(m){return m&&typeof Symbol==\"function\"&&m.constructor===Symbol&&m!==Symbol.prototype?\"symbol\":typeof m},o(g)}function y(g,m){for(var p=0;p<m.length;p++){var f=m[p];f.enumerable=f.enumerable||!1,f.configurable=!0,\"value\"in f&&(f.writable=!0),Object.defineProperty(g,(l=f.key,s=void 0,s=function(d,h){if(o(d)!==\"object\"||d===null)return d;var x=d[Symbol.toPrimitive];if(x!==void 0){var b=x.call(d,h||\"default\");if(o(b)!==\"object\")return b;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(h===\"string\"?String:Number)(d)}(l,\"string\"),o(s)===\"symbol\"?s:String(s)),f)}var l,s}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.VarOperator=void 0;var a=e(1231),c=function(){function g(){(function(l,s){if(!(l instanceof s))throw new TypeError(\"Cannot call a class as a function\")})(this,g)}var m,p,f;return m=g,(p=[{key:\"evaluate\",value:function(l,s){return(0,a.isObject)(s)&&(s=s.path),typeof s==\"string\"?l.extractVar(s):null}}])&&y(m.prototype,p),f&&y(m,f),Object.defineProperty(m,\"prototype\",{writable:!1}),g}();r.VarOperator=c},7682:function(n,r,e){\"use strict\";function o(m){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(p){return typeof p}:function(p){return p&&typeof Symbol==\"function\"&&p.constructor===Symbol&&p!==Symbol.prototype?\"symbol\":typeof p},o(m)}function y(m,p){for(var f=0;f<p.length;f++){var l=p[f];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(m,(s=l.key,d=void 0,d=function(h,x){if(o(h)!==\"object\"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var S=b.call(h,x||\"default\");if(o(S)!==\"object\")return S;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(x===\"string\"?String:Number)(h)}(s,\"string\"),o(d)===\"symbol\"?d:String(d)),l)}var s,d}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.AudienceMatcher=void 0;var a=e(1231),c=e(8728),g=function(){function m(){(function(s,d){if(!(s instanceof d))throw new TypeError(\"Cannot call a class as a function\")})(this,m),this._jsonExpr=new c.JsonExpr}var p,f,l;return p=m,(f=[{key:\"evaluate\",value:function(s,d){try{var h=JSON.parse(s);if(h&&h.filter&&(Array.isArray(h.filter)||(0,a.isObject)(h.filter)))return this._jsonExpr.evaluateBooleanExpr(h.filter,d)}catch(x){console.error(x)}return null}}])&&y(p.prototype,f),l&&y(p,l),Object.defineProperty(p,\"prototype\",{writable:!1}),m}();r.AudienceMatcher=g},4703:function(n,r,e){\"use strict\";function o(p,f,l,s,d,h){return((f=f+p+(s>>>0)+h)<<d|f>>>32-d)+l}function y(p,f,l,s,d,h,x){return o(f&l|~f&s,p,f,d,h,x)}function a(p,f,l,s,d,h,x){return o(f&s|l&~s,p,f,d,h,x)}function c(p,f,l,s,d,h,x){return o(f^l^s,p,f,d,h,x)}function g(p,f,l,s,d,h,x){return o(l^(f|~s),p,f,d,h,x)}function m(p,f){var l=p[0],s=p[1],d=p[2],h=p[3];l=y(l,s,d,h,f[0],7,-680876936),h=y(h,l,s,d,f[1],12,-389564586),d=y(d,h,l,s,f[2],17,606105819),s=y(s,d,h,l,f[3],22,-1044525330),l=y(l,s,d,h,f[4],7,-176418897),h=y(h,l,s,d,f[5],12,1200080426),d=y(d,h,l,s,f[6],17,-1473231341),s=y(s,d,h,l,f[7],22,-45705983),l=y(l,s,d,h,f[8],7,1770035416),h=y(h,l,s,d,f[9],12,-1958414417),d=y(d,h,l,s,f[10],17,-42063),s=y(s,d,h,l,f[11],22,-1990404162),l=y(l,s,d,h,f[12],7,1804603682),h=y(h,l,s,d,f[13],12,-40341101),d=y(d,h,l,s,f[14],17,-1502002290),l=a(l,s=y(s,d,h,l,f[15],22,1236535329),d,h,f[1],5,-165796510),h=a(h,l,s,d,f[6],9,-1069501632),d=a(d,h,l,s,f[11],14,643717713),s=a(s,d,h,l,f[0],20,-373897302),l=a(l,s,d,h,f[5],5,-701558691),h=a(h,l,s,d,f[10],9,38016083),d=a(d,h,l,s,f[15],14,-660478335),s=a(s,d,h,l,f[4],20,-405537848),l=a(l,s,d,h,f[9],5,568446438),h=a(h,l,s,d,f[14],9,-1019803690),d=a(d,h,l,s,f[3],14,-187363961),s=a(s,d,h,l,f[8],20,1163531501),l=a(l,s,d,h,f[13],5,-1444681467),h=a(h,l,s,d,f[2],9,-51403784),d=a(d,h,l,s,f[7],14,1735328473),l=c(l,s=a(s,d,h,l,f[12],20,-1926607734),d,h,f[5],4,-378558),h=c(h,l,s,d,f[8],11,-2022574463),d=c(d,h,l,s,f[11],16,1839030562),s=c(s,d,h,l,f[14],23,-35309556),l=c(l,s,d,h,f[1],4,-1530992060),h=c(h,l,s,d,f[4],11,1272893353),d=c(d,h,l,s,f[7],16,-155497632),s=c(s,d,h,l,f[10],23,-1094730640),l=c(l,s,d,h,f[13],4,681279174),h=c(h,l,s,d,f[0],11,-358537222),d=c(d,h,l,s,f[3],16,-722521979),s=c(s,d,h,l,f[6],23,76029189),l=c(l,s,d,h,f[9],4,-640364487),h=c(h,l,s,d,f[12],11,-421815835),d=c(d,h,l,s,f[15],16,530742520),l=g(l,s=c(s,d,h,l,f[2],23,-995338651),d,h,f[0],6,-198630844),h=g(h,l,s,d,f[7],10,1126891415),d=g(d,h,l,s,f[14],15,-1416354905),s=g(s,d,h,l,f[5],21,-57434055),l=g(l,s,d,h,f[12],6,1700485571),h=g(h,l,s,d,f[3],10,-1894986606),d=g(d,h,l,s,f[10],15,-1051523),s=g(s,d,h,l,f[1],21,-2054922799),l=g(l,s,d,h,f[8],6,1873313359),h=g(h,l,s,d,f[15],10,-30611744),d=g(d,h,l,s,f[6],15,-1560198380),s=g(s,d,h,l,f[13],21,1309151649),l=g(l,s,d,h,f[4],6,-145523070),h=g(h,l,s,d,f[11],10,-1120210379),d=g(d,h,l,s,f[2],15,718787259),s=g(s,d,h,l,f[9],21,-343485551),p[0]=l+p[0]>>>0,p[1]=s+p[1]>>>0,p[2]=d+p[2]>>>0,p[3]=h+p[3]>>>0}e(5206),Object.defineProperty(r,\"__esModule\",{value:!0}),r.md5=void 0,r.md5=function(p){var f,l=new DataView(p),s=l.byteLength,d=-64&s,h=new Uint32Array(16),x=Uint32Array.of(1732584193,-271733879,-1732584194,271733878);for(f=0;f<d;f+=64){for(var b=0;b<16;++b)h[b]=l.getUint32(f+(b<<2),!0);m(x,h)}for(var S=0,O=-4&s;f<O;f+=4)h[S++]=l.getUint32(f,!0);switch(3&s){case 3:h[S++]=2147483648|l.getUint8(f)|l.getUint8(f+1)<<8|l.getUint8(f+2)<<16;break;case 2:h[S++]=8388608|l.getUint8(f)|l.getUint8(f+1)<<8;break;case 1:h[S++]=32768|l.getUint8(f);break;default:h[S++]=128}if(S>14){for(;S<16;++S)h[S]=0;m(x,h),S=0}for(;S<16;++S)h[S]=0;return h[14]=s<<3,m(x,h),new Uint8Array(x.buffer)}},7433:function(n,r,e){\"use strict\";e(332),Object.defineProperty(r,\"__esModule\",{value:!0}),r.murmur3_32=void 0;var o=Math.imul;function y(c,g){return c<<g|c>>>32-g}function a(c){return o(y(o(c,3432918353),15),461845907)}r.murmur3_32=function(c,g){g=(g||0)>>>0;var m,p=new DataView(c),f=-4&p.byteLength;for(m=0;m<f;m+=4)g=y(g^=a(p.getUint32(m,!0)),13),g=o(g,5)+3864292196;var l,s=0;switch(3&p.byteLength){case 3:s^=p.getUint8(m+2)<<16;case 2:s^=p.getUint8(m+1)<<8;case 1:g^=a(s^=p.getUint8(m))}return g^=p.byteLength,l=g,l=o(l^=l>>>16,2246822507),l=o(l^=l>>>13,3266489909),(g=(l^=l>>>16)>>>0)>>>0}},9003:function(n,r,e){\"use strict\";function o(c){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(c)}function y(c,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,\"value\"in p&&(p.writable=!0),Object.defineProperty(c,(f=p.key,l=void 0,l=function(s,d){if(o(s)!==\"object\"||s===null)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var x=h.call(s,d||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(d===\"string\"?String:Number)(s)}(f,\"string\"),o(l)===\"symbol\"?l:String(l)),p)}var f,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ContextDataProvider=void 0;var a=function(){function c(){(function(f,l){if(!(f instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,c)}var g,m,p;return g=c,(m=[{key:\"getContextData\",value:function(f,l){return f.getClient().getContext(l)}}])&&y(g.prototype,m),p&&y(g,p),Object.defineProperty(g,\"prototype\",{writable:!1}),c}();r.ContextDataProvider=a},9949:function(n,r,e){\"use strict\";function o(c){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(g){return typeof g}:function(g){return g&&typeof Symbol==\"function\"&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},o(c)}function y(c,g){for(var m=0;m<g.length;m++){var p=g[m];p.enumerable=p.enumerable||!1,p.configurable=!0,\"value\"in p&&(p.writable=!0),Object.defineProperty(c,(f=p.key,l=void 0,l=function(s,d){if(o(s)!==\"object\"||s===null)return s;var h=s[Symbol.toPrimitive];if(h!==void 0){var x=h.call(s,d||\"default\");if(o(x)!==\"object\")return x;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(d===\"string\"?String:Number)(s)}(f,\"string\"),o(l)===\"symbol\"?l:String(l)),p)}var f,l}e(6078),e(9653),Object.defineProperty(r,\"__esModule\",{value:!0}),r.ContextPublisher=void 0;var a=function(){function c(){(function(f,l){if(!(f instanceof l))throw new TypeError(\"Cannot call a class as a function\")})(this,c)}var g,m,p;return g=c,(m=[{key:\"publish\",value:function(f,l,s,d){return l.getClient().publish(f,d)}}])&&y(g.prototype,m),p&&y(g,p),Object.defineProperty(g,\"prototype\",{writable:!1}),c}();r.ContextPublisher=a},153:function(n,r,e){\"use strict\";function o(x){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(b){return typeof b}:function(b){return b&&typeof Symbol==\"function\"&&b.constructor===Symbol&&b!==Symbol.prototype?\"symbol\":typeof b},o(x)}function y(x){return function(b){if(Array.isArray(b))return a(b)}(x)||function(b){if(typeof Symbol<\"u\"&&b[Symbol.iterator]!=null||b[\"@@iterator\"]!=null)return Array.from(b)}(x)||function(b,S){if(b){if(typeof b==\"string\")return a(b,S);var O=Object.prototype.toString.call(b).slice(8,-1);if(O===\"Object\"&&b.constructor&&(O=b.constructor.name),O===\"Map\"||O===\"Set\")return Array.from(b);if(O===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return a(b,S)}}(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(x,b){(b==null||b>x.length)&&(b=x.length);for(var S=0,O=new Array(b);S<b;S++)O[S]=x[S];return O}function c(x,b){for(var S=0;S<b.length;S++){var O=b[S];O.enumerable=O.enumerable||!1,O.configurable=!0,\"value\"in O&&(O.writable=!0),Object.defineProperty(x,g(O.key),O)}}function g(x){var b=function(S,O){if(o(S)!==\"object\"||S===null)return S;var w=S[Symbol.toPrimitive];if(w!==void 0){var _=w.call(S,O||\"default\");if(o(_)!==\"object\")return _;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(O===\"string\"?String:Number)(S)}(x,\"string\");return o(b)===\"symbol\"?b:String(b)}e(9601),e(9720),e(6078),e(9653);var m=function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(r,\"__esModule\",{value:!0});var p=m(e(7578)),f=m(e(7621)),l=e(9949),s=e(9003),d=e(1231),h=function(){function x(w){(function(A,E){if(!(A instanceof E))throw new TypeError(\"Cannot call a class as a function\")})(this,x);var _=Object.assign.apply(Object,[{agent:\"absmartly-javascript-sdk\"}].concat(y(Object.entries(w||{}).filter(function(A){return[\"application\",\"agent\",\"apiKey\",\"endpoint\",\"keepalive\",\"environment\",\"retries\",\"timeout\"].indexOf(A[0])!==-1}).map(function(A){return E={},k=A[0],P=A[1],(k=g(k))in E?Object.defineProperty(E,k,{value:P,enumerable:!0,configurable:!0,writable:!0}):E[k]=P,E;var E,k,P}))));w=Object.assign({},w),this._client=w.client||new p.default(_),this._eventLogger=w.eventLogger||x.defaultEventLogger,this._publisher=w.publisher||new l.ContextPublisher,this._provider=w.provider||new s.ContextDataProvider}var b,S,O;return b=x,O=[{key:\"_contextOptions\",value:function(w){return Object.assign({publishDelay:(0,d.isLongLivedApp)()?100:-1,refreshPeriod:0},w||{})}},{key:\"_validateParams\",value:function(w){Object.entries(w.units).forEach(function(_){var A=o(_[1]);if(A!==\"string\"&&A!==\"number\")throw new Error(\"Unit '\".concat(_[0],\"' UID is of unsupported type '\").concat(A,\"'. UID must be one of ['string', 'number']\"));if(typeof _[1]==\"string\"&&_[1].length===0)throw new Error(\"Unit '\".concat(_[0],\"' UID length must be >= 1\"))})}}],(S=[{key:\"getContextData\",value:function(w){return this._provider.getContextData(this,w)}},{key:\"createContext\",value:function(w,_,A){x._validateParams(w);var E=x._contextOptions(_),k=this._provider.getContextData(this,A);return new f.default(this,E,w,k)}},{key:\"setEventLogger\",value:function(w){this._eventLogger=w}},{key:\"getEventLogger\",value:function(){return this._eventLogger}},{key:\"setContextPublisher\",value:function(w){this._publisher=w}},{key:\"getContextPublisher\",value:function(){return this._publisher}},{key:\"setContextDataProvider\",value:function(w){this._provider=w}},{key:\"getContextDataProvider\",value:function(){return this._provider}},{key:\"getClient\",value:function(){return this._client}},{key:\"createContextWith\",value:function(w,_,A){x._validateParams(w);var E=x._contextOptions(A);return new f.default(this,E,w,_)}}])&&c(b.prototype,S),O&&c(b,O),Object.defineProperty(b,\"prototype\",{writable:!1}),x}();r.default=h,h.defaultEventLogger=function(x,b,S){b===\"error\"&&console.error(S)}},1231:function(n,r,e){\"use strict\";function o(p){return o=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?function(f){return typeof f}:function(f){return f&&typeof Symbol==\"function\"&&f.constructor===Symbol&&f!==Symbol.prototype?\"symbol\":typeof f},o(p)}e(4048),e(9653),e(8145),e(6977),Object.defineProperty(r,\"__esModule\",{value:!0}),r.chooseVariant=r.hashUnit=r.base64UrlNoPadding=r.stringToUint8Array=r.arrayEqualsShallow=r.isEqualsDeep=r.isPromise=r.isObject=r.isNumeric=r.isWorker=r.isLongLivedApp=r.getApplicationVersion=r.getApplicationName=void 0;var y=e(4703);r.getApplicationName=function(p){return typeof p!=\"string\"?p.name:p};function a(p){if(!(p instanceof Object))return!1;var f=Object.getPrototypeOf(p);return f==null||f===Object.prototype}function c(p,f,l,s){if(p===f)return!0;if(o(p)!==o(f))return!1;switch(o(p)){case\"boolean\":case\"string\":return p===f;case\"number\":return Number.isNaN(p)?Number.isNaN(f):p===f;case\"object\":var d=Array.isArray(p);if(d&&!Array.isArray(f))return!1;var h=a(p);if(h&&!a(f)||!d&&!h)return!1;if(d&&Array.isArray(f)){if(p.length===f.length)return function(b,S){for(var O,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],A=(O=w?.length)!==null&&O!==void 0?O:0;A--;)if(w[A]===b)return _[A]===S;for(_=_??[],(w=w??[]).push(b),_.push(S),A=b.length;A--;)if(!c(b[A],S[A],w,_))return!1;return _.pop(),w.pop(),!0}(p,f,l,s)}else if(p&&f){var x=Object.keys(p);if(x.length===Object.keys(f).length)return function(b,S,O,w,_){for(var A,E=(A=w?.length)!==null&&A!==void 0?A:0;E--;)if(w&&w[E]===b)return _&&_[E]===S;for(_=_??[],(w=w??[]).push(b),_.push(S),E=O.length;E--;){var k=O[E];if(!Object.prototype.hasOwnProperty.call(S,k)||!c(b[k],S[k],w,_))return!1}return _.pop(),w.pop(),!0}(p,f,x,l,s)}}return!1}function g(p){for(var f=p.length,l=new Array(p.length),s=0,d=0;d<f;++d){var h=p.charCodeAt(d);h<128?l[s++]=h:h<2048?(l[s++]=h>>6|192,l[s++]=63&h|128):(l[s++]=h>>12|224,l[s++]=h>>6&63|128,l[s++]=63&h|128)}return Uint8Array.from(l)}r.getApplicationVersion=function(p){return typeof p!=\"string\"?p.version:0},r.isLongLivedApp=function(){return typeof window<\"u\"&&window.document!==void 0||typeof navigator<\"u\"&&navigator.product===\"ReactNative\"},r.isWorker=function(){return(typeof self>\"u\"?\"undefined\":o(self))===\"object\"&&self.constructor&&self.constructor.name===\"DedicatedWorkerGlobalScope\"},r.isNumeric=function(p){return typeof p==\"number\"},r.isObject=a,r.isPromise=function(p){return p!==null&&o(p)===\"object\"&&typeof p.then==\"function\"},r.isEqualsDeep=c,r.arrayEqualsShallow=function(p,f){return p===f||p?.length===f?.length&&!p?.some(function(l,s){return f&&l!==f[s]})},r.stringToUint8Array=g;function m(p){var f,l=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\",s=p.byteLength%3,d=4*(p.byteLength/3|0)+(s===0?0:s===1?2:3),h=new Array(d),x=0,b=p.byteLength-s;for(f=0;f<b;f+=3){var S=p[f]<<16|p[f+1]<<8|p[f+2];h[x]=l[S>>18&63],h[x+1]=l[S>>12&63],h[x+2]=l[S>>6&63],h[x+3]=l[63&S],x+=4}switch(s){case 2:var O=p[f]<<16|p[f+1]<<8;h[x]=l[O>>18&63],h[x+1]=l[O>>12&63],h[x+2]=l[O>>6&63];break;case 1:var w=p[f]<<16;h[x]=l[w>>18&63],h[x+1]=l[w>>12&63]}return h.join(\"\")}r.base64UrlNoPadding=m,r.hashUnit=function(p){var f=typeof p==\"string\"?p:p.toFixed(0);return m((0,y.md5)(g(f).buffer))},r.chooseVariant=function(p,f){for(var l=0,s=0;s<p.length;++s)if(f<(l+=p[s]))return s;return p.length-1}},9662:function(n,r,e){var o=e(614),y=e(6330),a=TypeError;n.exports=function(c){if(o(c))return c;throw a(y(c)+\" is not a function\")}},9483:function(n,r,e){var o=e(4411),y=e(6330),a=TypeError;n.exports=function(c){if(o(c))return c;throw a(y(c)+\" is not a constructor\")}},6077:function(n,r,e){var o=e(614),y=String,a=TypeError;n.exports=function(c){if(typeof c==\"object\"||o(c))return c;throw a(\"Can't set \"+y(c)+\" as a prototype\")}},1223:function(n,r,e){var o=e(5112),y=e(30),a=e(3070).f,c=o(\"unscopables\"),g=Array.prototype;g[c]==null&&a(g,c,{configurable:!0,value:y(null)}),n.exports=function(m){g[c][m]=!0}},9670:function(n,r,e){var o=e(111),y=String,a=TypeError;n.exports=function(c){if(o(c))return c;throw a(y(c)+\" is not an object\")}},3013:function(n){n.exports=typeof ArrayBuffer<\"u\"&&typeof DataView<\"u\"},260:function(n,r,e){\"use strict\";var o,y,a,c=e(3013),g=e(9781),m=e(7854),p=e(614),f=e(111),l=e(2597),s=e(648),d=e(6330),h=e(8880),x=e(8052),b=e(3070).f,S=e(7976),O=e(9518),w=e(7674),_=e(5112),A=e(9711),E=e(9909),k=E.enforce,P=E.get,j=m.Int8Array,T=j&&j.prototype,M=m.Uint8ClampedArray,L=M&&M.prototype,R=j&&O(j),I=T&&O(T),N=Object.prototype,B=m.TypeError,q=_(\"toStringTag\"),F=A(\"TYPED_ARRAY_TAG\"),D=\"TypedArrayConstructor\",W=c&&!!w&&s(m.opera)!==\"Opera\",G=!1,H={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Y={BigInt64Array:8,BigUint64Array:8},ue=function(U){var V=O(U);if(f(V)){var K=P(V);return K&&l(K,D)?K[D]:ue(V)}},$=function(U){if(!f(U))return!1;var V=s(U);return l(H,V)||l(Y,V)};for(o in H)(a=(y=m[o])&&y.prototype)?k(a)[D]=y:W=!1;for(o in Y)(a=(y=m[o])&&y.prototype)&&(k(a)[D]=y);if((!W||!p(R)||R===Function.prototype)&&(R=function(){throw B(\"Incorrect invocation\")},W))for(o in H)m[o]&&w(m[o],R);if((!W||!I||I===N)&&(I=R.prototype,W))for(o in H)m[o]&&w(m[o].prototype,I);if(W&&O(L)!==I&&w(L,I),g&&!l(I,q))for(o in G=!0,b(I,q,{get:function(){return f(this)?this[F]:void 0}}),H)m[o]&&h(m[o],F,o);n.exports={NATIVE_ARRAY_BUFFER_VIEWS:W,TYPED_ARRAY_TAG:G&&F,aTypedArray:function(U){if($(U))return U;throw B(\"Target is not a typed array\")},aTypedArrayConstructor:function(U){if(p(U)&&(!w||S(R,U)))return U;throw B(d(U)+\" is not a typed array constructor\")},exportTypedArrayMethod:function(U,V,K,Z){if(g){if(K)for(var X in H){var J=m[X];if(J&&l(J.prototype,U))try{delete J.prototype[U]}catch{try{J.prototype[U]=V}catch{}}}I[U]&&!K||x(I,U,K?V:W&&T[U]||V,Z)}},exportTypedArrayStaticMethod:function(U,V,K){var Z,X;if(g){if(w){if(K){for(Z in H)if((X=m[Z])&&l(X,U))try{delete X[U]}catch{}}if(R[U]&&!K)return;try{return x(R,U,K?V:W&&R[U]||V)}catch{}}for(Z in H)!(X=m[Z])||X[U]&&!K||x(X,U,V)}},getTypedArrayConstructor:ue,isView:function(U){if(!f(U))return!1;var V=s(U);return V===\"DataView\"||l(H,V)||l(Y,V)},isTypedArray:$,TypedArray:R,TypedArrayPrototype:I}},1318:function(n,r,e){var o=e(5656),y=e(1400),a=e(6244),c=function(g){return function(m,p,f){var l,s=o(m),d=a(s),h=y(f,d);if(g&&p!=p){for(;d>h;)if((l=s[h++])!=l)return!0}else for(;d>h;h++)if((g||h in s)&&s[h]===p)return g||h||0;return!g&&-1}};n.exports={includes:c(!0),indexOf:c(!1)}},2092:function(n,r,e){var o=e(9974),y=e(1702),a=e(8361),c=e(7908),g=e(6244),m=e(5417),p=y([].push),f=function(l){var s=l==1,d=l==2,h=l==3,x=l==4,b=l==6,S=l==7,O=l==5||b;return function(w,_,A,E){for(var k,P,j=c(w),T=a(j),M=o(_,A),L=g(T),R=0,I=E||m,N=s?I(w,L):d||S?I(w,0):void 0;L>R;R++)if((O||R in T)&&(P=M(k=T[R],R,j),l))if(s)N[R]=P;else if(P)switch(l){case 3:return!0;case 5:return k;case 6:return R;case 2:p(N,k)}else switch(l){case 4:return!1;case 7:p(N,k)}return b?-1:h||x?x:N}};n.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},7475:function(n,r,e){var o=e(3157),y=e(4411),a=e(111),c=e(5112)(\"species\"),g=Array;n.exports=function(m){var p;return o(m)&&(p=m.constructor,(y(p)&&(p===g||o(p.prototype))||a(p)&&(p=p[c])===null)&&(p=void 0)),p===void 0?g:p}},5417:function(n,r,e){var o=e(7475);n.exports=function(y,a){return new(o(y))(a===0?0:a)}},7072:function(n,r,e){var o=e(5112)(\"iterator\"),y=!1;try{var a=0,c={next:function(){return{done:!!a++}},return:function(){y=!0}};c[o]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(g,m){if(!m&&!y)return!1;var p=!1;try{var f={};f[o]=function(){return{next:function(){return{done:p=!0}}}},g(f)}catch{}return p}},4326:function(n,r,e){var o=e(1702),y=o({}.toString),a=o(\"\".slice);n.exports=function(c){return a(y(c),8,-1)}},648:function(n,r,e){var o=e(1694),y=e(614),a=e(4326),c=e(5112)(\"toStringTag\"),g=Object,m=a(function(){return arguments}())==\"Arguments\";n.exports=o?a:function(p){var f,l,s;return p===void 0?\"Undefined\":p===null?\"Null\":typeof(l=function(d,h){try{return d[h]}catch{}}(f=g(p),c))==\"string\"?l:m?a(f):(s=a(f))==\"Object\"&&y(f.callee)?\"Arguments\":s}},9920:function(n,r,e){var o=e(2597),y=e(3887),a=e(1236),c=e(3070);n.exports=function(g,m,p){for(var f=y(m),l=c.f,s=a.f,d=0;d<f.length;d++){var h=f[d];o(g,h)||p&&o(p,h)||l(g,h,s(m,h))}}},8544:function(n,r,e){var o=e(7293);n.exports=!o(function(){function y(){}return y.prototype.constructor=null,Object.getPrototypeOf(new y)!==y.prototype})},8880:function(n,r,e){var o=e(9781),y=e(3070),a=e(9114);n.exports=o?function(c,g,m){return y.f(c,g,a(1,m))}:function(c,g,m){return c[g]=m,c}},9114:function(n){n.exports=function(r,e){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:e}}},8709:function(n,r,e){\"use strict\";var o=e(9670),y=e(2140),a=TypeError;n.exports=function(c){if(o(this),c===\"string\"||c===\"default\")c=\"string\";else if(c!==\"number\")throw a(\"Incorrect hint\");return y(this,c)}},8052:function(n,r,e){var o=e(614),y=e(3070),a=e(6339),c=e(3072);n.exports=function(g,m,p,f){f||(f={});var l=f.enumerable,s=f.name!==void 0?f.name:m;if(o(p)&&a(p,s,f),f.global)l?g[m]=p:c(m,p);else{try{f.unsafe?g[m]&&(l=!0):delete g[m]}catch{}l?g[m]=p:y.f(g,m,{value:p,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return g}},3072:function(n,r,e){var o=e(7854),y=Object.defineProperty;n.exports=function(a,c){try{y(o,a,{value:c,configurable:!0,writable:!0})}catch{o[a]=c}return c}},9781:function(n,r,e){var o=e(7293);n.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},4154:function(n){var r=typeof document==\"object\"&&document.all,e=r===void 0&&r!==void 0;n.exports={all:r,IS_HTMLDDA:e}},317:function(n,r,e){var o=e(7854),y=e(111),a=o.document,c=y(a)&&y(a.createElement);n.exports=function(g){return c?a.createElement(g):{}}},8113:function(n,r,e){var o=e(5005);n.exports=o(\"navigator\",\"userAgent\")||\"\"},7392:function(n,r,e){var o,y,a=e(7854),c=e(8113),g=a.process,m=a.Deno,p=g&&g.versions||m&&m.version,f=p&&p.v8;f&&(y=(o=f.split(\".\"))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!y&&c&&(!(o=c.match(/Edge\\/(\\d+)/))||o[1]>=74)&&(o=c.match(/Chrome\\/(\\d+)/))&&(y=+o[1]),n.exports=y},748:function(n){n.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},2109:function(n,r,e){var o=e(7854),y=e(1236).f,a=e(8880),c=e(8052),g=e(3072),m=e(9920),p=e(4705);n.exports=function(f,l){var s,d,h,x,b,S=f.target,O=f.global,w=f.stat;if(s=O?o:w?o[S]||g(S,{}):(o[S]||{}).prototype)for(d in l){if(x=l[d],h=f.dontCallGetSet?(b=y(s,d))&&b.value:s[d],!p(O?d:S+(w?\".\":\"#\")+d,f.forced)&&h!==void 0){if(typeof x==typeof h)continue;m(x,h)}(f.sham||h&&h.sham)&&a(x,\"sham\",!0),c(s,d,x,f)}}},7293:function(n){n.exports=function(r){try{return!!r()}catch{return!0}}},9974:function(n,r,e){var o=e(1470),y=e(9662),a=e(4374),c=o(o.bind);n.exports=function(g,m){return y(g),m===void 0?g:a?c(g,m):function(){return g.apply(m,arguments)}}},4374:function(n,r,e){var o=e(7293);n.exports=!o(function(){var y=function(){}.bind();return typeof y!=\"function\"||y.hasOwnProperty(\"prototype\")})},6916:function(n,r,e){var o=e(4374),y=Function.prototype.call;n.exports=o?y.bind(y):function(){return y.apply(y,arguments)}},6530:function(n,r,e){var o=e(9781),y=e(2597),a=Function.prototype,c=o&&Object.getOwnPropertyDescriptor,g=y(a,\"name\"),m=g&&function(){}.name===\"something\",p=g&&(!o||o&&c(a,\"name\").configurable);n.exports={EXISTS:g,PROPER:m,CONFIGURABLE:p}},1470:function(n,r,e){var o=e(4326),y=e(1702);n.exports=function(a){if(o(a)===\"Function\")return y(a)}},1702:function(n,r,e){var o=e(4374),y=Function.prototype,a=y.call,c=o&&y.bind.bind(a,a);n.exports=o?c:function(g){return function(){return a.apply(g,arguments)}}},5005:function(n,r,e){var o=e(7854),y=e(614),a=function(c){return y(c)?c:void 0};n.exports=function(c,g){return arguments.length<2?a(o[c]):o[c]&&o[c][g]}},1246:function(n,r,e){var o=e(648),y=e(8173),a=e(8554),c=e(7497),g=e(5112)(\"iterator\");n.exports=function(m){if(!a(m))return y(m,g)||y(m,\"@@iterator\")||c[o(m)]}},4121:function(n,r,e){var o=e(6916),y=e(9662),a=e(9670),c=e(6330),g=e(1246),m=TypeError;n.exports=function(p,f){var l=arguments.length<2?g(p):f;if(y(l))return a(o(l,p));throw m(c(p)+\" is not iterable\")}},8173:function(n,r,e){var o=e(9662),y=e(8554);n.exports=function(a,c){var g=a[c];return y(g)?void 0:o(g)}},7854:function(n,r,e){var o=function(y){return y&&y.Math==Math&&y};n.exports=o(typeof globalThis==\"object\"&&globalThis)||o(typeof window==\"object\"&&window)||o(typeof self==\"object\"&&self)||o(typeof e.g==\"object\"&&e.g)||function(){return this}()||Function(\"return this\")()},2597:function(n,r,e){var o=e(1702),y=e(7908),a=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(c,g){return a(y(c),g)}},3501:function(n){n.exports={}},490:function(n,r,e){var o=e(5005);n.exports=o(\"document\",\"documentElement\")},4664:function(n,r,e){var o=e(9781),y=e(7293),a=e(317);n.exports=!o&&!y(function(){return Object.defineProperty(a(\"div\"),\"a\",{get:function(){return 7}}).a!=7})},8361:function(n,r,e){var o=e(1702),y=e(7293),a=e(4326),c=Object,g=o(\"\".split);n.exports=y(function(){return!c(\"z\").propertyIsEnumerable(0)})?function(m){return a(m)==\"String\"?g(m,\"\"):c(m)}:c},9587:function(n,r,e){var o=e(614),y=e(111),a=e(7674);n.exports=function(c,g,m){var p,f;return a&&o(p=g.constructor)&&p!==m&&y(f=p.prototype)&&f!==m.prototype&&a(c,f),c}},2788:function(n,r,e){var o=e(1702),y=e(614),a=e(5465),c=o(Function.toString);y(a.inspectSource)||(a.inspectSource=function(g){return c(g)}),n.exports=a.inspectSource},9909:function(n,r,e){var o,y,a,c=e(4811),g=e(7854),m=e(111),p=e(8880),f=e(2597),l=e(5465),s=e(6200),d=e(3501),h=\"Object already initialized\",x=g.TypeError,b=g.WeakMap;if(c||l.state){var S=l.state||(l.state=new b);S.get=S.get,S.has=S.has,S.set=S.set,o=function(w,_){if(S.has(w))throw x(h);return _.facade=w,S.set(w,_),_},y=function(w){return S.get(w)||{}},a=function(w){return S.has(w)}}else{var O=s(\"state\");d[O]=!0,o=function(w,_){if(f(w,O))throw x(h);return _.facade=w,p(w,O,_),_},y=function(w){return f(w,O)?w[O]:{}},a=function(w){return f(w,O)}}n.exports={set:o,get:y,has:a,enforce:function(w){return a(w)?y(w):o(w,{})},getterFor:function(w){return function(_){var A;if(!m(_)||(A=y(_)).type!==w)throw x(\"Incompatible receiver, \"+w+\" required\");return A}}}},7659:function(n,r,e){var o=e(5112),y=e(7497),a=o(\"iterator\"),c=Array.prototype;n.exports=function(g){return g!==void 0&&(y.Array===g||c[a]===g)}},3157:function(n,r,e){var o=e(4326);n.exports=Array.isArray||function(y){return o(y)==\"Array\"}},4067:function(n,r,e){var o=e(648),y=e(1702)(\"\".slice);n.exports=function(a){return y(o(a),0,3)===\"Big\"}},614:function(n,r,e){var o=e(4154),y=o.all;n.exports=o.IS_HTMLDDA?function(a){return typeof a==\"function\"||a===y}:function(a){return typeof a==\"function\"}},4411:function(n,r,e){var o=e(1702),y=e(7293),a=e(614),c=e(648),g=e(5005),m=e(2788),p=function(){},f=[],l=g(\"Reflect\",\"construct\"),s=/^\\s*(?:class|function)\\b/,d=o(s.exec),h=!s.exec(p),x=function(S){if(!a(S))return!1;try{return l(p,f,S),!0}catch{return!1}},b=function(S){if(!a(S))return!1;switch(c(S)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}try{return h||!!d(s,m(S))}catch{return!0}};b.sham=!0,n.exports=!l||y(function(){var S;return x(x.call)||!x(Object)||!x(function(){S=!0})||S})?b:x},4705:function(n,r,e){var o=e(7293),y=e(614),a=/#|\\.prototype\\./,c=function(l,s){var d=m[g(l)];return d==f||d!=p&&(y(s)?o(s):!!s)},g=c.normalize=function(l){return String(l).replace(a,\".\").toLowerCase()},m=c.data={},p=c.NATIVE=\"N\",f=c.POLYFILL=\"P\";n.exports=c},8554:function(n){n.exports=function(r){return r==null}},111:function(n,r,e){var o=e(614),y=e(4154),a=y.all;n.exports=y.IS_HTMLDDA?function(c){return typeof c==\"object\"?c!==null:o(c)||c===a}:function(c){return typeof c==\"object\"?c!==null:o(c)}},1913:function(n){n.exports=!1},2190:function(n,r,e){var o=e(5005),y=e(614),a=e(7976),c=e(3307),g=Object;n.exports=c?function(m){return typeof m==\"symbol\"}:function(m){var p=o(\"Symbol\");return y(p)&&a(p.prototype,g(m))}},7497:function(n){n.exports={}},6244:function(n,r,e){var o=e(7466);n.exports=function(y){return o(y.length)}},6339:function(n,r,e){var o=e(7293),y=e(614),a=e(2597),c=e(9781),g=e(6530).CONFIGURABLE,m=e(2788),p=e(9909),f=p.enforce,l=p.get,s=Object.defineProperty,d=c&&!o(function(){return s(function(){},\"length\",{value:8}).length!==8}),h=String(String).split(\"String\"),x=n.exports=function(b,S,O){String(S).slice(0,7)===\"Symbol(\"&&(S=\"[\"+String(S).replace(/^Symbol\\(([^)]*)\\)/,\"$1\")+\"]\"),O&&O.getter&&(S=\"get \"+S),O&&O.setter&&(S=\"set \"+S),(!a(b,\"name\")||g&&b.name!==S)&&(c?s(b,\"name\",{value:S,configurable:!0}):b.name=S),d&&O&&a(O,\"arity\")&&b.length!==O.arity&&s(b,\"length\",{value:O.arity});try{O&&a(O,\"constructor\")&&O.constructor?c&&s(b,\"prototype\",{writable:!1}):b.prototype&&(b.prototype=void 0)}catch{}var w=f(b);return a(w,\"source\")||(w.source=h.join(typeof S==\"string\"?S:\"\")),b};Function.prototype.toString=x(function(){return y(this)&&l(this).source||m(this)},\"toString\")},4758:function(n){var r=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(o){var y=+o;return(y>0?e:r)(y)}},7023:function(n,r,e){var o=e(7854).isFinite;n.exports=Number.isFinite||function(y){return typeof y==\"number\"&&o(y)}},1574:function(n,r,e){\"use strict\";var o=e(9781),y=e(1702),a=e(6916),c=e(7293),g=e(1956),m=e(5181),p=e(5296),f=e(7908),l=e(8361),s=Object.assign,d=Object.defineProperty,h=y([].concat);n.exports=!s||c(function(){if(o&&s({b:1},s(d({},\"a\",{enumerable:!0,get:function(){d(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var x={},b={},S=Symbol(),O=\"abcdefghijklmnopqrst\";return x[S]=7,O.split(\"\").forEach(function(w){b[w]=w}),s({},x)[S]!=7||g(s({},b)).join(\"\")!=O})?function(x,b){for(var S=f(x),O=arguments.length,w=1,_=m.f,A=p.f;O>w;)for(var E,k=l(arguments[w++]),P=_?h(g(k),_(k)):g(k),j=P.length,T=0;j>T;)E=P[T++],o&&!a(A,k,E)||(S[E]=k[E]);return S}:s},30:function(n,r,e){var o,y=e(9670),a=e(6048),c=e(748),g=e(3501),m=e(490),p=e(317),f=e(6200),l=\"prototype\",s=\"script\",d=f(\"IE_PROTO\"),h=function(){},x=function(O){return\"<\"+s+\">\"+O+\"</\"+s+\">\"},b=function(O){O.write(x(\"\")),O.close();var w=O.parentWindow.Object;return O=null,w},S=function(){try{o=new ActiveXObject(\"htmlfile\")}catch{}var O,w,_;S=typeof document<\"u\"?document.domain&&o?b(o):(w=p(\"iframe\"),_=\"java\"+s+\":\",w.style.display=\"none\",m.appendChild(w),w.src=String(_),(O=w.contentWindow.document).open(),O.write(x(\"document.F=Object\")),O.close(),O.F):b(o);for(var A=c.length;A--;)delete S[l][c[A]];return S()};g[d]=!0,n.exports=Object.create||function(O,w){var _;return O!==null?(h[l]=y(O),_=new h,h[l]=null,_[d]=O):_=S(),w===void 0?_:a.f(_,w)}},6048:function(n,r,e){var o=e(9781),y=e(3353),a=e(3070),c=e(9670),g=e(5656),m=e(1956);r.f=o&&!y?Object.defineProperties:function(p,f){c(p);for(var l,s=g(f),d=m(f),h=d.length,x=0;h>x;)a.f(p,l=d[x++],s[l]);return p}},3070:function(n,r,e){var o=e(9781),y=e(4664),a=e(3353),c=e(9670),g=e(4948),m=TypeError,p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l=\"enumerable\",s=\"configurable\",d=\"writable\";r.f=o?a?function(h,x,b){if(c(h),x=g(x),c(b),typeof h==\"function\"&&x===\"prototype\"&&\"value\"in b&&d in b&&!b[d]){var S=f(h,x);S&&S[d]&&(h[x]=b.value,b={configurable:s in b?b[s]:S[s],enumerable:l in b?b[l]:S[l],writable:!1})}return p(h,x,b)}:p:function(h,x,b){if(c(h),x=g(x),c(b),y)try{return p(h,x,b)}catch{}if(\"get\"in b||\"set\"in b)throw m(\"Accessors not supported\");return\"value\"in b&&(h[x]=b.value),h}},1236:function(n,r,e){var o=e(9781),y=e(6916),a=e(5296),c=e(9114),g=e(5656),m=e(4948),p=e(2597),f=e(4664),l=Object.getOwnPropertyDescriptor;r.f=o?l:function(s,d){if(s=g(s),d=m(d),f)try{return l(s,d)}catch{}if(p(s,d))return c(!y(a.f,s,d),s[d])}},8006:function(n,r,e){var o=e(6324),y=e(748).concat(\"length\",\"prototype\");r.f=Object.getOwnPropertyNames||function(a){return o(a,y)}},5181:function(n,r){r.f=Object.getOwnPropertySymbols},9518:function(n,r,e){var o=e(2597),y=e(614),a=e(7908),c=e(6200),g=e(8544),m=c(\"IE_PROTO\"),p=Object,f=p.prototype;n.exports=g?p.getPrototypeOf:function(l){var s=a(l);if(o(s,m))return s[m];var d=s.constructor;return y(d)&&s instanceof d?d.prototype:s instanceof p?f:null}},7976:function(n,r,e){var o=e(1702);n.exports=o({}.isPrototypeOf)},6324:function(n,r,e){var o=e(1702),y=e(2597),a=e(5656),c=e(1318).indexOf,g=e(3501),m=o([].push);n.exports=function(p,f){var l,s=a(p),d=0,h=[];for(l in s)!y(g,l)&&y(s,l)&&m(h,l);for(;f.length>d;)y(s,l=f[d++])&&(~c(h,l)||m(h,l));return h}},1956:function(n,r,e){var o=e(6324),y=e(748);n.exports=Object.keys||function(a){return o(a,y)}},5296:function(n,r){\"use strict\";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,y=o&&!e.call({1:2},1);r.f=y?function(a){var c=o(this,a);return!!c&&c.enumerable}:e},7674:function(n,r,e){var o=e(1702),y=e(9670),a=e(6077);n.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var c,g=!1,m={};try{(c=o(Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set))(m,[]),g=m instanceof Array}catch{}return function(p,f){return y(p),a(f),g?c(p,f):p.__proto__=f,p}}():void 0)},4699:function(n,r,e){var o=e(9781),y=e(1702),a=e(1956),c=e(5656),g=y(e(5296).f),m=y([].push),p=function(f){return function(l){for(var s,d=c(l),h=a(d),x=h.length,b=0,S=[];x>b;)s=h[b++],o&&!g(d,s)||m(S,f?[s,d[s]]:d[s]);return S}};n.exports={entries:p(!0),values:p(!1)}},2140:function(n,r,e){var o=e(6916),y=e(614),a=e(111),c=TypeError;n.exports=function(g,m){var p,f;if(m===\"string\"&&y(p=g.toString)&&!a(f=o(p,g))||y(p=g.valueOf)&&!a(f=o(p,g))||m!==\"string\"&&y(p=g.toString)&&!a(f=o(p,g)))return f;throw c(\"Can't convert object to primitive value\")}},3887:function(n,r,e){var o=e(5005),y=e(1702),a=e(8006),c=e(5181),g=e(9670),m=y([].concat);n.exports=o(\"Reflect\",\"ownKeys\")||function(p){var f=a.f(g(p)),l=c.f;return l?m(f,l(p)):f}},857:function(n,r,e){var o=e(7854);n.exports=o},4488:function(n,r,e){var o=e(8554),y=TypeError;n.exports=function(a){if(o(a))throw y(\"Can't call method on \"+a);return a}},6200:function(n,r,e){var o=e(2309),y=e(9711),a=o(\"keys\");n.exports=function(c){return a[c]||(a[c]=y(c))}},5465:function(n,r,e){var o=e(7854),y=e(3072),a=\"__core-js_shared__\",c=o[a]||y(a,{});n.exports=c},2309:function(n,r,e){var o=e(1913),y=e(5465);(n.exports=function(a,c){return y[a]||(y[a]=c!==void 0?c:{})})(\"versions\",[]).push({version:\"3.27.1\",mode:o?\"pure\":\"global\",copyright:\"\\xA9 2014-2022 Denis Pushkarev (zloirock.ru)\",license:\"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE\",source:\"https://github.com/zloirock/core-js\"})},8415:function(n,r,e){\"use strict\";var o=e(9303),y=e(1340),a=e(4488),c=RangeError;n.exports=function(g){var m=y(a(this)),p=\"\",f=o(g);if(f<0||f==1/0)throw c(\"Wrong number of repetitions\");for(;f>0;(f>>>=1)&&(m+=m))1&f&&(p+=m);return p}},3111:function(n,r,e){var o=e(1702),y=e(4488),a=e(1340),c=e(1361),g=o(\"\".replace),m=\"[\"+c+\"]\",p=RegExp(\"^\"+m+m+\"*\"),f=RegExp(m+m+\"*$\"),l=function(s){return function(d){var h=a(y(d));return 1&s&&(h=g(h,p,\"\")),2&s&&(h=g(h,f,\"\")),h}};n.exports={start:l(1),end:l(2),trim:l(3)}},6293:function(n,r,e){var o=e(7392),y=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!y(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&o&&o<41})},863:function(n,r,e){var o=e(1702);n.exports=o(1 .valueOf)},1400:function(n,r,e){var o=e(9303),y=Math.max,a=Math.min;n.exports=function(c,g){var m=o(c);return m<0?y(m+g,0):a(m,g)}},4599:function(n,r,e){var o=e(7593),y=TypeError;n.exports=function(a){var c=o(a,\"number\");if(typeof c==\"number\")throw y(\"Can't convert number to bigint\");return BigInt(c)}},5656:function(n,r,e){var o=e(8361),y=e(4488);n.exports=function(a){return o(y(a))}},9303:function(n,r,e){var o=e(4758);n.exports=function(y){var a=+y;return a!=a||a===0?0:o(a)}},7466:function(n,r,e){var o=e(9303),y=Math.min;n.exports=function(a){return a>0?y(o(a),9007199254740991):0}},7908:function(n,r,e){var o=e(4488),y=Object;n.exports=function(a){return y(o(a))}},7593:function(n,r,e){var o=e(6916),y=e(111),a=e(2190),c=e(8173),g=e(2140),m=e(5112),p=TypeError,f=m(\"toPrimitive\");n.exports=function(l,s){if(!y(l)||a(l))return l;var d,h=c(l,f);if(h){if(s===void 0&&(s=\"default\"),d=o(h,l,s),!y(d)||a(d))return d;throw p(\"Can't convert object to primitive value\")}return s===void 0&&(s=\"number\"),g(l,s)}},4948:function(n,r,e){var o=e(7593),y=e(2190);n.exports=function(a){var c=o(a,\"string\");return y(c)?c:c+\"\"}},1694:function(n,r,e){var o={};o[e(5112)(\"toStringTag\")]=\"z\",n.exports=String(o)===\"[object z]\"},1340:function(n,r,e){var o=e(648),y=String;n.exports=function(a){if(o(a)===\"Symbol\")throw TypeError(\"Cannot convert a Symbol value to a string\");return y(a)}},6330:function(n){var r=String;n.exports=function(e){try{return r(e)}catch{return\"Object\"}}},3832:function(n,r,e){var o=e(7854),y=e(7293),a=e(7072),c=e(260).NATIVE_ARRAY_BUFFER_VIEWS,g=o.ArrayBuffer,m=o.Int8Array;n.exports=!c||!y(function(){m(1)})||!y(function(){new m(-1)})||!a(function(p){new m,new m(null),new m(1.5),new m(p)},!0)||y(function(){return new m(new g(2),1,void 0).length!==1})},7321:function(n,r,e){var o=e(9974),y=e(6916),a=e(9483),c=e(7908),g=e(6244),m=e(4121),p=e(1246),f=e(7659),l=e(4067),s=e(260).aTypedArrayConstructor,d=e(4599);n.exports=function(h){var x,b,S,O,w,_,A,E,k=a(this),P=c(h),j=arguments.length,T=j>1?arguments[1]:void 0,M=T!==void 0,L=p(P);if(L&&!f(L))for(E=(A=m(P,L)).next,P=[];!(_=y(E,A)).done;)P.push(_.value);for(M&&j>2&&(T=o(T,arguments[2])),b=g(P),S=new(s(k))(b),O=l(S),x=0;b>x;x++)w=M?T(P[x],x):P[x],S[x]=O?d(w):+w;return S}},9711:function(n,r,e){var o=e(1702),y=0,a=Math.random(),c=o(1 .toString);n.exports=function(g){return\"Symbol(\"+(g===void 0?\"\":g)+\")_\"+c(++y+a,36)}},3307:function(n,r,e){var o=e(6293);n.exports=o&&!Symbol.sham&&typeof Symbol.iterator==\"symbol\"},3353:function(n,r,e){var o=e(9781),y=e(7293);n.exports=o&&y(function(){return Object.defineProperty(function(){},\"prototype\",{value:42,writable:!1}).prototype!=42})},4811:function(n,r,e){var o=e(7854),y=e(614),a=o.WeakMap;n.exports=y(a)&&/native code/.test(String(a))},5112:function(n,r,e){var o=e(7854),y=e(2309),a=e(2597),c=e(9711),g=e(6293),m=e(3307),p=y(\"wks\"),f=o.Symbol,l=f&&f.for,s=m?f:f&&f.withoutSetter||c;n.exports=function(d){if(!a(p,d)||!g&&typeof p[d]!=\"string\"){var h=\"Symbol.\"+d;g&&a(f,d)?p[d]=f[d]:p[d]=m&&l?l(h):s(h)}return p[d]}},1361:function(n){n.exports=`\t\n\\v\\f\\r \\xA0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF`},9826:function(n,r,e){\"use strict\";var o=e(2109),y=e(2092).find,a=e(1223),c=\"find\",g=!0;c in[]&&Array(1)[c](function(){g=!1}),o({target:\"Array\",proto:!0,forced:g},{find:function(m){return y(this,m,arguments.length>1?arguments[1]:void 0)}}),a(c)},6078:function(n,r,e){var o=e(2597),y=e(8052),a=e(8709),c=e(5112)(\"toPrimitive\"),g=Date.prototype;o(g,c)||y(g,c,a)},332:function(n,r,e){var o=e(2109),y=e(7293),a=Math.imul;o({target:\"Math\",stat:!0,forced:y(function(){return a(4294967295,5)!=-5||a.length!=2})},{imul:function(c,g){var m=65535,p=+c,f=+g,l=m&p,s=m&f;return 0|l*s+((m&p>>>16)*s+l*(m&f>>>16)<<16>>>0)}})},9653:function(n,r,e){\"use strict\";var o=e(2109),y=e(1913),a=e(9781),c=e(7854),g=e(857),m=e(1702),p=e(4705),f=e(2597),l=e(9587),s=e(7976),d=e(2190),h=e(7593),x=e(7293),b=e(8006).f,S=e(1236).f,O=e(3070).f,w=e(863),_=e(3111).trim,A=\"Number\",E=c[A],k=g[A],P=E.prototype,j=c.TypeError,T=m(\"\".slice),M=m(\"\".charCodeAt),L=function(F){var D=h(F,\"number\");return typeof D==\"bigint\"?D:R(D)},R=function(F){var D,W,G,H,Y,ue,$,U,V=h(F,\"number\");if(d(V))throw j(\"Cannot convert a Symbol value to a number\");if(typeof V==\"string\"&&V.length>2){if(V=_(V),(D=M(V,0))===43||D===45){if((W=M(V,2))===88||W===120)return NaN}else if(D===48){switch(M(V,1)){case 66:case 98:G=2,H=49;break;case 79:case 111:G=8,H=55;break;default:return+V}for(ue=(Y=T(V,2)).length,$=0;$<ue;$++)if((U=M(Y,$))<48||U>H)return NaN;return parseInt(Y,G)}}return+V},I=p(A,!E(\" 0o1\")||!E(\"0b1\")||E(\"+0x1\")),N=function(F){return s(P,F)&&x(function(){w(F)})},B=function(F){var D=arguments.length<1?0:E(L(F));return N(this)?l(Object(D),this,B):D};B.prototype=P,I&&!y&&(P.constructor=B),o({global:!0,constructor:!0,wrap:!0,forced:I},{Number:B});var q=function(F,D){for(var W,G=a?b(D):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range\".split(\",\"),H=0;G.length>H;H++)f(D,W=G[H])&&!f(F,W)&&O(F,W,S(D,W))};y&&k&&q(g[A],k),(I||y)&&q(g[A],E)},5192:function(n,r,e){e(2109)({target:\"Number\",stat:!0},{isFinite:e(7023)})},4048:function(n,r,e){e(2109)({target:\"Number\",stat:!0},{isNaN:function(o){return o!=o}})},6977:function(n,r,e){\"use strict\";var o=e(2109),y=e(1702),a=e(9303),c=e(863),g=e(8415),m=e(7293),p=RangeError,f=String,l=Math.floor,s=y(g),d=y(\"\".slice),h=y(1 .toFixed),x=function(w,_,A){return _===0?A:_%2==1?x(w,_-1,A*w):x(w*w,_/2,A)},b=function(w,_,A){for(var E=-1,k=A;++E<6;)k+=_*w[E],w[E]=k%1e7,k=l(k/1e7)},S=function(w,_){for(var A=6,E=0;--A>=0;)E+=w[A],w[A]=l(E/_),E=E%_*1e7},O=function(w){for(var _=6,A=\"\";--_>=0;)if(A!==\"\"||_===0||w[_]!==0){var E=f(w[_]);A=A===\"\"?E:A+s(\"0\",7-E.length)+E}return A};o({target:\"Number\",proto:!0,forced:m(function(){return h(8e-5,3)!==\"0.000\"||h(.9,0)!==\"1\"||h(1.255,2)!==\"1.25\"||h(0xde0b6b3a7640080,0)!==\"1000000000000000128\"})||!m(function(){h({})})},{toFixed:function(w){var _,A,E,k,P=c(this),j=a(w),T=[0,0,0,0,0,0],M=\"\",L=\"0\";if(j<0||j>20)throw p(\"Incorrect fraction digits\");if(P!=P)return\"NaN\";if(P<=-1e21||P>=1e21)return f(P);if(P<0&&(M=\"-\",P=-P),P>1e-21)if(A=(_=function(R){for(var I=0,N=R;N>=4096;)I+=12,N/=4096;for(;N>=2;)I+=1,N/=2;return I}(P*x(2,69,1))-69)<0?P*x(2,-_,1):P/x(2,_,1),A*=4503599627370496,(_=52-_)>0){for(b(T,0,A),E=j;E>=7;)b(T,1e7,0),E-=7;for(b(T,x(10,E,1),0),E=_-1;E>=23;)S(T,8388608),E-=23;S(T,1<<E),b(T,1,1),S(T,2),L=O(T)}else b(T,0,A),b(T,1<<-_,0),L=O(T)+s(\"0\",j);return L=j>0?M+((k=L.length)<=j?\"0.\"+s(\"0\",j-k)+L:d(L,0,k-j)+\".\"+d(L,k-j)):M+L}})},9601:function(n,r,e){var o=e(2109),y=e(1574);o({target:\"Object\",stat:!0,arity:2,forced:Object.assign!==y},{assign:y})},9720:function(n,r,e){var o=e(2109),y=e(4699).entries;o({target:\"Object\",stat:!0},{entries:function(a){return y(a)}})},8145:function(n,r,e){\"use strict\";var o=e(3832);(0,e(260).exportTypedArrayStaticMethod)(\"from\",e(7321),o)},5206:function(n,r,e){\"use strict\";var o=e(260),y=e(3832),a=o.aTypedArrayConstructor;(0,o.exportTypedArrayStaticMethod)(\"of\",function(){for(var c=0,g=arguments.length,m=new(a(this))(g);g>c;)m[c]=arguments[c++];return m},y)},3300:function(n,r,e){\"use strict\";var o=function(){if(typeof self<\"u\")return self;if(typeof window<\"u\")return window;if(e.g!==void 0)return e.g;throw new Error(\"unable to locate global object\")}();n.exports=r=o.fetch,o.fetch&&(r.default=o.fetch.bind(e.g)),r.Headers=o.Headers,r.Request=o.Request,r.Response=o.Response},1697:function(n,r,e){\"use strict\";n.exports=e(3188)()},3188:function(n){\"use strict\";function r(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}n.exports=function(e){return(e=e||{}).circles?function(y){var a=[],c=[];return y.proto?function m(p){if(typeof p!=\"object\"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return g(p,m);if(p instanceof Map)return new Map(g(Array.from(p),m));if(p instanceof Set)return new Set(g(Array.from(p),m));var f={};for(var l in a.push(p),c.push(f),p){var s=p[l];if(typeof s!=\"object\"||s===null)f[l]=s;else if(s instanceof Date)f[l]=new Date(s);else if(s instanceof Map)f[l]=new Map(g(Array.from(s),m));else if(s instanceof Set)f[l]=new Set(g(Array.from(s),m));else if(ArrayBuffer.isView(s))f[l]=r(s);else{var d=a.indexOf(s);f[l]=d!==-1?c[d]:m(s)}}return a.pop(),c.pop(),f}:function m(p){if(typeof p!=\"object\"||p===null)return p;if(p instanceof Date)return new Date(p);if(Array.isArray(p))return g(p,m);if(p instanceof Map)return new Map(g(Array.from(p),m));if(p instanceof Set)return new Set(g(Array.from(p),m));var f={};for(var l in a.push(p),c.push(f),p)if(Object.hasOwnProperty.call(p,l)!==!1){var s=p[l];if(typeof s!=\"object\"||s===null)f[l]=s;else if(s instanceof Date)f[l]=new Date(s);else if(s instanceof Map)f[l]=new Map(g(Array.from(s),m));else if(s instanceof Set)f[l]=new Set(g(Array.from(s),m));else if(ArrayBuffer.isView(s))f[l]=r(s);else{var d=a.indexOf(s);f[l]=d!==-1?c[d]:m(s)}}return a.pop(),c.pop(),f};function g(m,p){for(var f=Object.keys(m),l=new Array(f.length),s=0;s<f.length;s++){var d=f[s],h=m[d];if(typeof h!=\"object\"||h===null)l[d]=h;else if(h instanceof Date)l[d]=new Date(h);else if(ArrayBuffer.isView(h))l[d]=r(h);else{var x=a.indexOf(h);l[d]=x!==-1?c[x]:p(h)}}return l}}(e):e.proto?function y(a){if(typeof a!=\"object\"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return o(a,y);if(a instanceof Map)return new Map(o(Array.from(a),y));if(a instanceof Set)return new Set(o(Array.from(a),y));var c={};for(var g in a){var m=a[g];typeof m!=\"object\"||m===null?c[g]=m:m instanceof Date?c[g]=new Date(m):m instanceof Map?c[g]=new Map(o(Array.from(m),y)):m instanceof Set?c[g]=new Set(o(Array.from(m),y)):ArrayBuffer.isView(m)?c[g]=r(m):c[g]=y(m)}return c}:function y(a){if(typeof a!=\"object\"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return o(a,y);if(a instanceof Map)return new Map(o(Array.from(a),y));if(a instanceof Set)return new Set(o(Array.from(a),y));var c={};for(var g in a)if(Object.hasOwnProperty.call(a,g)!==!1){var m=a[g];typeof m!=\"object\"||m===null?c[g]=m:m instanceof Date?c[g]=new Date(m):m instanceof Map?c[g]=new Map(o(Array.from(m),y)):m instanceof Set?c[g]=new Set(o(Array.from(m),y)):ArrayBuffer.isView(m)?c[g]=r(m):c[g]=y(m)}return c};function o(y,a){for(var c=Object.keys(y),g=new Array(c.length),m=0;m<c.length;m++){var p=c[m],f=y[p];typeof f!=\"object\"||f===null?g[p]=f:f instanceof Date?g[p]=new Date(f):ArrayBuffer.isView(f)?g[p]=r(f):g[p]=a(f)}return g}}}},t={};function i(n){var r=t[n];if(r!==void 0)return r.exports;var e=t[n]={exports:{}};return v[n](e,e.exports,i),e.exports}i.g=function(){if(typeof globalThis==\"object\")return globalThis;try{return this||new Function(\"return this\")()}catch{if(typeof window==\"object\")return window}}();var u={};return function(){\"use strict\";var n=u,r=function(m){return m&&m.__esModule?m:{default:m}},e=r(i(7621)),o=r(i(153)),y=i(7468),a=i(9003),c=i(9949),g=i(6354);n.default={mergeConfig:y.mergeConfig,AbortController:g.AbortController,Context:e.default,ContextDataProvider:a.ContextDataProvider,ContextPublisher:c.ContextPublisher,SDK:o.default}}(),u=u.default}()})});var ve={UNIT_ID:\"abs\",PUBLIC_ID:\"abs_public\",EXPIRY:\"abs_expiry\",UTM_PARAMS:\"abs_utm_params\",LANDING_PAGE:\"abs_landing_page\",OVERRIDES:\"abs_overrides\"},Je={MAX_AGE_DAYS:730,PATH:\"/\",SAME_SITE:\"Lax\"};var Ye=function(){return Ye=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},Ye.apply(this,arguments)},_t=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},dr=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},he=typeof __DEBUG__<\"u\"?__DEBUG__:!0;function C(){for(var v=[],t=0;t<arguments.length;t++)v[t]=arguments[t];if(he)if(v.length===2&&typeof v[0]==\"string\"&&typeof v[1]==\"object\"){var i=_t(v,2),u=i[0],n=i[1];if(u.includes(\"Original state already stored\")||u.includes(\"State store operation\")||u.includes(\"Performance:\")&&n?.duration&&n.duration<5||u.includes(\"Message sent:\")||u.includes(\"Message received:\"))return;var r=new Date().toISOString(),e=\"[ABsmartly Debug]\";console.log(\"\".concat(e,\" [\").concat(r,\"] \").concat(u),n)}else if(v.length===1&&typeof v[0]==\"string\"){var u=v[0];if(u.includes(\"Original state already stored\")||u.includes(\"State store operation\")||u.includes(\"Message sent:\")||u.includes(\"Message received:\"))return;var r=new Date().toISOString(),e=\"[ABsmartly Debug]\";console.log(\"\".concat(e,\" [\").concat(r,\"] \").concat(u))}else console.log.apply(console,dr([],_t(v),!1))}function Ee(v,t,i,u,n){if(he){var r=n?\"\\u2713\":\"\\u2717\",e=\"\".concat(r,\" Applied \").concat(i,\" change to \").concat(u,\" element(s)\");C(e,{experimentName:v,selector:t,changeType:i,elementsCount:u,success:n})}}function Et(v,t,i,u){if(he){var n='Experiment \"'.concat(v,'\" summary');C(n,{experimentName:v,totalChanges:t,successfulChanges:i,pendingChanges:u,successRate:t>0?\"\".concat(Math.round(i/t*100),\"%\"):\"N/A\"})}}function Ne(v,t,i){if(he){var u=\"Performance: \".concat(v,\" took \").concat(t,\"ms\");C(u,Ye({operation:v,duration:t,performance:!0},i))}}var ge=function(){return ge=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},ge.apply(this,arguments)},ee=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},At=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},kt=function(){function v(t,i){i===void 0&&(i=!1),this.applyFn=t,this.pending=new Map,this.observers=new Map,this.appliedSelectors=new Set,this.batchTimer=null,this.batchedWork=new Set,this.debug=i}return v.prototype.addPending=function(t){var i=t.change,u=t.observerRoot,n=u;u&&!document.querySelector(u)&&(this.debug&&C(\"[ABsmartly] Observer root not found, using document:\",u),n=void 0);var r=\"\".concat(i.selector,\"-\").concat(n||\"document\");this.debug&&C(\"[ABsmartly] Adding pending change for selector:\",i.selector);var e=this.getObserverRoot(n),o=e.querySelector(i.selector);if(o){this.applyChange(o,ge(ge({},t),{observerRoot:n}));return}var y=this.pending.get(r)||[];y.push(ge(ge({},t),{observerRoot:n})),this.pending.set(r,y),this.ensureObserver(n)},v.prototype.removePending=function(t,i,u){var n=\"\".concat(t,\"-\").concat(u||\"document\"),r=this.pending.get(n);if(r){var e=r.filter(function(o){return o.experimentName!==i});e.length===0?this.pending.delete(n):this.pending.set(n,e)}this.checkObserverCleanup(u)},v.prototype.removeAllPending=function(t){var i,u;try{for(var n=ee(this.pending.entries()),r=n.next();!r.done;r=n.next()){var e=At(r.value,2),o=e[0],y=e[1],a=y.filter(function(c){return c.experimentName!==t});a.length===0?this.pending.delete(o):this.pending.set(o,a)}}catch(c){i={error:c}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}this.cleanupObservers()},v.prototype.ensureObserver=function(t){var i=this,u=t||\"document\";if(!this.observers.has(u)){var n=this.getObserverRoot(t),r=new MutationObserver(function(e){i.handleMutations(e,t)});r.observe(n,{childList:!0,subtree:!0}),this.observers.set(u,r),this.debug&&C(\"[ABsmartly] Started observer for root:\",u)}},v.prototype.handleMutations=function(t,i){var u,n,r,e,o=this,y=[];try{for(var a=ee(t),c=a.next();!c.done;c=a.next()){var g=c.value,m=function(d){var h,x,b,S;if(!(d instanceof Element))return\"continue\";var O=i||\"document\";try{for(var w=(h=void 0,ee(p.pending.entries())),_=w.next();!_.done;_=w.next()){var A=At(_.value,2),E=A[0],k=A[1];if(E.endsWith(\"-\".concat(O))){var P=function(L){var R=L.change;if(d.matches(R.selector))return y.push(function(){return o.applyChange(d,L)}),\"continue\";var I=d.querySelectorAll(R.selector);I.forEach(function(N){y.push(function(){return o.applyChange(N,L)})})};try{for(var j=(b=void 0,ee(k)),T=j.next();!T.done;T=j.next()){var M=T.value;P(M)}}catch(L){b={error:L}}finally{try{T&&!T.done&&(S=j.return)&&S.call(j)}finally{if(b)throw b.error}}}}}catch(L){h={error:L}}finally{try{_&&!_.done&&(x=w.return)&&x.call(w)}finally{if(h)throw h.error}}},p=this;try{for(var f=(r=void 0,ee(g.addedNodes)),l=f.next();!l.done;l=f.next()){var s=l.value;m(s)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(e=f.return)&&e.call(f)}finally{if(r)throw r.error}}}}catch(d){u={error:d}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(u)throw u.error}}y.length>0&&this.batchWork(y)},v.prototype.batchWork=function(t){var i=this;t.forEach(function(u){return i.batchedWork.add(u)}),this.batchTimer&&clearTimeout(this.batchTimer),this.batchTimer=setTimeout(function(){i.processBatchedWork()},32)},v.prototype.processBatchedWork=function(){var t=Array.from(this.batchedWork);this.batchedWork.clear(),this.batchTimer=null,this.debug&&t.length>0&&C(\"[ABsmartly] Processing batched work:\",t.length,\"items\"),t.forEach(function(i){return i()})},v.prototype.applyChange=function(t,i){var u=i.change,n=i.experimentName,r=i.observerRoot,e=\"\".concat(u.selector,\"-\").concat(r||\"document\",\"-\").concat(n);if(!this.appliedSelectors.has(e)){this.debug&&C(\"[ABsmartly] Applying pending change to element:\",u.selector);var o=this.applyFn(u,n,t);if(o){this.appliedSelectors.add(e);var y=\"\".concat(u.selector,\"-\").concat(r||\"document\"),a=this.pending.get(y);if(a){var c=a.filter(function(g){return g.experimentName!==n||g.change.selector!==u.selector});c.length===0?this.pending.delete(y):this.pending.set(y,c)}this.checkObserverCleanup(r)}}},v.prototype.getObserverRoot=function(t){if(!t)return document.documentElement;var i=document.querySelector(t);return i||document.documentElement},v.prototype.checkObserverCleanup=function(t){var i,u,n=t||\"document\",r=!1;try{for(var e=ee(this.pending.keys()),o=e.next();!o.done;o=e.next()){var y=o.value;if(y.endsWith(\"-\".concat(n))){r=!0;break}}}catch(c){i={error:c}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}if(!r){var a=this.observers.get(n);a&&(a.disconnect(),this.observers.delete(n),this.debug&&C(\"[ABsmartly] Disconnected observer for root:\",n))}},v.prototype.cleanupObservers=function(){var t,i,u,n,r=this,e=[];try{for(var o=ee(this.observers.keys()),y=o.next();!y.done;y=o.next()){var a=y.value,c=!1;try{for(var g=(u=void 0,ee(this.pending.keys())),m=g.next();!m.done;m=g.next()){var p=m.value;if(p.endsWith(\"-\".concat(a))){c=!0;break}}}catch(f){u={error:f}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(u)throw u.error}}c||e.push(a)}}catch(f){t={error:f}}finally{try{y&&!y.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.forEach(function(f){var l=r.observers.get(f);l&&(l.disconnect(),r.observers.delete(f),r.debug&&C(\"[ABsmartly] Cleaned up observer for root:\",f))})},v.prototype.destroy=function(){var t,i;this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null);try{for(var u=ee(this.observers.values()),n=u.next();!n.done;n=u.next()){var r=n.value;r.disconnect()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}this.observers.clear(),this.pending.clear(),this.appliedSelectors.clear(),this.batchedWork.clear(),this.debug&&C(\"[ABsmartly] PendingChangeManager destroyed\")},v.prototype.getPendingCount=function(){var t,i,u=0;try{for(var n=ee(this.pending.values()),r=n.next();!r.done;r=n.next()){var e=r.value;u+=e.length}}catch(o){t={error:o}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u},v.prototype.getAppliedCount=function(){return this.appliedSelectors.size},v.prototype.hasPendingForExperiment=function(t){var i,u;try{for(var n=ee(this.pending.values()),r=n.next();!r.done;r=n.next()){var e=r.value;if(e.some(function(o){return o.experimentName===t}))return!0}}catch(o){i={error:o}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}return!1},v}();var yr=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Be=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Ct=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},Pt=function(){function v(t,i){t===void 0&&(t=!1);var u=this;this.appliedChanges=new Map,this.debug=t,this.plugin=i,this.pendingManager=new kt(function(n,r,e){return e?u.applyChangeToSpecificElement(n,r,e):u.applyChange(n,r)},t)}return v.prototype.applyChange=function(t,i){var u=this,n,r;if(!t.enabled&&t.enabled!==void 0)return C(\"Skipping disabled change for experiment: \".concat(i),{experimentName:i,selector:t.selector,changeType:t.type}),!1;var e=!!this.plugin.reapplyingElements&&Array.from(this.plugin.reapplyingElements).length>0;this.debug&&C(\"[DOM-APPLY] \".concat(e?\"RE-APPLYING\":\"APPLYING\",\" change\"),{experimentName:i,selector:t.selector,type:t.type,timestamp:Date.now(),callStack:(n=new Error().stack)===null||n===void 0?void 0:n.split(`\n`).slice(2,4).join(`\n`)});try{if(t.type===\"styleRules\")return this.applyStyleRules(t,i);if(t.type===\"create\"){if(t.element&&t.targetSelector){var o=this.createElement(t,i);if(o)return this.trackAppliedChange(i,t),Ee(i,t.targetSelector,t.type,1,!0),!0}return!1}var y=document.querySelectorAll(t.selector),a=[];if(y.length===0){var c=t.waitForElement||((r=this.plugin.config)===null||r===void 0?void 0:r.spa);return c?(this.debug&&C(\"[ABsmartly] Element not found, adding to pending: \".concat(t.selector)),this.pendingManager.addPending({change:t,experimentName:i,observerRoot:t.observerRoot}),!0):(this.debug&&C(\"[ABsmartly] No elements found for selector: \".concat(t.selector)),C(\"No elements found for selector\",{experimentName:i,selector:t.selector,changeType:t.type}),!1)}if(y.forEach(function(m){var p,f;if(u.debug&&t.type===\"style\"){var l={};t.value&&typeof t.value==\"object\"&&Object.keys(t.value).forEach(function(O){var w=O.replace(/([A-Z])/g,\"-$1\").toLowerCase();l[w]=m.style.getPropertyValue(w)}),C(\"[DOM-BEFORE-APPLY] Element styles before change\",{experimentName:i,selector:t.selector,element:m.tagName,oldStyles:l,newStyles:t.value})}if(u.applyChangeToElement(m,t),u.debug&&t.type===\"style\"){var s={};t.value&&typeof t.value==\"object\"&&Object.keys(t.value).forEach(function(O){var w=O.replace(/([A-Z])/g,\"-$1\").toLowerCase();s[w]=m.style.getPropertyValue(w)}),C(\"[DOM-AFTER-APPLY] Element styles after change\",{experimentName:i,selector:t.selector,element:m.tagName,appliedStyles:s})}if(t.type===\"javascript\"){if(t.value)try{var d=new Function(\"element\",String(t.value));d(m),a.push(m)}catch(O){C(\"[ABsmartly] JavaScript execution error:\",O)}}else if(t.type===\"move\"){var h=t.targetSelector||(t.value&&typeof t.value==\"object\"?t.value.targetSelector:null),x=t.position||(t.value&&typeof t.value==\"object\"?t.value.position:null);if(h){var b=document.querySelector(h);b?(u.moveElement(m,b,x),a.push(m)):u.debug&&C(\"[ABsmartly] Move target not found: \".concat(h))}}else a.push(m);var S=t.type===\"style\"&&t.persistStyle||((p=u.plugin.config)===null||p===void 0?void 0:p.spa);S?u.plugin.watchElement(m,i,t):t.type===\"style\"&&u.debug&&C(\"[WATCH-SKIP] NOT watching element - persistStyle and SPA both disabled\",{experimentName:i,selector:t.selector,element:m.tagName,persistStyle:t.persistStyle,spaMode:(f=u.plugin.config)===null||f===void 0?void 0:f.spa})}),a.length>0){this.trackAppliedChange(i,t),t.waitForElement&&this.pendingManager.removePending(t.selector,i,t.observerRoot);var g=a.some(function(m){var p;return(p=u.plugin.reapplyingElements)===null||p===void 0?void 0:p.has(m)});return g||Ee(i,t.selector,t.type,a.length,!0),!0}return Ee(i,t.selector,t.type,0,!1),!1}catch(m){return this.debug&&C(\"[ABsmartly] Error applying DOM change:\",m,t),C(\"Error applying DOM change\",{experimentName:i,selector:t.selector,changeType:t.type,error:m instanceof Error?m.message:\"Unknown error\"}),!1}},v.prototype.moveElement=function(t,i,u){var n,r,e;switch(u){case\"before\":(n=i.parentElement)===null||n===void 0||n.insertBefore(t,i);break;case\"after\":i.nextSibling?(r=i.parentElement)===null||r===void 0||r.insertBefore(t,i.nextSibling):(e=i.parentElement)===null||e===void 0||e.appendChild(t);break;case\"firstChild\":i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t);break;case\"lastChild\":default:i.appendChild(t);break}},v.prototype.createElement=function(t,i){var u,n;if(!t.element||!t.targetSelector)return null;var r=document.querySelector(t.targetSelector);if(!r)return this.debug&&C(\"[ABsmartly] Create target not found: \".concat(t.targetSelector)),null;var e=document.createElement(\"div\");e.innerHTML=t.element;var o=Array.from(e.children);if(o.length===0)return null;try{for(var y=yr(o),a=y.next();!a.done;a=y.next()){var c=a.value;this.moveElement(c,r,t.position)}}catch(g){u={error:g}}finally{try{a&&!a.done&&(n=y.return)&&n.call(y)}finally{if(u)throw u.error}}return o[0]},v.prototype.applyStyleRules=function(t,i){try{var u=this.plugin.getStyleManager(i),n=\"\".concat(t.selector,\"::states\"),r=void 0;if(typeof t.value==\"string\"&&t.value.trim())r=t.value;else if(t.states)r=this.plugin.buildStateRules(t.selector,t.states,t.important!==!1);else return!1;return u.setRule(n,r),this.debug&&(C(\"[ABsmartly] Applied style rule: \".concat(n)),C(\"[ABsmartly] CSS: \".concat(r))),this.trackAppliedChange(i,t),Ee(i,t.selector,\"styleRules\",1,!0),!0}catch(e){return this.debug&&C(\"[ABsmartly] Error applying style rules:\",e),!1}},v.prototype.applyChangeToElement=function(t,i){var u,n;switch(i.type){case\"text\":i.value!==void 0&&(t.textContent=String(i.value));break;case\"html\":i.value!==void 0&&(t.innerHTML=String(i.value));break;case\"style\":i.value&&typeof i.value==\"object\"&&Object.entries(i.value).forEach(function(o){var y=Be(o,2),a=y[0],c=y[1],g=a.replace(/([A-Z])/g,\"-$1\").toLowerCase(),m=i.important===!0?\"important\":\"\";t.style.setProperty(g,String(c),m)});break;case\"class\":i.add&&Array.isArray(i.add)&&(u=t.classList).add.apply(u,Ct([],Be(i.add),!1)),i.remove&&Array.isArray(i.remove)&&(n=t.classList).remove.apply(n,Ct([],Be(i.remove),!1));break;case\"attribute\":i.value&&typeof i.value==\"object\"&&Object.entries(i.value).forEach(function(o){var y=Be(o,2),a=y[0],c=y[1];c==null?t.removeAttribute(a):t.setAttribute(a,String(c))});break;case\"move\":if(i.value&&typeof i.value==\"object\"){var r=i.value,e=document.querySelector(r.targetSelector);e?this.moveElement(t,e,r.position):this.debug&&C(\"[ABsmartly] Move target not found: \".concat(r.targetSelector))}break;case\"delete\":t.remove();break}},v.prototype.applyChangeToSpecificElement=function(t,i,u){var n;try{if(this.applyChangeToElement(u,t),t.type===\"javascript\"&&t.value)try{var r=new Function(\"element\",String(t.value));r(u)}catch(c){return C(\"[ABsmartly] JavaScript execution error:\",c),!1}else if(t.type===\"move\"){var e=t.targetSelector||(t.value&&typeof t.value==\"object\"?t.value.targetSelector:null),o=t.position||(t.value&&typeof t.value==\"object\"?t.value.position:null);if(e){var y=document.querySelector(e);if(y)this.moveElement(u,y,o);else return!1}}var a=t.type===\"style\"&&t.persistStyle||((n=this.plugin.config)===null||n===void 0?void 0:n.spa);return a&&this.plugin.watchElement(u,i,t),!0}catch(c){return this.debug&&C(\"[ABsmartly] Error applying change to specific element:\",c),!1}},v.prototype.trackAppliedChange=function(t,i){var u=this.appliedChanges.get(t);u||(u=new Set,this.appliedChanges.set(t,u));var n=\"\".concat(i.selector,\"-\").concat(i.type);u.add(n)},v.prototype.hasChanges=function(t){return this.appliedChanges.has(t)},v.prototype.clearTracking=function(t){t?this.appliedChanges.delete(t):this.appliedChanges.clear()},v.prototype.removeAllPending=function(t){this.pendingManager.removeAllPending(t)},v.prototype.destroy=function(){this.pendingManager.destroy(),this.appliedChanges.clear()},v}();var ce=function(){function v(){}return v.matches=function(t,i){i===void 0&&(i=window.location.href);var u=this.normalizeFilter(t),n=this.extractURLPart(i,u.matchType);return u.exclude&&this.matchesPatterns(u.exclude,n,u.mode)?!1:u.include?u.include.length===0?!1:this.matchesPatterns(u.include,n,u.mode):!0},v.extractURLPart=function(t,i){i===void 0&&(i=\"path\");try{var u=new URL(t);switch(i){case\"full-url\":return u.href;case\"path\":return u.pathname+u.hash;case\"domain\":return u.hostname;case\"query\":return u.search;case\"hash\":return u.hash;default:return u.pathname+u.hash}}catch(n){return console.error(\"[ABsmartly] Failed to parse URL: \".concat(t),n),t}},v.matchesPatterns=function(t,i,u){var n=this;return u===void 0&&(u=\"simple\"),t.some(function(r){if(u===\"regex\")try{return new RegExp(r).test(i)}catch(e){return console.error(\"[ABsmartly] Invalid regex pattern: \".concat(r),e),!1}return n.matchSimplePattern(r,i)})},v.matchSimplePattern=function(t,i){var u=t.replace(/[.+^${}()|[\\]\\\\]/g,\"\\\\$&\").replace(/\\*/g,\".*\").replace(/\\?/g,\".\");try{return new RegExp(\"^\".concat(u,\"$\")).test(i)}catch(n){return console.error(\"[ABsmartly] Invalid pattern: \".concat(t),n),!1}},v.normalizeFilter=function(t){return typeof t==\"string\"?{include:[t],exclude:[],mode:\"simple\",matchType:\"path\"}:Array.isArray(t)?{include:t.length>0?t:void 0,exclude:[],mode:\"simple\",matchType:\"path\"}:{include:t.include,exclude:t.exclude||[],mode:t.mode||\"simple\",matchType:t.matchType||\"path\"}},v}();var vr=function(v,t){var i={};for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&t.indexOf(u)<0&&(i[u]=v[u]);if(v!=null&&typeof Object.getOwnPropertySymbols==\"function\")for(var n=0,u=Object.getOwnPropertySymbols(v);n<u.length;n++)t.indexOf(u[n])<0&&Object.prototype.propertyIsEnumerable.call(v,u[n])&&(i[u[n]]=v[u[n]]);return i},Ue=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ve=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},jt=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},Tt=function(){function v(t,i,u){i===void 0&&(i=\"__dom_changes\"),u===void 0&&(u=!1),this.cachedAllChanges=null,this.context=t,this.variableName=i,this.debug=u}return v.prototype.clearCache=function(){this.cachedAllChanges=null},v.prototype.extractAllChanges=function(){var t,i,u,n,r,e,o;if(this.cachedAllChanges)return this.debug&&C(\"[ABsmartly VariantExtractor] Returning cached changes\"),this.cachedAllChanges;var y=new Map;try{var a=this.context.data();if(C(\"[VariantExtractor DEBUG] Raw context data structure:\",{hasData:!!a,contextKeys:a?Object.keys(a):[],experimentCount:((u=a?.experiments)===null||u===void 0?void 0:u.length)||0,firstExperiment:!((n=a?.experiments)===null||n===void 0)&&n[0]?{name:a.experiments[0].name,variantCount:((r=a.experiments[0].variants)===null||r===void 0?void 0:r.length)||0,firstVariantStructure:!((e=a.experiments[0].variants)===null||e===void 0)&&e[0]?Object.keys(a.experiments[0].variants[0]):[]}:null,rawContextData:JSON.stringify(a).substring(0,500)+\"...\"}),this.debug&&C(\"[ABsmartly VariantExtractor] Extracting changes from context:\",{hasData:!!a,experimentCount:((o=a?.experiments)===null||o===void 0?void 0:o.length)||0}),a?.experiments){this.debug&&C(\"[ABsmartly VariantExtractor] Available experiments:\",a.experiments.map(function(f){var l;return{name:f.name,hasVariants:!!f.variants,variantCount:((l=f.variants)===null||l===void 0?void 0:l.length)||0}}));try{for(var c=Ue(a.experiments),g=c.next();!g.done;g=c.next()){var m=g.value,p=this.extractAllVariantsForExperiment(m);p.size>0?(y.set(m.name,p),this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(m.name,\"' has DOM changes:\"),{variantsWithChanges:Array.from(p.keys()),changesByVariant:Array.from(p.entries()).map(function(f){var l=Ve(f,2),s=l[0],d=l[1];return{variant:s,changeCount:d.length,changeTypes:jt([],Ve(new Set(d.map(function(h){return h.type}))),!1)}})})):this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(m.name,\"' has no DOM changes\"))}}catch(f){t={error:f}}finally{try{g&&!g.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}}}catch(f){C(\"[ABsmartly] Error extracting DOM changes:\",f)}return this.cachedAllChanges=y,y},v.prototype.extractAllVariantsForExperiment=function(t){var i,u=new Map;if(C(\"[DEBUG] Processing experiment:\",t.name,\"with\",((i=t.variants)===null||i===void 0?void 0:i.length)||0,\"variants\"),!t.variants)return C(\"[DEBUG] No variants found for experiment:\",t.name),u;for(var n=0;n<t.variants.length;n++){var r=t.variants[n];if(r){var e=null;if(r.config)try{var o=typeof r.config==\"string\"?JSON.parse(r.config):r.config;C(\"[VariantExtractor DEBUG] Parsed config for variant \".concat(n,\":\"),o),o&&o[this.variableName]?(e=o[this.variableName],C(\"[VariantExtractor DEBUG] \\u2713 Found DOM changes in config[\".concat(this.variableName,\"]:\"),e)):C(\"[VariantExtractor DEBUG] \\u2717 No \".concat(this.variableName,\" field found in parsed config for variant \").concat(n))}catch(a){C(\"[VariantExtractor DEBUG] \\u2717 Failed to parse variant.config for variant \".concat(n,\":\"),a,\"Raw config:\",typeof r.config==\"string\"?r.config.substring(0,100):\"\")}else C(\"[VariantExtractor DEBUG] \\u2717 No config field found for variant \".concat(n));if(e){var y=this.extractChangesFromData(e);y&&y.length>0&&u.set(n,y)}}}return u},v.prototype.extractChangesFromData=function(t){if(!t)return null;if(typeof t==\"string\")try{t=JSON.parse(t)}catch(u){return C(\"[ABsmartly] Failed to parse DOM changes JSON:\",u),null}if(t&&typeof t==\"object\"&&!Array.isArray(t)&&\"changes\"in t){var i=t;return this.parseChanges(i.changes)}return this.parseChanges(t)},v.prototype.getExperimentChanges=function(t){var i=this.extractAllChanges(),u=i.get(t);if(!u||u.size===0)return null;var n=this.context.peek(t);return n==null?(this.debug&&C(\"[ABsmartly] No variant selected for \".concat(t)),null):u.get(n)||null},v.prototype.parseChanges=function(t){var i,u;if(!t)return null;if(typeof t==\"string\")try{t=JSON.parse(t)}catch(y){return C(\"[ABsmartly] Failed to parse DOM changes JSON:\",y),null}if(!Array.isArray(t))return this.debug&&C(\"[ABsmartly] DOM changes data is not an array\"),null;var n=[];try{for(var r=Ue(t),e=r.next();!e.done;e=r.next()){var o=e.value;this.isValidChange(o)?n.push(o):this.debug&&C(\"[ABsmartly] Invalid DOM change:\",o)}}catch(y){i={error:y}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}return n.length>0?n:null},v.prototype.isValidChange=function(t){if(!t||typeof t!=\"object\")return!1;var i=t;if(i.selector===void 0||i.selector===null||!i.type)return!1;var u=[\"text\",\"html\",\"style\",\"class\",\"attribute\",\"javascript\",\"move\",\"create\",\"delete\",\"styleRules\"];if(!u.includes(i.type))return!1;switch(i.type){case\"class\":if(!i.add&&!i.remove||i.add&&!Array.isArray(i.add)||i.remove&&!Array.isArray(i.remove))return!1;break;case\"move\":if(!i.targetSelector)return!1;break;case\"create\":if(!i.element||!i.targetSelector)return!1;break;case\"style\":case\"attribute\":if(!i.value||typeof i.value!=\"object\")return!1;break}return!0},v.prototype.getAllVariantChanges=function(t){var i=this.extractAllChanges(),u=i.get(t);if(!u)return[];for(var n=Math.max.apply(Math,jt([],Ve(u.keys()),!1)),r=[],e=0;e<=n;e++)r.push(u.get(e)||[]);return r},v.prototype.getExperiment=function(t){try{var i=this.context.data();return!i||!i.experiments?null:i.experiments.find(function(u){return u.name===t})||null}catch(u){return this.debug&&C(\"[ABsmartly VariantExtractor] Failed to get experiment '\".concat(t,\"' - context may not be ready:\"),u),null}},v.prototype.getAllVariantsData=function(t){var i=new Map;try{var u=this.context.data();if(!u?.experiments)return i;var n=u.experiments.find(function(a){return a.name===t});if(!n?.variants)return i;for(var r=0;r<n.variants.length;r++){var e=n.variants[r];if(e){var o=null;if(e.variables&&e.variables[this.variableName])o=e.variables[this.variableName];else if(e.config)try{var y=typeof e.config==\"string\"?JSON.parse(e.config):e.config;y&&y[this.variableName]&&(o=y[this.variableName])}catch(a){C(\"[VariantExtractor] Failed to parse variant.config:\",a)}if(o){if(typeof o==\"string\")try{o=JSON.parse(o)}catch(a){C(\"[ABsmartly] Failed to parse DOM changes JSON:\",a);continue}i.set(r,o)}}}}catch(a){C(\"[ABsmartly] Error getting all variants data:\",a)}return i},v.prototype.anyVariantMatchesURL=function(t,i){var u,n;i===void 0&&(i=window.location.href);var r=this.getAllVariantsData(t),e=!1;try{for(var o=Ue(r),y=o.next();!y.done;y=o.next()){var a=Ve(y.value,2),c=a[1];if(c&&typeof c==\"object\"&&!Array.isArray(c)&&\"urlFilter\"in c){var g=c;if(g.urlFilter&&(e=!0,ce.matches(g.urlFilter,i)))return!0}}}catch(m){u={error:m}}finally{try{y&&!y.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}return!e},v.prototype.extractAllInjectHTML=function(){var t,i,u=new Map;try{var n=this.context.data();if(this.debug&&C(\"[ABsmartly VariantExtractor] Extracting __inject_html from context\"),n?.experiments)try{for(var r=Ue(n.experiments),e=r.next();!e.done;e=r.next()){var o=e.value,y=this.extractInjectHTMLForExperiment(o);y.size>0&&(u.set(o.name,y),this.debug&&C(\"[ABsmartly VariantExtractor] Experiment '\".concat(o.name,\"' has HTML injections:\"),{variantsWithInjections:Array.from(y.keys())}))}}catch(a){t={error:a}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}catch(a){C(\"[ABsmartly] Error extracting __inject_html:\",a)}return u},v.prototype.extractInjectHTMLForExperiment=function(t){var i=new Map;if(!t.variants)return i;for(var u=0;u<t.variants.length;u++){var n=t.variants[u];if(n){var r=null;if(n.variables&&n.variables.__inject_html)r=n.variables.__inject_html,this.debug&&C(\"[VariantExtractor] Found __inject_html in variables for \".concat(t.name,\" variant \").concat(u));else if(n.config)try{var e=typeof n.config==\"string\"?JSON.parse(n.config):n.config;e&&e.__inject_html&&(r=e.__inject_html,this.debug&&C(\"[VariantExtractor] Found __inject_html in config for \".concat(t.name,\" variant \").concat(u)))}catch(g){C(\"[VariantExtractor] Failed to parse variant.config for \".concat(t.name,\" variant \").concat(u,\":\"),g)}if(r&&typeof r==\"object\"&&!Array.isArray(r)){var o=r,y=o.urlFilter,a=vr(o,[\"urlFilter\"]),c={data:a,urlFilter:y||void 0};i.set(u,c),this.debug&&C(\"[VariantExtractor] Extracted __inject_html for \".concat(t.name,\" variant \").concat(u,\":\"),{keys:Object.keys(a),hasUrlFilter:!!y})}else r&&this.debug&&C(\"[VariantExtractor] Invalid __inject_html format in \".concat(t.name,\" variant \").concat(u),r)}}return i},v}();var Mt=function(){function v(t,i){i===void 0&&(i=!1),this.id=t,this.styleEl=null,this.rules=new Map,this.debug=i}return v.prototype.ensure=function(){if((!this.styleEl||!document.head.contains(this.styleEl))&&(this.styleEl=document.getElementById(this.id),!this.styleEl)){var t=document.createElement(\"style\");t.id=this.id,t.setAttribute(\"data-absmartly-styles\",\"true\"),document.head.appendChild(t),this.styleEl=t,this.debug&&C(\"[ABsmartly] Created stylesheet: \".concat(this.id))}return this.styleEl},v.prototype.setRule=function(t,i){this.rules.set(t,i),this.render(),this.debug&&C(\"[ABsmartly] Set CSS rule for \".concat(t))},v.prototype.deleteRule=function(t){this.rules.delete(t)&&(this.render(),this.debug&&C(\"[ABsmartly] Deleted CSS rule for \".concat(t)))},v.prototype.hasRule=function(t){return this.rules.has(t)},v.prototype.clear=function(){var t=this.rules.size>0;this.rules.clear(),t&&(this.render(),this.debug&&C(\"[ABsmartly] Cleared all CSS rules from \".concat(this.id)))},v.prototype.destroy=function(){this.clear(),this.styleEl&&document.head.contains(this.styleEl)&&(this.styleEl.remove(),this.styleEl=null,this.debug&&C(\"[ABsmartly] Destroyed stylesheet: \".concat(this.id)))},v.prototype.render=function(){var t=this.ensure(),i=Array.from(this.rules.values()).join(`\n\n`);t.textContent=i},v.prototype.getRulesCount=function(){return this.rules.size},v.prototype.getCssText=function(){return Array.from(this.rules.values()).join(`\n\n`)},v}();var hr=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},gr=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},It=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Lt=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},Rt=function(){function v(t,i){i===void 0&&(i=!1),this.context=t,this.experiments=new Map,this.trackedElements=new Map,this.mutationObserver=null,this.placeholders=new Map,this.debug=i,this.setupIntersectionObserver()}return v.prototype.registerExperiment=function(t,i,u,n,r,e){var o=this;this.debug&&C(\"[ABsmartly] Registering experiment \".concat(t,\" for exposure tracking\"));var y=new Set,a=new Set,c=new Map;n.forEach(function(m){m.forEach(function(p){p.trigger_on_view&&(p.type===\"move\"?(c.has(p.selector)||c.set(p.selector,new Set),p.targetSelector&&c.get(p.selector).add(p.targetSelector)):y.add(p.selector))})}),c.forEach(function(m,p){var f=[];n.forEach(function(s,d){var h=s.find(function(x){return x.type===\"move\"&&x.selector===p&&x.trigger_on_view});h?.targetSelector&&f.push({targetSelector:h.targetSelector,position:h.position||\"lastChild\",variantIndex:d})});var l=f.findIndex(function(s){return s.variantIndex===i});l>=0?(y.add(p),f.forEach(function(s,d){d!==l&&o.createContainerPlaceholder(t,p,s.targetSelector,s.position)})):(y.add(p),f.forEach(function(s){o.createContainerPlaceholder(t,p,s.targetSelector,s.position)}))});var g={experimentName:t,variant:i,changes:u,allPossibleSelectors:new Set(Lt(Lt([],It(y),!1),It(a),!1)),triggered:!1,hasImmediateTrigger:r,hasViewportTrigger:e};this.experiments.set(t,g),this.debug&&C(\"[ABsmartly] Experiment \".concat(t,\" will track selectors:\"),Array.from(g.allPossibleSelectors)),r?this.triggerExposure(t).catch(function(m){C(\"[ABsmartly] Failed to trigger exposure for \".concat(t,\":\"),m)}):e&&this.observeSelectors(t,g.allPossibleSelectors)},v.prototype.createContainerPlaceholder=function(t,i,u,n){var r,e;n===void 0&&(n=\"lastChild\");var o=document.querySelector(u);if(o){var y=\"\".concat(t,\"-\").concat(i,\"-\").concat(u,\"-\").concat(n);if(!this.placeholders.has(y)){var a=document.createElement(\"span\");switch(a.style.cssText=`\n      display: inline-block;\n      width: 1px;\n      height: 1px;\n      position: relative;\n      left: -1px;\n      visibility: hidden;\n      pointer-events: none;\n      font-size: 0;\n      line-height: 0;\n      overflow: hidden;\n    `,a.setAttribute(\"data-absmartly-placeholder\",\"true\"),a.setAttribute(\"data-absmartly-original-selector\",i),a.setAttribute(\"data-absmartly-experiment\",t),a.setAttribute(\"aria-hidden\",\"true\"),n){case\"firstChild\":o.insertBefore(a,o.firstChild);break;case\"lastChild\":o.appendChild(a);break;case\"before\":(r=o.parentElement)===null||r===void 0||r.insertBefore(a,o);break;case\"after\":(e=o.parentElement)===null||e===void 0||e.insertBefore(a,o.nextSibling);break;default:o.appendChild(a)}this.placeholders.set(y,a),this.trackElement(a,t),this.debug&&C(\"[ABsmartly] Created placeholder for \".concat(i,\" at \").concat(u,\" (\").concat(n,\")\"))}}},v.prototype.getOriginalParentForMove=function(t){var i=document.querySelector(t);return i?.parentElement?this.getStableParentSelector(i.parentElement):null},v.prototype.getStableParentSelector=function(t){if(t.id)return\"#\".concat(t.id);if(t.className){var i=t.className.split(\" \").filter(function(e){return e&&!e.startsWith(\"absmartly\")});if(i.length>0)return\".\".concat(i[0])}var u=t.parentElement;if(u){var n=Array.from(u.children),r=n.indexOf(t);return\"\".concat(t.tagName.toLowerCase(),\":nth-child(\").concat(r+1,\")\")}return null},v.prototype.observeSelectors=function(t,i){var u=this;i.forEach(function(n){var r=document.querySelectorAll(n);r.length>0?r.forEach(function(e){u.trackElement(e,t)}):u.watchForSelector(n,t)})},v.prototype.trackElement=function(t,i){this.trackedElements.has(t)?this.trackedElements.get(t).experiments.add(i):(this.trackedElements.set(t,{element:t,experiments:new Set([i]),isPlaceholder:t.hasAttribute(\"data-absmartly-placeholder\")}),this.observer.observe(t))},v.prototype.watchForSelector=function(t,i){this.mutationObserver||this.setupMutationObserver()},v.prototype.setupIntersectionObserver=function(){var t=this;this.observer=new IntersectionObserver(function(i){i.forEach(function(u){u.isIntersecting&&t.handleElementVisible(u.target)})},{threshold:.01,rootMargin:\"0px\"})},v.prototype.setupMutationObserver=function(){var t=this;this.mutationObserver=new MutationObserver(function(i){i.forEach(function(u){u.addedNodes.forEach(function(n){n instanceof Element&&t.checkNewElement(n)})})}),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})},v.prototype.checkNewElement=function(t){var i=this;this.experiments.forEach(function(u,n){u.allPossibleSelectors.forEach(function(r){t.matches(r)&&i.trackElement(t,n),t.querySelectorAll(r).forEach(function(e){i.trackElement(e,n)})})})},v.prototype.handleElementVisible=function(t){var i=this,u=this.trackedElements.get(t);u&&u.experiments.forEach(function(n){var r=i.experiments.get(n);if(r&&!r.triggered&&(i.triggerExposure(n).catch(function(o){C(\"[ABsmartly] Failed to trigger exposure for \".concat(n,\":\"),o)}),i.debug)){var e=u.isPlaceholder?t.getAttribute(\"data-absmartly-original-selector\"):i.getElementSelector(t);C(\"[ABsmartly] Triggering exposure for \".concat(n,\" via \").concat(e))}})},v.prototype.triggerExposure=function(t){return hr(this,void 0,void 0,function(){var i;return gr(this,function(u){switch(u.label){case 0:return i=this.experiments.get(t),!i||i.triggered?[2]:[4,this.context.ready()];case 1:return u.sent(),this.context.treatment(t),i.triggered=!0,this.debug&&C(\"[ABsmartly] Exposure triggered for experiment: \".concat(t)),this.cleanupExperiment(t),[2]}})})},v.prototype.cleanupExperiment=function(t){var i=this;this.trackedElements.forEach(function(n,r){n.experiments.delete(t),n.experiments.size===0&&(i.observer.unobserve(r),i.trackedElements.delete(r))}),this.placeholders.forEach(function(n,r){r.startsWith(\"\".concat(t,\"-\"))&&(n.remove(),i.placeholders.delete(r))});var u=this.experiments.get(t);u&&u.allPossibleSelectors.clear(),this.experiments.size===0&&this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)},v.prototype.getElementSelector=function(t){if(t.id)return\"#\".concat(t.id);if(t.className){var i=t.className.split(\" \").filter(function(u){return u&&!u.startsWith(\"absmartly\")});if(i.length>0)return\".\".concat(i.join(\".\"))}return t.tagName.toLowerCase()},v.prototype.needsViewportTracking=function(t){var i,u=this.experiments.get(t);return(i=u?.hasViewportTrigger)!==null&&i!==void 0?i:!1},v.prototype.isTriggered=function(t){var i,u=this.experiments.get(t);return(i=u?.triggered)!==null&&i!==void 0?i:!1},v.prototype.destroy=function(){this.observer.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),this.placeholders.forEach(function(t){return t.remove()}),this.experiments.clear(),this.trackedElements.clear(),this.placeholders.clear(),this.debug&&C(\"[ABsmartly] ExposureTracker destroyed\")},v}();var se=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},me=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},mr=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},Nt=function(){function v(t){t===void 0&&(t=!1),this.injectedIds=new Set,this.debug=t}return v.prototype.parseInjectionKey=function(t){var i,u,n=[\"headStart\",\"headEnd\",\"bodyStart\",\"bodyEnd\"];try{for(var r=se(n),e=r.next();!e.done;e=r.next()){var o=e.value;if(t===o)return{location:o,priority:0};if(t.startsWith(o)){var y=t.substring(o.length),a=parseInt(y,10);if(!isNaN(a))return{location:o,priority:a}}}}catch(c){i={error:c}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}return this.debug&&C(\"[HTMLInjector] Invalid injection key:\",t),null},v.prototype.collectInjections=function(t,i){var u,n,r,e,o,y,a,c;i===void 0&&(i=window.location.href);var g=new Map;try{for(var m=se(t),p=m.next();!p.done;p=m.next()){var f=me(p.value,2),l=f[0],s=f[1];try{for(var d=(r=void 0,se(s)),h=d.next();!h.done;h=d.next()){var x=me(h.value,2),b=x[0],S=x[1];if(!S||typeof S!=\"object\"){this.debug&&C(\"[HTMLInjector] Invalid injection data for \".concat(l,\" variant \").concat(b,\":\"),S);continue}if(S.urlFilter){var O=ce.matches(S.urlFilter,i);if(!O){this.debug&&C(\"[HTMLInjector] Skipping \".concat(l,\" variant \").concat(b,\" - URL filter doesn't match:\"),{currentUrl:i,urlFilter:S.urlFilter});continue}}var w=S.data;if(!w||typeof w!=\"object\"){this.debug&&C(\"[HTMLInjector] Invalid injection data for \".concat(l,\" variant \").concat(b,\":\"),w);continue}try{for(var _=(o=void 0,se(Object.entries(w))),A=_.next();!A.done;A=_.next()){var E=me(A.value,2),k=E[0],P=E[1];if(typeof P!=\"string\"){this.debug&&C(\"[HTMLInjector] Skipping non-string injection code for key \".concat(k,\":\"),P);continue}var j=this.parseInjectionKey(k);if(j){var T={code:P,priority:j.priority,location:j.location};g.has(j.location)||g.set(j.location,[]),g.get(j.location).push(T),this.debug&&C(\"[HTMLInjector] Collected injection:\",{experiment:l,variant:b,location:j.location,priority:j.priority,codeLength:P.length})}}}catch(B){o={error:B}}finally{try{A&&!A.done&&(y=_.return)&&y.call(_)}finally{if(o)throw o.error}}}}catch(B){r={error:B}}finally{try{h&&!h.done&&(e=d.return)&&e.call(d)}finally{if(r)throw r.error}}}}catch(B){u={error:B}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(u)throw u.error}}try{for(var M=se(g),L=M.next();!L.done;L=M.next()){var R=me(L.value,2),I=R[0],N=R[1];N.sort(function(B,q){return q.priority-B.priority}),this.debug&&C(\"[HTMLInjector] Sorted \".concat(I,\" injections by priority:\"),{location:I,count:N.length,priorities:N.map(function(B){return B.priority})})}}catch(B){a={error:B}}finally{try{L&&!L.done&&(c=M.return)&&c.call(M)}finally{if(a)throw a.error}}return g},v.prototype.inject=function(t){var i,u,n,r;try{for(var e=se(t),o=e.next();!o.done;o=e.next()){var y=me(o.value,2),a=y[0],c=y[1],g=a===\"headStart\"||a===\"bodyStart\"?mr([],me(c),!1).reverse():c;try{for(var m=(n=void 0,se(g)),p=m.next();!p.done;p=m.next()){var f=p.value;this.injectAtLocation(a,f.code)}}catch(l){n={error:l}}finally{try{p&&!p.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}}}catch(l){i={error:l}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}this.debug&&C(\"[HTMLInjector] All injections complete\")},v.prototype.injectAtLocation=function(t,i){var u=\"absmartly-inject-\".concat(t,\"-\").concat(Date.now(),\"-\").concat(Math.random());if(!this.injectedIds.has(u))try{switch(t){case\"headStart\":this.injectHeadStart(i,u);break;case\"headEnd\":this.injectHeadEnd(i,u);break;case\"bodyStart\":this.injectBodyStart(i,u);break;case\"bodyEnd\":this.injectBodyEnd(i,u);break}this.injectedIds.add(u),this.debug&&C(\"[HTMLInjector] Injected at \".concat(t,\":\"),{location:t,codeLength:i.length,injectionId:u})}catch(n){this.debug&&C(\"[HTMLInjector] Error injecting at \".concat(t,\":\"),n)}},v.prototype.injectHeadStart=function(t,i){if(!document.head){this.debug&&C(\"[HTMLInjector] <head> element not found for headStart injection\");return}var u=this.createContainer(t,i);document.head.insertBefore(u,document.head.firstChild)},v.prototype.injectHeadEnd=function(t,i){if(!document.head){this.debug&&C(\"[HTMLInjector] <head> element not found for headEnd injection\");return}var u=this.createContainer(t,i);document.head.appendChild(u)},v.prototype.injectBodyStart=function(t,i){if(!document.body){this.debug&&C(\"[HTMLInjector] <body> element not found for bodyStart injection\");return}var u=this.createContainer(t,i);document.body.insertBefore(u,document.body.firstChild)},v.prototype.injectBodyEnd=function(t,i){if(!document.body){this.debug&&C(\"[HTMLInjector] <body> element not found for bodyEnd injection\");return}var u=this.createContainer(t,i);document.body.appendChild(u)},v.prototype.createContainer=function(t,i){var u=document.createElement(\"div\");return u.id=i,u.setAttribute(\"data-absmartly-injection\",\"true\"),u.innerHTML=t,u},v.prototype.destroy=function(){var t,i;try{for(var u=se(this.injectedIds),n=u.next();!n.done;n=u.next()){var r=n.value,e=document.getElementById(r);e&&e.remove()}}catch(o){t={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}this.injectedIds.clear(),this.debug&&C(\"[HTMLInjector] Destroyed and cleaned up all injections\")},v}();var De=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ze=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Bt=function(){function v(t){this.watchedElements=new WeakMap,this.persistenceObserver=null,this.reapplyingElements=new Set,this.reapplyLogThrottle=new Map,this.appliedChanges=new Map,this.config=t}return v.prototype.watchElement=function(t,i,u){var n=this.watchedElements.get(t);n||(n=new Set,this.watchedElements.set(t,n)),n.add(i),this.appliedChanges.has(i)||this.appliedChanges.set(i,[]);var r=this.appliedChanges.get(i),e=!r.includes(u);if(e&&(r.push(u),this.config.debug)){var o={};u.value&&typeof u.value==\"object\"&&Object.keys(u.value).forEach(function(y){var a=y.replace(/([A-Z])/g,\"-$1\").toLowerCase();o[a]=t.style.getPropertyValue(a)}),C(\"[WATCH-ELEMENT] Started watching element for persistence\",{experimentName:i,selector:u.selector,element:t.tagName,changeType:u.type,value:u.value,currentStyles:u.type===\"style\"?o:void 0,timestamp:Date.now()})}this.persistenceObserver||this.setupPersistenceObserver()},v.prototype.unwatchElement=function(t,i){var u=this.watchedElements.get(t);u&&(u.delete(i),u.size===0&&this.watchedElements.delete(t))},v.prototype.unwatchExperiment=function(t){this.appliedChanges.delete(t)},v.prototype.getAppliedChanges=function(){return this.appliedChanges},v.prototype.clearAll=function(){this.appliedChanges.clear()},v.prototype.destroy=function(){this.persistenceObserver&&(this.persistenceObserver.disconnect(),this.persistenceObserver=null),this.appliedChanges.clear(),this.reapplyingElements.clear(),this.reapplyLogThrottle.clear()},v.prototype.setupPersistenceObserver=function(){var t=this;this.persistenceObserver||(this.config.debug&&C(\"[PERSISTENCE-OBSERVER] Setting up persistence observer\",{timestamp:Date.now()}),this.persistenceObserver=new MutationObserver(function(i){t.config.debug&&C(\"[MUTATION-DETECTED] Persistence observer detected mutations\",{mutationCount:i.length,timestamp:Date.now()}),i.forEach(function(u){var n=u.target;if(t.reapplyingElements.has(n)){t.config.debug&&C(\"[MUTATION-SKIP] Skipping mutation - currently reapplying\",{element:n.tagName});return}var r=t.watchedElements.get(n);if(r){if(t.config.debug){var e=\"mutation:\".concat(n.tagName,\":\").concat(n.getAttribute(\"name\")||n.className),o=Date.now(),y=t.reapplyLogThrottle.get(e)||0;o-y>5e3&&(C(\"[MUTATION-ON-WATCHED] Mutation detected on watched element\",{element:n.tagName,attributeName:u.attributeName,oldValue:u.oldValue,experiments:Array.from(r)}),t.reapplyLogThrottle.set(e,o))}r.forEach(function(a){var c=t.appliedChanges.get(a);c&&c.forEach(function(g){var m,p,f,l,s=!1;if(g.type===\"style\"&&u.attributeName===\"style\"&&g.persistStyle!==!1)s=t.checkStyleOverwritten(n,g.value);else if(g.type===\"attribute\"&&g.persistAttribute!==!1&&g.value&&typeof g.value==\"object\")try{for(var d=De(Object.keys(g.value)),h=d.next();!h.done;h=d.next()){var x=h.value;if(u.attributeName===x){s=t.checkAttributeOverwritten(n,g.value);break}}}catch(j){m={error:j}}finally{try{h&&!h.done&&(p=d.return)&&p.call(d)}finally{if(m)throw m.error}}if(s){t.reapplyingElements.add(n);var b=\"\".concat(a,\"-\").concat(g.selector),S=Date.now(),O=t.reapplyLogThrottle.get(b)||0;if(t.config.debug&&S-O>5e3&&(C(\"[REAPPLY-TRIGGERED] Reapplying after mutation (React/framework conflict detected)\",{experimentName:a,selector:g.selector,element:n.tagName,changeType:g.type,timestamp:S}),t.reapplyLogThrottle.set(b,S),t.reapplyLogThrottle.size>100)){var w=S-6e4;try{for(var _=De(t.reapplyLogThrottle.entries()),A=_.next();!A.done;A=_.next()){var E=Ze(A.value,2),k=E[0],P=E[1];P<w&&t.reapplyLogThrottle.delete(k)}}catch(j){f={error:j}}finally{try{A&&!A.done&&(l=_.return)&&l.call(_)}finally{if(f)throw f.error}}}t.config.onReapply(g,a),setTimeout(function(){t.reapplyingElements.delete(n)},0)}})})}})}),this.persistenceObserver.observe(document.body,{attributes:!0,subtree:!0,attributeOldValue:!0}),this.config.debug&&C(\"[PERSISTENCE-OBSERVER] Setup complete - now observing mutations\",{target:\"document.body\",attributeFilter:[\"style\",\"class\"],subtree:!0,timestamp:Date.now()}))},v.prototype.checkStyleOverwritten=function(t,i){var u,n;try{for(var r=De(Object.entries(i)),e=r.next();!e.done;e=r.next()){var o=Ze(e.value,2),y=o[0],a=o[1],c=y.replace(/([A-Z])/g,\"-$1\").toLowerCase(),g=t.style.getPropertyValue(c),m=t.style.getPropertyPriority(c);if(g!==a||a.includes(\"!important\")&&!m)return!0}}catch(p){u={error:p}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return!1},v.prototype.checkAttributeOverwritten=function(t,i){var u,n;try{for(var r=De(Object.entries(i)),e=r.next();!e.done;e=r.next()){var o=Ze(e.value,2),y=o[0],a=o[1],c=t.getAttribute(y);if(c!==a)return!0}}catch(g){u={error:g}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return!1},v}();var we=function(){return we=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},we.apply(this,arguments)},fe=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},pe=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},be=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Ae=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Xe=function(){function v(t){var i=this,u,n,r,e,o,y,a,c;if(this.mutationObserver=null,this.exposedExperiments=new Set,this.eventListeners=new Map,this.styleManagers=new Map,this.initialized=!1,this.persistenceManager=null,this.antiFlickerTimeout=null,this.antiFlickerStyleId=\"absmartly-antiflicker\",this.config={context:t.context,autoApply:(u=t.autoApply)!==null&&u!==void 0?u:!0,spa:(n=t.spa)!==null&&n!==void 0?n:!0,visibilityTracking:(r=t.visibilityTracking)!==null&&r!==void 0?r:!0,variableName:(e=t.variableName)!==null&&e!==void 0?e:\"__dom_changes\",debug:(o=t.debug)!==null&&o!==void 0?o:!1,hideUntilReady:(y=t.hideUntilReady)!==null&&y!==void 0?y:!1,hideTimeout:(a=t.hideTimeout)!==null&&a!==void 0?a:3e3,hideTransition:(c=t.hideTransition)!==null&&c!==void 0?c:!1},!this.config.context)throw new Error(\"[ABsmartly] Context is required\");console.log(\"[ABsmartly] DOMChangesPluginLite v\".concat(v.VERSION,\" initialized\")),this.config.hideUntilReady&&this.hideContent(),this.domManipulator=new Pt(this.config.debug,this),this.variantExtractor=new Tt(this.config.context,this.config.variableName,this.config.debug),this.exposureTracker=new Rt(this.config.context,this.config.debug),this.htmlInjector=new Nt(this.config.debug),this.persistenceManager=new Bt({debug:this.config.debug,onReapply:function(g,m){C(\"[DOMChangesPluginLite] Re-applying change due to mutation\",{experimentName:m,selector:g.selector,type:g.type}),i.domManipulator.applyChange(g,m)}}),this.readyPromise=this.config.context.ready().then(function(){return C(\"[DOMChangesPluginLite] Context is ready, starting initialization\"),i.initialize()}).catch(function(g){throw C(\"[DOMChangesPluginLite] ERROR during initialization:\",g),g})}return v.prototype.ready=function(){return fe(this,void 0,void 0,function(){return pe(this,function(t){return[2,this.readyPromise]})})},v.prototype.initialize=function(){return fe(this,void 0,void 0,function(){var t,i,u;return pe(this,function(n){switch(n.label){case 0:if(this.initialized)return C(\"Plugin already initialized\"),[2];t=performance.now(),C(\"Initializing ABsmartly DOM Changes Plugin Lite\",{version:v.VERSION,config:{autoApply:this.config.autoApply,spa:this.config.spa,visibilityTracking:this.config.visibilityTracking,DEBUG:he}}),n.label=1;case 1:return n.trys.push([1,4,,5]),this.config.spa?(this.setupMutationObserver(),this.setupURLChangeListener()):C(\"[DOMChangesPluginLite] SPA mode disabled - skipping body observer\"),this.config.autoApply?[4,this.applyInjectionsAndChanges()]:[3,3];case 2:n.sent(),n.label=3;case 3:return this.initialized=!0,this.registerWithContext(),this.emit(\"initialized\"),i=performance.now()-t,Ne(\"Plugin initialization\",i),C(\"[ABsmartly] DOM plugin lite loaded successfully (v\".concat(v.VERSION,\")\")),this.config.debug&&C(\"[ABsmartly] DOM Changes Plugin Lite initialized with debug mode\"),[3,5];case 4:throw u=n.sent(),C(\"[ABsmartly] Failed to initialize plugin:\",u),u;case 5:return[2]}})})},v.prototype.setupMutationObserver=function(){var t=this,i=new MutationObserver(function(r){r.forEach(function(e){e.type===\"childList\"&&e.addedNodes.forEach(function(o){var y;if(o.nodeType===Node.ELEMENT_NODE){var a=o,c=((y=t.persistenceManager)===null||y===void 0?void 0:y.getAppliedChanges())||new Map;c.forEach(function(g,m){g.forEach(function(p){try{var f=a.matches(p.selector)?[a]:Array.from(a.querySelectorAll(p.selector));f.forEach(function(l){t.config.debug&&C(\"[SPA-REAPPLY] Re-applying change to newly added element (React hydration recovery)\",{experimentName:m,selector:p.selector,element:l.tagName,changeType:p.type}),t.domManipulator.applyChange(p,m)})}catch{}})})}})})}),u=function(){i.observe(document.body,{childList:!0,subtree:!0}),t.mutationObserver=i,C(\"[DOMChangesPluginLite] MutationObserver started on document.body\")};if(document.body)u();else{var n=new MutationObserver(function(r,e){document.body&&(e.disconnect(),u())});n.observe(document.documentElement,{childList:!0}),C(\"[DOMChangesPluginLite] Waiting for document.body...\")}},v.prototype.setupURLChangeListener=function(){var t=this,i=function(){return fe(t,void 0,void 0,function(){var r;return pe(this,function(e){switch(e.label){case 0:return r=window.location.href,C(\"[ABsmartly] URL changed, re-evaluating experiments:\",r),[4,this.removeAllChanges()];case 1:return e.sent(),[4,this.applyInjectionsAndChanges()];case 2:return e.sent(),[2]}})})};window.addEventListener(\"popstate\",i);var u=history.pushState,n=history.replaceState;history.pushState=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];u.apply(history,r),i()},history.replaceState=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];n.apply(history,r),i()},this.config.debug&&C(\"[ABsmartly] URL change listener set up for SPA mode\")},v.prototype.removeAllChanges=function(){return fe(this,void 0,void 0,function(){return pe(this,function(t){return this.exposedExperiments.clear(),this.styleManagers.clear(),this.persistenceManager&&this.persistenceManager.clearAll(),this.htmlInjector.destroy(),this.variantExtractor.clearCache(),this.config.debug&&C(\"[ABsmartly] All change tracking cleared for URL change\"),[2]})})},v.prototype.applyInjectionsAndChanges=function(){return fe(this,void 0,void 0,function(){var t,i,u,n,r;return pe(this,function(e){switch(e.label){case 0:t=performance.now(),i=window.location.href,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.config.context.ready()];case 2:return e.sent(),[3,4];case 3:return u=e.sent(),C(\"[ABsmartly] Failed to wait for context ready:\",u),[2];case 4:return n=this.variantExtractor.extractAllInjectHTML(),[4,Promise.all([this.applyHTMLInjections(n,i),this.applyChanges()])];case 5:return e.sent(),r=performance.now()-t,Ne(\"Apply injections and changes (parallel)\",r),this.config.debug&&C(\"[ABsmartly] HTML injections and DOM changes applied in parallel\",{duration:\"\".concat(r.toFixed(2),\"ms\"),currentURL:i}),[2]}})})},v.prototype.applyHTMLInjections=function(t){return fe(this,arguments,void 0,function(i,u){var n;return u===void 0&&(u=window.location.href),pe(this,function(r){return i.size===0?(this.config.debug&&C(\"[ABsmartly] No HTML injections found\"),[2]):(n=this.htmlInjector.collectInjections(i,u),this.htmlInjector.inject(n),this.config.debug&&C(\"[ABsmartly] HTML injections complete\",{experimentsWithInjections:i.size,totalLocations:n.size,currentUrl:u}),[2])})})},v.prototype.applyChanges=function(t){return fe(this,void 0,void 0,function(){var i,u,n,r,e,o,y,a,c,g,m,p,f,l,s,d,h,x,b,S,O,w,_,G,A,E,k,P,j,T,M,L,R,I,N,B,q,F,D,W,G,H,Y,ue,$,U,V,K,Z,X;return pe(this,function(J){switch(J.label){case 0:i=performance.now(),u=window.location.href,C(\"Starting to apply changes\",{specificExperiment:t||\"all\",url:u,action:\"apply_start\"}),this.config.debug&&(C(\"[ABsmartly] === DOM Changes Application Starting ===\"),C(\"[ABsmartly] Target:\",t||\"all experiments\"),C(\"[ABsmartly] Current URL:\",u),C(\"[ABsmartly] Context ready:\",!0)),J.label=1;case 1:return J.trys.push([1,3,,4]),[4,this.config.context.ready()];case 2:return J.sent(),[3,4];case 3:return n=J.sent(),C(\"[ABsmartly] Failed to wait for context ready:\",n),[2];case 4:this.variantExtractor.clearCache(),r=this.getAllExperimentsData(),e=0,o=new Map,C(\"[ABsmartly] Experiments to process:\",Array.from(r.keys())),C(\"[ABsmartly] Total experiments with changes:\",r.size);try{for(y=be(r),a=y.next();!a.done;a=y.next())if(c=Ae(a.value,2),g=c[0],m=c[1],!(t&&g!==t)){if(p=this.config.context.peek(g),f=m.variantData,l=m.urlFilter,s=m.globalDefaults,d=this.variantExtractor.anyVariantMatchesURL(g,u),!d){C(\"[ABsmartly] Skipping experiment '\".concat(g,\"' - no variant matches URL: \").concat(u));continue}if(h=this.shouldApplyVisualChanges(f,l,u),x=this.extractChangesFromData(f,s),b=this.extractAllVariantChanges(g),S=b.some(function(z){return z&&z.length>0}),!S){this.config.debug&&C(\"[ABsmartly] Skipping experiment '\".concat(g,\"' - no variants have changes\"));continue}if(O={total:x?.length||0,success:0,pending:0},this.config.debug&&C(\"[ABsmartly] Processing experiment '\".concat(g,\"' (variant \").concat(p,\"):\"),{urlMatches:h,changeCount:x?.length||0,userVariantHasChanges:(x?.length||0)>0,changes:x?.map(function(z){return{type:z.type,selector:z.selector,trigger:z.trigger_on_view?\"viewport\":\"immediate\"}})||[]}),h&&x&&x.length>0)try{for(w=($=void 0,be(x)),_=w.next();!_.done;_=w.next())if(G=_.value,A=this.domManipulator.applyChange(G,g),A)e++,O.success++;else if(G.type!==\"create\"&&G.type!==\"styleRules\")try{E=document.querySelectorAll(G.selector),E.length===0&&(this.config.spa||G.waitForElement)&&O.pending++}catch(z){this.config.debug&&C(\"[ABsmartly] Invalid selector: \".concat(G.selector),z)}}catch(z){$={error:z}}finally{try{_&&!_.done&&(U=w.return)&&U.call(w)}finally{if($)throw $.error}}else x&&x.length>0&&C(\"[ABsmartly] Experiment '\".concat(g,\"' variant \").concat(p,\" doesn't match URL filter or has no changes, but setting up tracking for SRM prevention\"));k=!1,P=!1,j=this.variantExtractor.getAllVariantsData(g),this.config.debug&&(C(\"[ABsmartly] Checking trigger types for experiment '\".concat(g,\"' on URL: \").concat(u),{allVariantsDataSize:j.size,allVariantChangesLength:b.length}),j.forEach(function(z,_e){C(\"[ABsmartly] Variant \".concat(_e,\" data structure:\"),{isArray:Array.isArray(z),isObject:typeof z==\"object\",hasUrlFilter:z&&typeof z==\"object\"&&!Array.isArray(z)&&\"urlFilter\"in z,keys:z&&typeof z==\"object\"&&!Array.isArray(z)?Object.keys(z):\"N/A\"})}));try{for(T=(V=void 0,be(j)),M=T.next();!M.done;M=T.next())if(L=Ae(M.value,2),R=L[0],I=L[1],N=b[R],!(!N||N.length===0)){if(B=!0,I&&typeof I==\"object\"&&!Array.isArray(I)&&(q=I,\"urlFilter\"in q&&q.urlFilter&&(F=q,B=ce.matches(F.urlFilter,u),this.config.debug&&C(\"[ABsmartly] Variant \".concat(R,\" has URL filter, matches: \").concat(B)))),B){try{for(D=(Z=void 0,be(N)),W=D.next();!W.done&&(G=W.value,G.trigger_on_view?k=!0:P=!0,!(k&&P));W=D.next());}catch(z){Z={error:z}}finally{try{W&&!W.done&&(X=D.return)&&X.call(D)}finally{if(Z)throw Z.error}}this.config.debug&&C(\"[ABsmartly] Variant \".concat(R,\" matches URL - hasImmediate: \").concat(P,\", hasViewport: \").concat(k))}else this.config.debug&&C(\"[ABsmartly] Variant \".concat(R,\" does NOT match URL - skipping\"));if(k&&P)break}}catch(z){V={error:z}}finally{try{M&&!M.done&&(K=T.return)&&K.call(T)}finally{if(V)throw V.error}}this.config.debug&&C(\"[ABsmartly] Final trigger decision for '\".concat(g,\"': hasImmediate=\").concat(P,\", hasViewport=\").concat(k)),(k||P)&&this.exposureTracker.registerExperiment(g,p||0,x||[],b,P,k),o.set(g,O),Et(g,O.total,O.success,O.pending)}}catch(z){Y={error:z}}finally{try{a&&!a.done&&(ue=y.return)&&ue.call(y)}finally{if(Y)throw Y.error}}return H=performance.now()-i,Ne(\"Apply changes\",H,{totalApplied:e,experiments:o.size}),this.config.debug&&(C(\"[ABsmartly] === DOM Changes Application Complete ===\"),C(\"[ABsmartly] Summary:\",{totalChangesApplied:e,experimentsProcessed:o.size,duration:\"\".concat(H.toFixed(2),\"ms\"),experiments:Array.from(o.entries()).map(function(z){var _e=Ae(z,2),sr=_e[0],Re=_e[1];return{name:sr,total:Re.total,success:Re.success,pending:Re.pending,pendingReason:Re.pending>0?\"Elements not found yet (SPA mode will retry)\":void 0}})})),this.config.hideUntilReady&&this.showContent(),this.emit(\"changes-applied\",{count:e,experimentName:t}),[2]}})})},v.prototype.getAllExperimentsData=function(){var t,i,u=new Map,n=this.variantExtractor.extractAllChanges();try{for(var r=be(n),e=r.next();!e.done;e=r.next()){var o=Ae(e.value,1),y=o[0],a=this.config.context.peek(y);if(a!=null){var c=this.variantExtractor.getAllVariantsData(y),g=c.get(a);if(g){var m=null,p={};if(g&&typeof g==\"object\"&&!Array.isArray(g)&&\"changes\"in g){var f=g;m=f.urlFilter,p={waitForElement:f.waitForElement,persistStyle:f.persistStyle,important:f.important,observerRoot:f.observerRoot}}u.set(y,{variantData:g,urlFilter:m,globalDefaults:p})}}}}catch(l){t={error:l}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return u},v.prototype.extractChangesFromData=function(t,i){var u=null;return Array.isArray(t)?u=t:t&&typeof t==\"object\"&&\"changes\"in t&&(u=t.changes),!u||u.length===0?null:u.map(function(n){var r,e,o,y;return we(we({},n),{waitForElement:(r=n.waitForElement)!==null&&r!==void 0?r:i.waitForElement,persistStyle:(e=n.persistStyle)!==null&&e!==void 0?e:i.persistStyle,important:(o=n.important)!==null&&o!==void 0?o:i.important,observerRoot:(y=n.observerRoot)!==null&&y!==void 0?y:i.observerRoot})})},v.prototype.extractAllVariantChanges=function(t){for(var i=this.variantExtractor.getAllVariantChanges(t),u=this.variantExtractor.getAllVariantsData(t),n=[],r=function(o){var y=i[o],a=u.get(o);if(!y||y.length===0)return n.push([]),\"continue\";var c={};if(a&&typeof a==\"object\"&&!Array.isArray(a)&&\"changes\"in a){var g=a;c={waitForElement:g.waitForElement,persistStyle:g.persistStyle,important:g.important,observerRoot:g.observerRoot}}var m=y.map(function(p){var f,l,s,d;return we(we({},p),{waitForElement:(f=p.waitForElement)!==null&&f!==void 0?f:c.waitForElement,persistStyle:(l=p.persistStyle)!==null&&l!==void 0?l:c.persistStyle,important:(s=p.important)!==null&&s!==void 0?s:c.important,observerRoot:(d=p.observerRoot)!==null&&d!==void 0?d:c.observerRoot})});n.push(m)},e=0;e<i.length;e++)r(e);return n},v.prototype.shouldApplyVisualChanges=function(t,i,u){return Array.isArray(t)||!i?!0:ce.matches(i,u)},v.prototype.hasChanges=function(t){return this.domManipulator.hasChanges(t)},v.prototype.applyChange=function(t,i){C(\"Applying single change via public API\",{experimentName:i,selector:t.selector,changeType:t.type});try{var u=this.domManipulator.applyChange(t,i);return u&&this.emit(\"change_applied\",{experimentName:i,change:t}),u}catch(n){return this.config.debug&&C(\"[ABsmartly] Error applying change:\",n),!1}},v.prototype.on=function(t,i){var u=this.eventListeners.get(t)||[];u.push(i),this.eventListeners.set(t,u)},v.prototype.off=function(t,i){if(!i)this.eventListeners.delete(t);else{var u=this.eventListeners.get(t)||[],n=u.indexOf(i);n!==-1&&u.splice(n,1)}},v.prototype.emit=function(t,i){var u,n,r=this.eventListeners.get(t)||[];try{for(var e=be(r),o=e.next();!o.done;o=e.next()){var y=o.value;try{y(i)}catch(a){C(\"[ABsmartly] Error in event listener for \".concat(t,\":\"),a)}}}catch(a){u={error:a}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(u)throw u.error}}},v.prototype.getStyleManager=function(t){var i=\"absmartly-styles-\".concat(t),u=this.styleManagers.get(t);return u||(u=new Mt(i,this.config.debug),this.styleManagers.set(t,u)),u},v.prototype.buildCssRule=function(t,i,u){u===void 0&&(u=!0);var n=Object.entries(i).map(function(r){var e=Ae(r,2),o=e[0],y=e[1],a=o.replace(/([A-Z])/g,\"-$1\").toLowerCase(),c=u?\" !important\":\"\";return\"  \".concat(a,\": \").concat(y).concat(c,\";\")}).join(`\n`);return\"\".concat(t,` {\n`).concat(n,`\n}`)},v.prototype.buildStateRules=function(t,i,u){u===void 0&&(u=!0);var n=[];return i.normal&&n.push(this.buildCssRule(t,i.normal,u)),i.hover&&n.push(this.buildCssRule(\"\".concat(t,\":hover\"),i.hover,u)),i.active&&n.push(this.buildCssRule(\"\".concat(t,\":active\"),i.active,u)),i.focus&&n.push(this.buildCssRule(\"\".concat(t,\":focus\"),i.focus,u)),n.join(`\n\n`)},v.prototype.refreshExperiments=function(){this.config.debug&&C(\"[ABsmartly] Refreshing experiments and clearing cache\"),this.variantExtractor.clearCache(),this.config.autoApply&&this.applyInjectionsAndChanges()},v.prototype.destroy=function(){this.domManipulator.destroy(),this.exposureTracker.destroy(),this.htmlInjector.destroy(),this.styleManagers.forEach(function(i){return i.destroy()}),this.styleManagers.clear(),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.persistenceManager&&(this.persistenceManager.destroy(),this.persistenceManager=null),this.antiFlickerTimeout!==null&&(clearTimeout(this.antiFlickerTimeout),this.antiFlickerTimeout=null);var t=document.getElementById(this.antiFlickerStyleId);t&&t.remove(),this.eventListeners.clear(),this.exposedExperiments.clear(),this.unregisterFromContext(),this.initialized=!1,this.config.debug&&C(\"[ABsmartly] DOM Changes Plugin Lite destroyed\")},v.prototype.registerWithContext=function(){this.config.context&&(this.config.context.__plugins||(this.config.context.__plugins={}),this.config.context.__plugins.domPlugin={name:\"DOMChangesPluginLite\",version:v.VERSION,initialized:!0,capabilities:[\"spa\",\"visibility\"],instance:this,timestamp:Date.now()},this.config.context.__domPlugin=this.config.context.__plugins.domPlugin,this.config.debug&&C(\"[ABsmartly] DOMChangesPluginLite registered with context at __plugins.domPlugin\"))},v.prototype.unregisterFromContext=function(){var t;this.config.context&&(!((t=this.config.context.__plugins)===null||t===void 0)&&t.domPlugin&&delete this.config.context.__plugins.domPlugin,this.config.context.__domPlugin&&delete this.config.context.__domPlugin,this.config.debug&&C(\"[ABsmartly] DOMChangesPluginLite unregistered from context\"))},v.prototype.hideContent=function(){var t=this,i=this.config.hideUntilReady;if(i&&!document.getElementById(this.antiFlickerStyleId)){var u=document.createElement(\"style\");u.id=this.antiFlickerStyleId;var n=this.config.hideTransition!==!1;n?u.textContent=`\n        `.concat(i,` {\n          visibility: hidden !important;\n          opacity: 0 !important;\n        }\n      `):u.textContent=`\n        `.concat(i,` {\n          visibility: hidden !important;\n        }\n      `),document.head.appendChild(u),this.antiFlickerTimeout=window.setTimeout(function(){t.config.debug&&C(\"[ABsmartly] Anti-flicker timeout reached (\".concat(t.config.hideTimeout,\"ms), showing content\")),t.showContent()},this.config.hideTimeout),this.config.debug&&C(\"[ABsmartly] Anti-flicker enabled (selector: '\".concat(i,\"', transition: \").concat(n?this.config.hideTransition:\"none\",\", timeout: \").concat(this.config.hideTimeout,\"ms)\"))}},v.prototype.showContent=function(){var t=this;this.antiFlickerTimeout!==null&&(clearTimeout(this.antiFlickerTimeout),this.antiFlickerTimeout=null);var i=document.getElementById(this.antiFlickerStyleId);if(i){var u=this.config.hideTransition!==!1;if(u){var n=this.config.hideUntilReady;i.textContent=`\n        `.concat(n,` {\n          opacity: 0 !important;\n          transition: opacity `).concat(this.config.hideTransition,` !important;\n        }\n      `),i.offsetHeight,i.textContent=`\n        `.concat(n,` {\n          opacity: 1 !important;\n          transition: opacity `).concat(this.config.hideTransition,` !important;\n        }\n      `);var r=parseFloat(this.config.hideTransition)*1e3;setTimeout(function(){i.remove(),t.config.debug&&C(\"[ABsmartly] Anti-flicker fade-in complete, style removed\")},r),this.config.debug&&C(\"[ABsmartly] Anti-flicker fading in with transition: \".concat(this.config.hideTransition))}else i.remove(),this.config.debug&&C(\"[ABsmartly] Anti-flicker removed, content now visible\")}},v.prototype.watchElement=function(t,i,u){this.persistenceManager&&this.persistenceManager.watchElement(t,i,u)},v.prototype.unwatchElement=function(t,i){this.persistenceManager&&this.persistenceManager.unwatchElement(t,i)},v.VERSION=typeof __VERSION__<\"u\"?__VERSION__:\"1.1.2\",v}();var Ut=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},Vt=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ke=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Fe=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Dt=function(){function v(t){var i,u,n,r,e;if(this.initialized=!1,!t.context)throw new Error(\"[OverridesPluginLite] Context is required\");this.config={context:t.context,cookieName:(i=t.cookieName)!==null&&i!==void 0?i:\"absmartly_overrides\",useQueryString:(u=t.useQueryString)!==null&&u!==void 0?u:!0,queryPrefix:(n=t.queryPrefix)!==null&&n!==void 0?n:\"exp_\",persistQueryToCookie:(r=t.persistQueryToCookie)!==null&&r!==void 0?r:!1,debug:(e=t.debug)!==null&&e!==void 0?e:!1},this.config.debug&&C(\"[OverridesPluginLite] Initialized with config:\",{cookieName:this.config.cookieName,useQueryString:this.config.useQueryString,queryPrefix:this.config.queryPrefix})}return v.prototype.ready=function(){return Ut(this,void 0,void 0,function(){var t,i,u,n,r,e,o,y,a,c,g;return Vt(this,function(m){if(this.initialized)return this.config.debug&&C(\"[OverridesPluginLite] Already initialized\"),[2];if(this.initialized=!0,this.registerWithContext(),t={},this.config.useQueryString&&typeof window<\"u\"&&(t=this.getQueryStringOverrides(),this.config.persistQueryToCookie&&this.config.cookieName&&Object.keys(t).length>0&&this.persistOverridesToCookie(t)),Object.keys(t).length===0&&this.config.cookieName&&(t=this.getCookieOverrides()),Object.keys(t).length===0)return this.config.debug&&C(\"[OverridesPluginLite] No overrides found\"),[2];try{for(i=ke(Object.entries(t)),u=i.next();!u.done;u=i.next()){if(n=Fe(u.value,2),r=n[0],e=n[1],o=typeof e==\"number\"?e:e.variant,isNaN(o)){this.config.debug&&C(\"[OverridesPluginLite] Skipping invalid variant for \".concat(r,\": \").concat(o));continue}(g=(c=this.config.context).override)===null||g===void 0||g.call(c,r,o),this.config.debug&&C(\"[OverridesPluginLite] Override: \".concat(r,\" -> variant \").concat(o))}}catch(p){y={error:p}}finally{try{u&&!u.done&&(a=i.return)&&a.call(i)}finally{if(y)throw y.error}}return[2]})})},v.prototype.initialize=function(){return Ut(this,void 0,void 0,function(){return Vt(this,function(t){return[2,this.ready()]})})},v.prototype.getQueryStringOverrides=function(){var t,i;if(typeof window>\"u\"||!window.location)return{};var u=new URLSearchParams(window.location.search),n={},r=this.config.queryPrefix;try{for(var e=ke(u.entries()),o=e.next();!o.done;o=e.next()){var y=Fe(o.value,2),a=y[0],c=y[1];if(a.startsWith(r)){var g=a.substring(r.length);if(g){var m=c.split(\",\"),p=parseInt(m[0],10);isNaN(p)||(m.length===1?n[g]=p:n[g]={variant:p,env:m[1]?parseInt(m[1],10):void 0,id:m[2]?parseInt(m[2],10):void 0})}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}return this.config.debug&&Object.keys(n).length>0&&C(\"[OverridesPluginLite] Query string overrides:\",n),n},v.prototype.getCookieOverrides=function(){var t,i;if(typeof document>\"u\")return{};var u=this.config.cookieName+\"=\",n=document.cookie.split(\";\");try{for(var r=ke(n),e=r.next();!e.done;e=r.next()){var o=e.value;if(o=o.trim(),o.indexOf(u)===0){var y=decodeURIComponent(o.substring(u.length));return this.parseCookieValue(y)}}}catch(a){t={error:a}}finally{try{e&&!e.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return{}},v.prototype.parseCookieValue=function(t){var i,u;if(!t)return{};var n={},r=t;if(t.includes(\"|\")){var e=t.split(\"|\");r=e[e.length-1]}if(!r)return{};var o=r.split(\",\");try{for(var y=ke(o),a=y.next();!a.done;a=y.next()){var c=a.value,g=Fe(c.split(\":\"),2),m=g[0],p=g[1];if(!(!m||!p)){var f=decodeURIComponent(m),e=p.split(\".\"),l=parseInt(e[0],10);isNaN(l)||(e.length===1?n[f]=l:n[f]={variant:l,env:e[1]?parseInt(e[1],10):void 0,id:e[2]?parseInt(e[2],10):void 0})}}}catch(s){i={error:s}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}return n},v.prototype.persistOverridesToCookie=function(t){var i,u;if(!(!this.config.cookieName||typeof document>\"u\")){var n=[];try{for(var r=ke(Object.entries(t)),e=r.next();!e.done;e=r.next()){var o=Fe(e.value,2),y=o[0],a=o[1],c=encodeURIComponent(y);if(typeof a==\"number\")n.push(\"\".concat(c,\":\").concat(a));else{var g=\"\".concat(c,\":\").concat(a.variant);a.env!==void 0&&(g+=\".\".concat(a.env)),a.id!==void 0&&(g+=\".\".concat(a.id)),n.push(g)}}}catch(f){i={error:f}}finally{try{e&&!e.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}var m=n.join(\",\"),p=86400;document.cookie=\"\".concat(this.config.cookieName,\"=\").concat(encodeURIComponent(m),\";path=/;max-age=\").concat(p),this.config.debug&&C(\"[OverridesPluginLite] Persisted to cookie:\",m)}},v.prototype.registerWithContext=function(){this.config.context&&(this.config.context.__plugins||(this.config.context.__plugins={}),this.config.context.__plugins.overridesPlugin={name:\"OverridesPluginLite\",version:\"1.0.0\",initialized:!0,capabilities:[\"cookie-overrides\",\"query-overrides\"],instance:this,timestamp:Date.now()},this.config.debug&&C(\"[OverridesPluginLite] Registered with context at __plugins.overridesPlugin\"))},v.prototype.unregisterFromContext=function(){var t,i;!((i=(t=this.config.context)===null||t===void 0?void 0:t.__plugins)===null||i===void 0)&&i.overridesPlugin&&(delete this.config.context.__plugins.overridesPlugin,this.config.debug&&C(\"[OverridesPluginLite] Unregistered from context\"))},v.prototype.destroy=function(){this.initialized=!1,this.unregisterFromContext()},v}();var br=function(){var v=function(t,i){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,n){u.__proto__=n}||function(u,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(u[r]=n[r])},v(t,i)};return function(t,i){if(typeof i!=\"function\"&&i!==null)throw new TypeError(\"Class extends value \"+String(i)+\" is not a constructor or null\");v(t,i);function u(){this.constructor=t}t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),re=function(){return re=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},re.apply(this,arguments)},Ce=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},Pe=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ae=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},de=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},wr=function(v){br(t,v);function t(i){var u,n,r,e,o,y,a,c,g,m,p,f,l,s,d,h,x,b,S,O,w,_=v.call(this,{context:i.context,cookieName:i.cookieName,useQueryString:(u=i.useQueryString)!==null&&u!==void 0?u:typeof window<\"u\",queryPrefix:(n=i.queryPrefix)!==null&&n!==void 0?n:\"exp_\",persistQueryToCookie:(r=i.persistQueryToCookie)!==null&&r!==void 0?r:!1,debug:(e=i.debug)!==null&&e!==void 0?e:!1})||this;if(_.onExperimentsAddedCallbacks=[],!i.context)throw new Error(\"[OverridesPlugin] Context is required\");_.isServerSide=typeof window>\"u\";var A=i.sdkEndpoint;if(!A){var E=i.context;E._endpoint?A=E._endpoint:!((o=E._config)===null||o===void 0)&&o.endpoint?A=E._config.endpoint:!((y=E._dataProvider)===null||y===void 0)&&y._endpoint?A=E._dataProvider._endpoint:!((a=E._options)===null||a===void 0)&&a.endpoint&&(A=E._options.endpoint.replace(\"/v1\",\"\"))}if(!A&&!i.absmartlyEndpoint){var E=i.context;if(!E._endpoint&&!(!((c=E._config)===null||c===void 0)&&c.endpoint)&&!(!((g=E._dataProvider)===null||g===void 0)&&g._endpoint)&&!(!((m=E._options)===null||m===void 0)&&m.endpoint))throw new Error(\"[OverridesPlugin] SDK endpoint must be provided if not available from context\")}return _.fullConfig={context:i.context,cookieName:i.cookieName,cookieAdapter:i.cookieAdapter,cookieOptions:(p=i.cookieOptions)!==null&&p!==void 0?p:{path:\"/\"},useQueryString:(f=i.useQueryString)!==null&&f!==void 0?f:!_.isServerSide,queryPrefix:(l=i.queryPrefix)!==null&&l!==void 0?l:\"exp_\",envParam:(s=i.envParam)!==null&&s!==void 0?s:\"env\",persistQueryToCookie:(d=i.persistQueryToCookie)!==null&&d!==void 0?d:!1,url:i.url,absmartlyEndpoint:(h=i.absmartlyEndpoint)!==null&&h!==void 0?h:\"\",sdkEndpoint:A||\"\",domChangesFieldName:(x=i.domChangesFieldName)!==null&&x!==void 0?x:\"__dom_changes\",sdkApiKey:(b=i.sdkApiKey)!==null&&b!==void 0?b:\"\",application:(S=i.application)!==null&&S!==void 0?S:\"\",environment:(O=i.environment)!==null&&O!==void 0?O:\"\",debug:(w=i.debug)!==null&&w!==void 0?w:!1},_.fullConfig.debug&&C(\"[OverridesPlugin] Initialized with config:\",{isServerSide:_.isServerSide,cookieName:_.fullConfig.cookieName,useQueryString:_.fullConfig.useQueryString,queryPrefix:_.fullConfig.queryPrefix,envParam:_.fullConfig.envParam,persistQueryToCookie:_.fullConfig.persistQueryToCookie,sdkEndpoint:_.fullConfig.sdkEndpoint,absmartlyEndpoint:_.fullConfig.absmartlyEndpoint}),_}return t.prototype.ready=function(){return Ce(this,void 0,void 0,function(){var i;return Pe(this,function(u){switch(u.label){case 0:return this.initialized?(this.fullConfig.debug&&C(\"[OverridesPlugin] Already initialized, skipping re-initialization\"),[2]):(this.initialized=!0,this.registerWithContext(),i=this.getOverrides(),Object.keys(i.overrides).length===0?(this.fullConfig.debug&&C(\"[OverridesPlugin] No overrides found\"),[2]):[4,this.applyOverridesWithFetching(i.overrides,i.devEnv)]);case 1:return u.sent(),[2]}})})},t.prototype.initialize=function(){return Ce(this,void 0,void 0,function(){return Pe(this,function(i){return[2,this.ready()]})})},t.prototype.getOverrides=function(){var i={overrides:{},devEnv:null};if(this.fullConfig.cookieName){var u=this.getEnhancedCookieOverrides();i.overrides=re({},u.overrides),i.devEnv=u.devEnv}if(this.fullConfig.useQueryString){var n=this.getEnhancedQueryStringOverrides();Object.keys(n.overrides).length>0&&(i.overrides=re(re({},i.overrides),n.overrides),n.devEnv!==null&&(i.devEnv=n.devEnv),this.fullConfig.persistQueryToCookie&&this.fullConfig.cookieName&&this.persistEnhancedOverridesToCookie(i))}return i},t.prototype.getEnhancedQueryStringOverrides=function(){var i,u;try{var n=void 0;if(this.isServerSide){if(!this.fullConfig.url)return{overrides:{},devEnv:null};var r=typeof this.fullConfig.url==\"string\"?new URL(this.fullConfig.url):this.fullConfig.url;n=new URLSearchParams(r.search)}else n=new URLSearchParams(window.location.search);var e={},o=null;if(this.fullConfig.envParam){var y=n.get(this.fullConfig.envParam);y&&(o=y)}var a=this.fullConfig.queryPrefix;try{for(var c=ae(n.entries()),g=c.next();!g.done;g=c.next()){var m=de(g.value,2),p=m[0],f=m[1];if(p.startsWith(a)){var l=p.substring(a.length);if(l){var s=f.split(\",\"),d=parseInt(s[0],10);isNaN(d)||(s.length===1?e[l]=d:e[l]={variant:d,env:s[1]?parseInt(s[1],10):void 0,id:s[2]?parseInt(s[2],10):void 0})}}}}catch(h){i={error:h}}finally{try{g&&!g.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return this.fullConfig.debug&&Object.keys(e).length>0&&C(\"[OverridesPlugin] Query string overrides:\",e,\"env:\",o),{overrides:e,devEnv:o}}catch(h){return C(\"[OverridesPlugin] Error parsing query string:\",h),{overrides:{},devEnv:null}}},t.prototype.getEnhancedCookieOverrides=function(){var i,u;if(!this.fullConfig.cookieName)return{overrides:{},devEnv:null};var n=null;if(this.fullConfig.cookieAdapter)n=this.fullConfig.cookieAdapter.get(this.fullConfig.cookieName);else if(typeof document<\"u\"){var r=this.fullConfig.cookieName+\"=\",e=document.cookie.split(\";\");try{for(var o=ae(e),y=o.next();!y.done;y=o.next()){var a=y.value;if(a=a.trim(),a.indexOf(r)===0){n=decodeURIComponent(a.substring(r.length));break}}}catch(g){i={error:g}}finally{try{y&&!y.done&&(u=o.return)&&u.call(o)}finally{if(i)throw i.error}}}this.fullConfig.debug&&n&&C(\"[OverridesPlugin] Raw cookie value:\",n);var c=this.parseEnhancedCookieValue(n);return this.fullConfig.debug&&Object.keys(c.overrides).length>0&&C(\"[OverridesPlugin] Parsed cookie overrides:\",c),c},t.prototype.parseEnhancedCookieValue=function(i){var u,n;if(!i)return{overrides:{},devEnv:null};try{var r=null,e=i;if(i.startsWith(\"devEnv=\")){var o=i.split(\"|\");r=decodeURIComponent(o[0].substring(7)),e=o[1]||\"\"}var y={};if(e){var a=e.split(\",\");try{for(var c=ae(a),g=c.next();!g.done;g=c.next()){var m=g.value,p=de(m.split(\":\"),2),f=p[0],l=p[1];if(!(!f||!l)){var s=decodeURIComponent(f),o=l.split(\".\"),d=parseInt(o[0],10);isNaN(d)||(o.length===1?y[s]=d:y[s]={variant:d,env:o[1]?parseInt(o[1],10):void 0,id:o[2]?parseInt(o[2],10):void 0})}}}catch(h){u={error:h}}finally{try{g&&!g.done&&(n=c.return)&&n.call(c)}finally{if(u)throw u.error}}}return{overrides:y,devEnv:r}}catch(h){return C(\"[OverridesPlugin] Error parsing overrides:\",h),{overrides:{},devEnv:null}}},t.prototype.persistEnhancedOverridesToCookie=function(i){var u,n;if(this.fullConfig.cookieName){var r=[];i.devEnv&&r.push(\"devEnv=\".concat(encodeURIComponent(i.devEnv)));var e=[];try{for(var o=ae(Object.entries(i.overrides)),y=o.next();!y.done;y=o.next()){var a=de(y.value,2),c=a[0],g=a[1],m=encodeURIComponent(c);if(typeof g==\"number\")e.push(\"\".concat(m,\":\").concat(g));else{var p=g,f=\"\".concat(m,\":\").concat(p.variant);p.env!==void 0&&(f+=\".\".concat(p.env)),p.id!==void 0&&(f+=\".\".concat(p.id)),e.push(f)}}}catch(b){u={error:b}}finally{try{y&&!y.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}var l=r.length>0?\"\".concat(r.join(\"|\"),\"|\").concat(e.join(\",\")):e.join(\",\");if(this.fullConfig.cookieAdapter){var s=re({},this.fullConfig.cookieOptions);this.isServerSide&&(s.httpOnly===void 0&&(s.httpOnly=!0),s.secure===void 0&&(s.secure=!0),s.sameSite===void 0&&(s.sameSite=\"lax\")),this.fullConfig.cookieAdapter.set(this.fullConfig.cookieName,l,s)}else if(typeof document<\"u\"){var s=this.fullConfig.cookieOptions||{},d=\"\".concat(this.fullConfig.cookieName,\"=\").concat(encodeURIComponent(l));s.path&&(d+=\";path=\".concat(s.path)),s.maxAge&&(d+=\";max-age=\".concat(s.maxAge));var h=s;if(h.expires){var x=h.expires instanceof Date?h.expires.toUTCString():h.expires;d+=\";expires=\".concat(x)}s.domain&&(d+=\";domain=\".concat(s.domain)),s.secure&&(d+=\";secure\"),s.sameSite&&(d+=\";samesite=\".concat(s.sameSite)),document.cookie=d}this.fullConfig.debug&&C(\"[OverridesPlugin] Persisted to cookie:\",l)}},t.prototype.applyOverridesWithFetching=function(i,u){return Ce(this,void 0,void 0,function(){var n,r,e,o,y,a,s,c,g,m,p,f,l,s,d,h,x,b,S;return Pe(this,function(O){switch(O.label){case 0:C(\"[OverridesPlugin] Initializing with overrides:\",i),C(\"[OverridesPlugin] Dev environment:\",u),n=[],r=new Set;try{for(e=ae(Object.entries(i)),o=e.next();!o.done;o=e.next())y=de(o.value,2),a=y[0],s=y[1],c=typeof s==\"number\"?{variant:s}:s,c.env===1?(C(\"[OverridesPlugin] \".concat(a,\" categorized as DEV experiment (env=1)\")),n.push([a,c])):c.env===2&&c.id?(C(\"[OverridesPlugin] \".concat(a,\" categorized as DRAFT experiment (env=2, id=\").concat(c.id,\")\")),r.add(c.id)):C(\"[OverridesPlugin] \".concat(a,\" categorized as RUNNING experiment (env=\").concat(c.env||0,\")\"))}catch(w){h={error:w}}finally{try{o&&!o.done&&(x=e.return)&&x.call(e)}finally{if(h)throw h.error}}return C(\"[OverridesPlugin] Categorization summary:\",{total_overrides:Object.keys(i).length,dev_experiments:n.length,draft_experiments:r.size,running_experiments:Object.keys(i).length-n.length-r.size,dev_environment:u}),r.size>0?(C(\"[OverridesPlugin] Will fetch \".concat(r.size,\" DRAFT experiments from API\")),[4,this.fetchFromAPI(Array.from(r))]):[3,2];case 1:O.sent(),O.label=2;case 2:return g=u||this.fullConfig.environment||null,n.length>0&&g?(C(\"[OverridesPlugin] Will fetch \".concat(n.length,\" DEV experiments for environment: \").concat(g)),[4,this.fetchFromDevSDK(n,g)]):[3,4];case 3:return O.sent(),[3,5];case 4:n.length>0&&C(\"[OverridesPlugin] Have \".concat(n.length,\" DEV experiments but NO devEnv specified - NOT fetching\")),O.label=5;case 5:try{for(m=ae(Object.entries(i)),p=m.next();!p.done;p=m.next())f=de(p.value,2),l=f[0],s=f[1],d=typeof s==\"number\"?s:s.variant,this.fullConfig.context.override(l,d),this.fullConfig.debug&&C(\"[OverridesPlugin] Override: \".concat(l,\" -> variant \").concat(d))}catch(w){b={error:w}}finally{try{p&&!p.done&&(S=m.return)&&S.call(m)}finally{if(b)throw b.error}}return[2]}})})},t.prototype.fetchFromAPI=function(i){return Ce(this,void 0,void 0,function(){var u,n,r,e,o,y;return Pe(this,function(a){switch(a.label){case 0:if(i.length===0)return this.fullConfig.debug&&C(\"[OverridesPlugin] No experiment IDs to fetch from API\"),[2];u=this.fullConfig.absmartlyEndpoint,u||(u=this.fullConfig.sdkEndpoint.replace(\".absmartly.io\",\".absmartly.com\")),u.endsWith(\"/v1\")&&(u=u.slice(0,-3)),u.startsWith(\"http\")||(u=\"https://\".concat(u)),n=\"\".concat(u,\"/v1/experiments?ids=\").concat(i.join(\",\")),this.fullConfig.debug&&C(\"[OverridesPlugin] Fetching non-running experiments from API:\",n),a.label=1;case 1:return a.trys.push([1,4,,5]),r={\"Content-Type\":\"application/json\"},this.fullConfig.sdkApiKey&&(r.Authorization=\"ApiKey \".concat(this.fullConfig.sdkApiKey)),[4,fetch(n,{method:\"GET\",credentials:\"include\",headers:r,mode:\"cors\"})];case 2:return e=a.sent(),C(\"[OverridesPlugin] API Response status:\",e.status,e.statusText),e.ok?[4,e.json()]:(C(\"[OverridesPlugin] API request failed with status \".concat(e.status)),e.status===401&&C(\"[OverridesPlugin] Check if you need to log in to the ABsmartly console first\"),[2]);case 3:return o=a.sent(),o.experiments&&(this.injectExperimentsIntoContext(o.experiments),this.notifyExperimentsAdded()),[3,5];case 4:return y=a.sent(),C(\"[OverridesPlugin] Failed to fetch experiments from API:\",y),[3,5];case 5:return[2]}})})},t.prototype.fetchFromDevSDK=function(i,u){return Ce(this,void 0,void 0,function(){var n,r,e,o,y,a,c;return Pe(this,function(g){switch(g.label){case 0:n=this.fullConfig.sdkEndpoint,n.startsWith(\"http\")||(n=\"https://\".concat(n)),n.endsWith(\"/v1\")&&(n=n.slice(0,-3)),r=\"\".concat(n,\"/v1/context?environment=\").concat(encodeURIComponent(u)),this.fullConfig.application&&(r+=\"&application=\".concat(encodeURIComponent(this.fullConfig.application))),this.fullConfig.debug&&C(\"[OverridesPlugin] Fetching development experiments from SDK:\",r),g.label=1;case 1:return g.trys.push([1,4,,5]),e={},this.fullConfig.sdkApiKey&&(e.Authorization=\"ApiKey \".concat(this.fullConfig.sdkApiKey)),[4,fetch(r,{method:\"GET\",headers:e})];case 2:return o=g.sent(),C(\"[OverridesPlugin] DEV Response status:\",o.status,o.statusText),o.ok?[4,o.json()]:(C(\"[OverridesPlugin] DEV SDK request failed with status \".concat(o.status)),[2]);case 3:return y=g.sent(),y.experiments&&(a=Object.entries(y.experiments).map(function(m){var p=de(m,2),f=p[0],l=p[1];return re(re({},l),{name:f})}),this.injectExperimentsIntoContext(a),this.notifyExperimentsAdded()),[3,5];case 4:return c=g.sent(),C(\"[OverridesPlugin] Failed to fetch experiments from dev SDK:\",c),[3,5];case 5:return[2]}})})},t.prototype.injectExperimentsIntoContext=function(i){var u,n,r,e,o,y=this.fullConfig.context.data.bind(this.fullConfig.context),a=new Map;try{for(var c=ae(i),g=c.next();!g.done;g=c.next()){var m=g.value,p={id:m.id,name:m.name,unitType:((e=m.unit_type)===null||e===void 0?void 0:e.name)||\"user_id\",iteration:m.iteration||1,seedHi:0,seedLo:0,split:m.split||[],trafficSeedHi:0,trafficSeedLo:0,trafficSplit:[0,1],fullOnVariant:0,applications:((o=m.applications)===null||o===void 0?void 0:o.map(function(x){var b;return{name:((b=x.application)===null||b===void 0?void 0:b.name)||x.name}}))||[],variants:[],audience:m.audience||\"\",audienceStrict:m.audience_strict||!1};if(m.variants&&Array.isArray(m.variants))for(var f=0;f<m.variants.length;f++){var l=m.variants[f],s={name:l.name||\"Variant \".concat(f),config:typeof l.config==\"string\"?l.config:JSON.stringify(l.config||{})};if(l.variables)s.variables=l.variables;else if(l.config)try{var d=typeof l.config==\"string\"?JSON.parse(l.config):l.config,h=this.fullConfig.domChangesFieldName;d[h]&&(s.variables=(r={},r[h]=d[h],r),C(\"[OverridesPlugin] Variant \".concat(f,\" has DOM changes field '\").concat(h,\"'\")))}catch(x){C(\"[OverridesPlugin] Failed to parse variant config:\",x)}p.variants[f]=s}a.set(m.name,p)}}catch(x){u={error:x}}finally{try{g&&!g.done&&(n=c.return)&&n.call(c)}finally{if(u)throw u.error}}this.fullConfig.context.data=function(){var x,b,S=y();if(!S)return S;var O=S.experiments||[],w=new Set(O.map(function(T){return T.name})),_=function(T,M){if(!w.has(T))O.push(M);else{var L=O.findIndex(function(R){return R.name===T});L>=0&&(O[L]=M)}};try{for(var A=ae(a),E=A.next();!E.done;E=A.next()){var k=de(E.value,2),P=k[0],j=k[1];_(P,j)}}catch(T){x={error:T}}finally{try{E&&!E.done&&(b=A.return)&&b.call(A)}finally{if(x)throw x.error}}return re(re({},S),{experiments:O})},this.fullConfig.debug&&C(\"[OverridesPlugin] Injected \".concat(i.length,\" experiments into context\"))},t.prototype.onExperimentsAdded=function(i){this.onExperimentsAddedCallbacks.push(i)},t.prototype.notifyExperimentsAdded=function(){var i,u;this.fullConfig.debug&&C(\"[OverridesPlugin] Notifying \".concat(this.onExperimentsAddedCallbacks.length,\" listeners about new experiments\"));try{for(var n=ae(this.onExperimentsAddedCallbacks),r=n.next();!r.done;r=n.next()){var e=r.value;try{e()}catch(o){C(\"[OverridesPlugin] Error in experiments added callback:\",o)}}}catch(o){i={error:o}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}},t.prototype.registerWithContext=function(){this.fullConfig.context&&(this.fullConfig.context.__plugins||(this.fullConfig.context.__plugins={}),this.fullConfig.context.__plugins.overridesPlugin={name:\"OverridesPlugin\",version:\"1.0.0\",initialized:!0,capabilities:[\"cookie-overrides\",\"query-overrides\",\"api-fetch\",\"dev-environments\"],instance:this,timestamp:Date.now()},this.fullConfig.debug&&C(\"[OverridesPlugin] Registered with context at __plugins.overridesPlugin\"))},t.prototype.unregisterFromContext=function(){var i,u;!((u=(i=this.fullConfig.context)===null||i===void 0?void 0:i.__plugins)===null||u===void 0)&&u.overridesPlugin&&(delete this.fullConfig.context.__plugins.overridesPlugin,this.fullConfig.debug&&C(\"[OverridesPlugin] Unregistered from context\"))},t.prototype.destroy=function(){v.prototype.destroy.call(this),this.unregisterFromContext(),this.onExperimentsAddedCallbacks=[]},t}(Dt);var ze=function(){return ze=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},ze.apply(this,arguments)},xr=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Sr=function(){function v(){}return v.prototype.get=function(t){var i,u,n=t+\"=\",r=document.cookie.split(\";\");try{for(var e=xr(r),o=e.next();!o.done;o=e.next()){var y=o.value;if(y=y.trim(),y.indexOf(n)===0)return decodeURIComponent(y.substring(n.length))}}catch(a){i={error:a}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}return null},v.prototype.set=function(t,i,u){var n=\"\".concat(t,\"=\").concat(encodeURIComponent(i));u&&(u.path&&(n+=\"; path=\".concat(u.path)),u.domain&&(n+=\"; domain=\".concat(u.domain)),u.maxAge!==void 0&&(n+=\"; max-age=\".concat(u.maxAge)),u.secure&&(n+=\"; secure\"),u.sameSite&&(n+=\"; samesite=\".concat(u.sameSite))),document.cookie=n},v.prototype.delete=function(t,i){this.set(t,\"\",ze(ze({},i),{maxAge:0}))},v}();function ne(v){var t,i=\"; \".concat(document.cookie),u=i.split(\"; \".concat(v,\"=\"));if(u.length===2){var n=(t=u.pop())===null||t===void 0?void 0:t.split(\";\").shift();return n||null}return null}function We(v,t,i,u){u===void 0&&(u={});try{var n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);var r=\"expires=\".concat(n.toUTCString()),e=u.path||\"/\",o=\"\".concat(v,\"=\").concat(t,\";\").concat(r,\";path=\").concat(e);u.domain&&u.domain!==\"localhost\"&&(o+=\";domain=\".concat(u.domain));var y=u.sameSite||\"Lax\";return o+=\";SameSite=\".concat(y),u.secure&&(o+=\";Secure\"),document.cookie=o,!0}catch(a){return console.error(\"Unable to set cookie \".concat(v,\":\"),a),!1}}function et(v,t){t===void 0&&(t={}),We(v,\"\",-1,t)}function tt(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function te(){try{var v=\"__localStorage_test__\";return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch{return!1}}var Ft=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},zt=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Wt=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},Or=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},rt=function(){function v(t){t===void 0&&(t={}),this.context=t.context,this.debug=t.debug||!1,this.cookieDomain=t.cookieDomain||\".absmartly.com\",this.cookiePath=t.cookiePath||\"/\",this.sameSite=t.sameSite||\"Lax\",this.secure=t.secure||!1,this.cookieExpiryDays=t.cookieExpiryDays||730,this.unitIdCookieName=t.unitIdCookieName||\"abs\",this.publicIdCookieName=t.publicIdCookieName||\"abs_public\",this.expiryCookieName=t.expiryCookieName||\"abs_expiry\",this.utmCookieName=t.utmCookieName||\"abs_utm_params\",this.utmParams=t.utmParamsList||[\"utm_source\",\"utm_medium\",\"utm_campaign\",\"utm_term\",\"utm_content\"],this.autoUpdateExpiry=t.autoUpdateExpiry!==!1,this.expiryCheckInterval=t.expiryCheckInterval||30}return v.prototype.debugLog=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.debug&&C.apply(void 0,Or([\"[CookiePlugin]\"],Wt(t),!1))},v.prototype.setCookie=function(t,i,u){var n=u!==void 0?u:this.cookieExpiryDays,r=We(t,i,n,{domain:this.cookieDomain,path:this.cookiePath,sameSite:this.sameSite,secure:this.secure});return r&&this.debugLog(\"Set cookie \".concat(t,\":\"),i),r},v.prototype.deleteCookie=function(t){et(t,{domain:this.cookieDomain,path:this.cookiePath})},v.prototype.getUnitId=function(){if(this.unitId)return this.unitId;var t=navigator.cookieEnabled,i=te(),u=null;return t&&(u=ne(this.unitIdCookieName)||ne(this.publicIdCookieName)),!u&&i&&(u=localStorage.getItem(\"abs_id\")),u&&(this.unitId=u),u},v.prototype.setUnitId=function(t){this.unitId=t;var i=navigator.cookieEnabled,u=te();i&&(this.setCookie(this.unitIdCookieName,t),this.setCookie(this.publicIdCookieName,t),this.autoUpdateExpiry&&this.updateExpiryTimestamp()),u&&localStorage.setItem(\"abs_id\",t),this.debugLog(\"Unit ID set:\",t)},v.prototype.generateAndSetUnitId=function(){var t=tt();return this.setUnitId(t),t},v.prototype.updateExpiryTimestamp=function(){if(navigator.cookieEnabled){var t=Date.now();this.setCookie(this.expiryCookieName,t.toString()),this.debugLog(\"Updated expiry timestamp:\",t)}},v.prototype.isExpiryFresh=function(){if(!navigator.cookieEnabled)return!1;var t=ne(this.expiryCookieName);if(!t)return!1;try{var i=parseInt(t,10),u=Date.now(),n=(u-i)/(1e3*60*60*24),r=n<=this.expiryCheckInterval;return this.debugLog(\"Expiry check:\",{daysSinceSet:n,isFresh:r}),r}catch(e){return this.debugLog(\"Error parsing expiry cookie:\",e),!1}},v.prototype.getUtmParams=function(){var t={},i=new URLSearchParams(window.location.search);if(this.utmParams.forEach(function(r){var e=i.get(r);e&&(t[r]=e)}),Object.keys(t).length===0&&document.referrer)try{var u=new URL(document.referrer);this.utmParams.forEach(function(r){var e=u.searchParams.get(r);e&&(t[r]=e)})}catch(r){this.debugLog(\"Error parsing referrer URL:\",r)}if(Object.keys(t).length===0){var n=this.getStoredUtmParams();if(n)return n}return t},v.prototype.storeUtmParams=function(t){if(Object.keys(t).length!==0){var i={params:t,timestamp:Date.now()},u=navigator.cookieEnabled,n=te();if(n)try{localStorage.setItem(this.utmCookieName,JSON.stringify(i)),this.debugLog(\"Stored UTM params in localStorage:\",t)}catch(r){this.debugLog(\"Failed to store UTM params in localStorage:\",r)}u&&(this.setCookie(this.utmCookieName,JSON.stringify(i),30),this.debugLog(\"Stored UTM params in cookie:\",t))}},v.prototype.getStoredUtmParams=function(){var t=null,i=te(),u=navigator.cookieEnabled;if(i)try{t=localStorage.getItem(this.utmCookieName)}catch(r){this.debugLog(\"Failed to get UTM params from localStorage:\",r)}if(!t&&u&&(t=ne(this.utmCookieName)),t)try{var n=JSON.parse(t);if(Date.now()-n.timestamp<30*24*60*60*1e3)return n.params}catch(r){this.debugLog(\"Failed to parse stored UTM params:\",r)}return null},v.prototype.applyUtmAttributesToContext=function(t){var i=this,u=t||this.context;if(!u){C(\"[CookiePlugin] No context available to apply UTM attributes\");return}var n=this.getUtmParams();Object.keys(n).length>0&&this.storeUtmParams(n),Object.entries(n).forEach(function(r){var e=Wt(r,2),o=e[0],y=e[1],a=o.slice(4);u.attribute(a,y),i.debugLog(\"Set attribute \".concat(a,\":\"),y)})},v.prototype.clearAllCookies=function(){this.deleteCookie(this.unitIdCookieName),this.deleteCookie(this.publicIdCookieName),this.deleteCookie(this.expiryCookieName),this.deleteCookie(this.utmCookieName);var t=te();t&&(localStorage.removeItem(\"abs_id\"),localStorage.removeItem(this.utmCookieName)),this.unitId=void 0,this.debugLog(\"All cookies and storage cleared\")},v.prototype.ready=function(){return Ft(this,void 0,void 0,function(){var t;return zt(this,function(i){return this.debugLog(\"Initializing CookiePlugin\"),t=this.getUnitId(),t?(this.debugLog(\"Using existing unit ID:\",t),this.autoUpdateExpiry&&!this.isExpiryFresh()&&this.updateExpiryTimestamp()):(t=this.generateAndSetUnitId(),this.debugLog(\"Generated new unit ID:\",t)),this.context&&this.applyUtmAttributesToContext(),this.debugLog(\"CookiePlugin initialized successfully\"),[2]})})},v.prototype.initialize=function(){return Ft(this,void 0,void 0,function(){return zt(this,function(t){return[2,this.ready()]})})},v.prototype.setContext=function(t){this.context=t,this.debugLog(\"Context set for CookiePlugin\")},v.prototype.needsServerSideCookie=function(){var t=this.getUnitId(),i=navigator.cookieEnabled,u=te();if(t){if(i&&!this.isExpiryFresh())return this.debugLog(\"Existing ID present but expiry not fresh - need worker call\"),!0}else if(i||u){var n=ne(this.expiryCookieName);return this.debugLog(n?\"No existing ID but expiry cookie exists - need worker call\":\"No existing ID and no expiry cookie - need worker call\"),!0}return!1},v.prototype.trackLanding=function(t){var i=t||this.context;if(!i){C(\"[CookiePlugin] No context available for tracking landing\");return}var u=new URLSearchParams(window.location.search),n=this.utmParams.some(function(g){return u.get(g)}),r=document.referrer,e=r&&!r.includes(this.cookieDomain.replace(\".\",\"\")),o=navigator.cookieEnabled||te(),y=!!(ne(this.unitIdCookieName)||ne(this.publicIdCookieName)||ne(this.expiryCookieName)||te()&&localStorage.getItem(\"abs_id\")),a=o&&!y;if(n||e||a){var c={referrer_url:r||\"\",landing_url:window.location.href,accepts_cookies:navigator.cookieEnabled,accepts_storage:te(),has_utm:n};this.debugLog(\"Tracking landing:\",c),i.track(\"landing\",c)}},v}();var ye=function(){return ye=Object.assign||function(v){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n])}return v},ye.apply(this,arguments)},Me=function(v,t,i,u){function n(r){return r instanceof i?r:new i(function(e){e(r)})}return new(i||(i=Promise))(function(r,e){function o(c){try{a(u.next(c))}catch(g){e(g)}}function y(c){try{a(u.throw(c))}catch(g){e(g)}}function a(c){c.done?r(c.value):n(c.value).then(o,y)}a((u=u.apply(v,t||[])).next())})},Ie=function(v,t){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,n,r,e=Object.create((typeof Iterator==\"function\"?Iterator:Object).prototype);return e.next=o(0),e.throw=o(1),e.return=o(2),typeof Symbol==\"function\"&&(e[Symbol.iterator]=function(){return this}),e;function o(a){return function(c){return y([a,c])}}function y(a){if(u)throw new TypeError(\"Generator is already executing.\");for(;e&&(e=0,a[0]&&(i=0)),i;)try{if(u=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(v,i)}catch(c){a=[6,c],n=0}finally{u=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ke=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},jr=function(v,t,i){if(i||arguments.length===2)for(var u=0,n=t.length,r;u<n;u++)(r||!(u in t))&&(r||(r=Array.prototype.slice.call(t,0,u)),r[u]=t[u]);return v.concat(r||Array.prototype.slice.call(t))},wt=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},xt=function(){function v(t){t===void 0&&(t={}),this.webVitalsLoaded=!1,this.metricsTracked=!1,this.context=t.context,this.debug=t.debug||!1,this.trackWebVitals=t.trackWebVitals!==!1,this.trackPageMetrics=t.trackPageMetrics!==!1,this.autoTrack=t.autoTrack!==!1,typeof window<\"u\"&&this.trackWebVitals&&(this.webVitalsPromise=this.loadWebVitalsLibrary(),this.debugLog(\"Started pre-loading web-vitals library\"))}return v.prototype.debugLog=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.debug&&C.apply(void 0,jr([\"[WebVitalsPlugin]\"],Ke(t),!1))},v.prototype.setContext=function(t){this.context=t,this.debugLog(\"Context set for WebVitalsPlugin\")},v.prototype.loadWebVitalsLibrary=function(){return Me(this,void 0,void 0,function(){var t,i;return Ie(this,function(u){switch(u.label){case 0:if(this.webVitalsLoaded||typeof window>\"u\")return[2,null];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.resolve().then(()=>(Xt(),Zt))];case 2:return t=u.sent(),this.webVitalsLoaded=!0,this.debugLog(\"Web Vitals library loaded from bundle\"),[2,t];case 3:throw i=u.sent(),C(\"[WebVitalsPlugin] Failed to load Web Vitals library:\",i),i;case 4:return[2]}})})},v.prototype.trackWebVitalsMetrics=function(t){return Me(this,void 0,void 0,function(){var i,u,n,r=this;return Ie(this,function(e){switch(e.label){case 0:if(i=t||this.context,!i)return C(\"[WebVitalsPlugin] No context available for tracking web vitals\"),[2];if(!this.trackWebVitals)return[2];e.label=1;case 1:return e.trys.push([1,6,,7]),u=void 0,this.webVitalsPromise?[4,this.webVitalsPromise]:[3,3];case 2:return u=e.sent(),[3,5];case 3:return[4,this.loadWebVitalsLibrary()];case 4:u=e.sent(),e.label=5;case 5:return u?(u.onCLS(function(o){r.debugLog(\"CLS:\",o),i.track(\"cls_score\",ye({},o))}),u.onLCP(function(o){r.debugLog(\"LCP:\",o),i.track(\"lcp_score\",ye({},o))}),u.onFCP(function(o){r.debugLog(\"FCP:\",o),i.track(\"fcp_score\",ye({},o))}),u.onINP(function(o){r.debugLog(\"INP:\",o),i.track(\"inp_score\",ye({},o))}),u.onTTFB(function(o){r.debugLog(\"TTFB:\",o),i.track(\"ttfb_score\",ye({},o))}),this.debugLog(\"Web Vitals tracking initialized\"),[3,7]):(C(\"[WebVitalsPlugin] Web Vitals library not available\"),[2]);case 6:return n=e.sent(),C(\"[WebVitalsPlugin] Error tracking web vitals:\",n),i.track(\"vitals_tracking_error\",{error:n.message,type:n.name}),[3,7];case 7:return[2]}})})},v.prototype.trackPageMetricsData=function(t){var i=this,u=t||this.context;if(!u){C(\"[WebVitalsPlugin] No context available for tracking page metrics\");return}if(!(!this.trackPageMetrics||this.metricsTracked))try{this.trackImmediateMetrics(u),document.readyState===\"complete\"?this.trackLoadMetrics(u):window.addEventListener(\"load\",function(){return i.trackLoadMetrics(u)}),this.metricsTracked=!0}catch(n){C(\"[WebVitalsPlugin] Error tracking page metrics:\",n),u.track(\"metrics_tracking_error\",{error:n.message,type:n.name})}},v.prototype.trackImmediateMetrics=function(t){var i,u,n,r,e=performance.getEntriesByType(\"navigation\")[0];if(!e){this.debugLog(\"Navigation timing not available\");return}var o={dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ttfb:e.responseStart-e.requestStart,download:e.responseEnd-e.responseStart,total_fetch:e.responseEnd-e.requestStart};try{for(var y=wt(Object.entries(o)),a=y.next();!a.done;a=y.next()){var c=Ke(a.value,2),g=c[0],m=c[1];t.track(\"page_timing_\".concat(g),{value:m,unit:\"ms\"}),this.debugLog(\"Page timing \".concat(g,\":\"),m)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}var p={total_size:e.transferSize,header_size:e.transferSize-e.encodedBodySize,html_size:e.decodedBodySize,compressed_html_size:e.encodedBodySize};try{for(var f=wt(Object.entries(p)),l=f.next();!l.done;l=f.next()){var s=Ke(l.value,2),g=s[0],m=s[1];t.track(\"page_\".concat(g),{value:m,unit:\"bytes\"}),this.debugLog(\"Page \".concat(g,\":\"),m)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.encodedBodySize>0){var d=e.decodedBodySize/e.encodedBodySize;t.track(\"page_compression_ratio\",{value:d}),this.debugLog(\"Compression ratio:\",d)}},v.prototype.trackLoadMetrics=function(t){var i,u,n=performance.getEntriesByType(\"navigation\")[0];if(n){var r=n.domComplete-n.responseEnd;t.track(\"page_timing_dom_processing\",{value:r,metric:\"DOM Processing\",unit:\"ms\",rating:r<=500?\"good\":r<=1e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"DOM processing:\",r);var e=n.loadEventEnd-n.fetchStart;t.track(\"page_timing_total_load\",{value:e,metric:\"Total Load\",unit:\"ms\",rating:e<=2e3?\"good\":e<=4e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"Total load:\",e);var o={elements:document.getElementsByTagName(\"*\").length,imageCount:document.getElementsByTagName(\"img\").length,scriptCount:document.getElementsByTagName(\"script\").length,styleCount:document.getElementsByTagName(\"style\").length,linkCount:document.getElementsByTagName(\"link\").length};try{for(var y=wt(Object.entries(o)),a=y.next();!a.done;a=y.next()){var c=Ke(a.value,2),g=c[0],m=c[1];t.track(\"dom_\".concat(g),{value:m,metric:g,unit:\"count\",rating:m<=1e3?\"good\":m<=2e3?\"needs-improvement\":\"poor\"}),this.debugLog(\"DOM \".concat(g,\":\"),m)}}catch(p){i={error:p}}finally{try{a&&!a.done&&(u=y.return)&&u.call(y)}finally{if(i)throw i.error}}}},v.prototype.start=function(){return Me(this,void 0,void 0,function(){return Ie(this,function(t){return this.debugLog(\"Starting WebVitalsPlugin\"),this.context?(this.autoTrack&&(this.trackWebVitals&&this.trackWebVitalsMetrics(),this.trackPageMetrics&&this.trackPageMetricsData()),this.debugLog(\"WebVitalsPlugin started successfully\"),[2]):(this.debugLog(\"No context available during start\"),[2])})})},v.prototype.ready=function(){return Me(this,void 0,void 0,function(){return Ie(this,function(t){return[2,this.start()]})})},v.prototype.initialize=function(){return Me(this,void 0,void 0,function(){return Ie(this,function(t){return[2,this.start()]})})},v.prototype.reset=function(){this.metricsTracked=!1,this.debugLog(\"WebVitalsPlugin reset\")},v}();var Le=function(v){var t=typeof Symbol==\"function\"&&Symbol.iterator,i=t&&v[t],u=0;if(i)return i.call(v);if(v&&typeof v.length==\"number\")return{next:function(){return v&&u>=v.length&&(v=void 0),{value:v&&v[u++],done:!v}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},Qe=function(v,t){var i=typeof Symbol==\"function\"&&v[Symbol.iterator];if(!i)return v;var u=i.call(v),n,r=[],e;try{for(;(t===void 0||t-- >0)&&!(n=u.next()).done;)r.push(n.value)}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r};function tr(v,t){var i,u;if(v===void 0&&(v=\"_\"),typeof window>\"u\"&&!t)return{};var n=t||new URLSearchParams(window.location.search),r={};try{for(var e=Le(n.entries()),o=e.next();!o.done;o=e.next()){var y=Qe(o.value,2),a=y[0],c=y[1];if(a.startsWith(v)){var g=a.substring(v.length);if(g){var m=c.split(\",\"),p=parseInt(m[0],10);isNaN(p)||(m.length===1?r[g]=p:r[g]={variant:p,env:m[1]?parseInt(m[1],10):void 0,id:m[2]?parseInt(m[2],10):void 0})}}}}catch(f){i={error:f}}finally{try{o&&!o.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}}return r}function rr(v){var t,i;if(!v)return{};var u={},n=v;if(v.includes(\"|\")){var r=v.split(\"|\");n=r[r.length-1]}if(!n)return{};var e=n.split(\",\");try{for(var o=Le(e),y=o.next();!y.done;y=o.next()){var a=y.value,c=Qe(a.split(\":\"),2),g=c[0],m=c[1];if(!(!g||!m)){var p=decodeURIComponent(g),r=m.split(\".\"),f=parseInt(r[0],10);isNaN(f)||(r.length===1?u[p]=f:u[p]={variant:f,env:r[1]?parseInt(r[1],10):void 0,id:r[2]?parseInt(r[2],10):void 0})}}}catch(l){t={error:l}}finally{try{y&&!y.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return u}function nr(v,t){var i,u;v===void 0&&(v=\"absmartly_overrides\");var n=t??(typeof document<\"u\"?document.cookie:\"\");if(!n)return{};var r=v+\"=\",e=n.split(\";\");try{for(var o=Le(e),y=o.next();!y.done;y=o.next()){var a=y.value;if(a=a.trim(),a.indexOf(r)===0){var c=decodeURIComponent(a.substring(r.length));return rr(c)}}}catch(g){i={error:g}}finally{try{y&&!y.done&&(u=o.return)&&u.call(o)}finally{if(i)throw i.error}}return{}}function ir(v){var t,i,u=[];try{for(var n=Le(Object.entries(v)),r=n.next();!r.done;r=n.next()){var e=Qe(r.value,2),o=e[0],y=e[1],a=encodeURIComponent(o);if(typeof y==\"number\")u.push(\"\".concat(a,\":\").concat(y));else{var c=\"\".concat(a,\":\").concat(y.variant);y.env!==void 0&&(c+=\".\".concat(y.env)),y.id!==void 0&&(c+=\".\".concat(y.id)),u.push(c)}}}catch(g){t={error:g}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u.join(\",\")}function or(v,t){if(t===void 0&&(t={}),!(typeof document>\"u\")){var i=t.cookieName||\"absmartly_overrides\",u=t.maxAge||86400,n=ir(v);document.cookie=\"\".concat(i,\"=\").concat(encodeURIComponent(n),\";path=/;max-age=\").concat(u)}}function St(v,t,i,u){v===void 0&&(v=\"absmartly_overrides\"),t===void 0&&(t=\"_\");var n=tr(t,i);if(Object.keys(n).length>0)return typeof document<\"u\"&&or(n,{cookieName:v,maxAge:86400}),er(n);var r=nr(v,u);return er(r)}function er(v){var t,i,u={};try{for(var n=Le(Object.entries(v)),r=n.next();!r.done;r=n.next()){var e=Qe(r.value,2),o=e[0],y=e[1];u[o]=typeof y==\"number\"?y:y.variant}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u}var Tr=ar();window.ABsmartly=Tr;var ur=\"1.1.0-es-imports\";console.log(`[ABsmartly Zaraz] \\u{1F4E6} SDK Bundle Version: ${ur}`);window.ABsmartlyBundleVersion=ur;var le={start:performance.now(),sdkConfigured:0,contextCreated:0,contextReady:0,pluginsLoaded:0,domReady:0};function Oe(v){le[v]=performance.now();let t=(le[v]-le.start).toFixed(2);console.log(v===\"start\"?`[ABsmartly Zaraz] \\u23F1\\uFE0F  ${v}: ${t}ms`:`[ABsmartly Zaraz +${t}ms] \\u23F1\\uFE0F  ${v}`)}function Q(...v){let t=(performance.now()-le.start).toFixed(2);console.log(`[ABsmartly Zaraz +${t}ms]`,...v)}window.ABsmartlyInit=function(v,t,i,u,n,r){if(typeof ABsmartly>\"u\"||!ABsmartly.SDK){console.error(\"[ABsmartly Zaraz] SDK not loaded\");return}try{Oe(\"start\"),zaraz.track(\"absmartly_client_init\",{has_server_data:!!u,unit_type:i});var e=new URLSearchParams(location.search),o=v.queryPrefix||\"_\",y=St(\"absmartly_overrides\",o,e);Q(\"Client-side overrides:\",y);var a=Object.assign({},n||{},y);Q(\"Merged overrides (server + client):\",a);var c=r||{domChanges:!0,cookie:!0,webVitals:!0},g=null;if(c.cookie!==!1)try{g=new rt({debug:v.enableDebug||!1,cookieDomain:v.cookieDomain||window.location.hostname,cookiePath:\"/\",sameSite:\"Lax\",cookieExpiryDays:Je.MAX_AGE_DAYS,unitIdCookieName:ve.UNIT_ID,publicIdCookieName:ve.PUBLIC_ID,expiryCookieName:ve.EXPIRY,utmCookieName:ve.UTM_PARAMS,autoUpdateExpiry:!0,expiryCheckInterval:30}),Q(\"CookiePlugin initialized\")}catch(b){console.error(\"[ABsmartly Zaraz] \\u274C Failed to initialize CookiePlugin:\",b)}if(g&&g.needsServerSideCookie()&&t){Q(\"Setting HttpOnly cookie via Worker endpoint (CookiePlugin detected missing cookie)\");var m=\"https://custom-mc-absmartly.absmartly.workers.dev\",p=m+\"/set-cookie\";fetch(p,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({cookieName:ve.UNIT_ID,cookieValue:t,maxAge:Je.MAX_AGE_DAYS*86400,domain:v.cookieDomain||window.location.hostname,secure:!0,httpOnly:!0,sameSite:\"Lax\"}),credentials:\"include\"}).then(function(b){b.ok?(Q(\"\\u2705 HttpOnly cookie set successfully\"),g&&g.setUnitId(t)):console.error(\"[ABsmartly Zaraz] Failed to set HttpOnly cookie:\",b.status)}).catch(function(b){console.error(\"[ABsmartly Zaraz] Error setting HttpOnly cookie:\",b)})}var f={endpoint:v.endpoint,apiKey:v.apiKey,environment:v.environment,application:v.application,retries:v.retries,timeout:v.timeout};Q(\"SDK Configuration:\",{endpoint:f.endpoint,environment:f.environment,application:f.application,hasServerData:!!u}),Q(\"Overrides to apply:\",n||{}),Q(\"Initializing SDK with ID:\",t),Q(\"Mode:\",u?\"(with preloaded data)\":\"(will fetch data)\"),Oe(\"sdkConfigured\");var l=new ABsmartly.SDK(f),s,d={};d[i||\"user_id\"]=t;var h={units:d,publishDelay:100,eventLogger:function(b,S){b===\"exposure\"?zaraz.track(\"Experiment Viewed\",{experiment_id:S.name,experiment_name:S.name,variation_id:String(S.variant),variation_name:String(S.variant),data:S}):b===\"goal\"?zaraz.track(S.name,S.properties):b===\"publish\"&&zaraz.track(\"absmartly_client_publish\")}};u?s=l.createContextWith(h,u):s=l.createContext(h),Oe(\"contextCreated\"),a&&Object.keys(a).length>0&&(Q(\"Applying overrides to context:\",a),s.overrides(a)),window.ABsmartlyContext=s;var x={};if(c.cookie!==!1&&g&&(x.cookie=g,x.cookie.setContext(s),x.cookie.applyUtmAttributesToContext(),Q(\"CookiePlugin attached to context\")),c.domChanges!==!1)try{x.domChanges=new Xe({context:s,autoApply:!0,spa:!0,visibilityTracking:!0,debug:v.enableDebug||!1,hideUntilReady:v.hideSelector||\"body\",hideTransition:v.hideTransition||\"0.3s ease-in\"}),Q(\"DOMChangesPluginLite loaded\")}catch(b){console.error(\"[ABsmartly Zaraz] \\u274C Failed to load DOMChangesPlugin:\",b)}if(c.webVitals!==!1)try{Q(\"Lazy loading WebVitals plugin\"),x.webVitals=new xt({context:s,trackWebVitals:!0,trackPageMetrics:!0,debug:!1}),x.webVitals.initialize(),Q(\"Web vitals plugin initialized (tracking in background)\")}catch(b){console.error(\"[ABsmartly Zaraz] \\u274C Failed to load WebVitalsPlugin:\",b)}Oe(\"pluginsLoaded\"),s.ready().then(function(){Oe(\"contextReady\");var b=le.contextReady-le.start;if(console.log(`[ABsmartly Zaraz] \\u26A1 context.ready() completed in ${b.toFixed(2)}ms`),s.track(\"context_ready\",{time_ms:Math.round(b),has_server_data:!!u}),x.domChanges&&x.domChanges.ready)return x.domChanges.ready().then(function(){Oe(\"domReady\");var S=le.domReady-le.start;console.log(`[ABsmartly Zaraz] \\u{1F3AF} Total time to DOM ready: ${S.toFixed(2)}ms`),Q(\"DOM changes plugin ready!\")})}).catch(function(b){console.error(\"[ABsmartly Zaraz] \\u274C Failed to load context:\",b)})}catch(b){console.error(\"[ABsmartly Zaraz] \\u274C Failed to initialize SDK:\",b)}};})();\n"

export default sdkBundle
